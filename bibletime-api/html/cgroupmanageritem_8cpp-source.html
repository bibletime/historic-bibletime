<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cgroupmanageritem.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cgroupmanageritem.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cgroupmanageritem.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Tue Jan 25 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime Team</font>
00006 <font class="comment">    email                : Info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#include "cgroupmanageritem.h"</font>
00019 <font class="preprocessor">#include "cgroupmanager.h"</font>
00020 
00021 <font class="preprocessor">#include "backend/cswordversekey.h"</font>
00022 <font class="preprocessor">#include "backend/cswordldkey.h"</font>
00023 <font class="preprocessor">#include "backend/cswordmoduleinfo.h"</font>
00024 <font class="preprocessor">#include "backend/cswordbiblemoduleinfo.h"</font>
00025 <font class="preprocessor">#include "backend/cswordlexiconmoduleinfo.h"</font>
00026 
00027 <font class="preprocessor">#include "frontend/ctoolclass.h"</font>
00028 <font class="preprocessor">#include "frontend/ctooltipmanager.h"</font>
00029 <font class="preprocessor">#include "frontend/cbtconfig.h"</font>
00030 
00031 <font class="preprocessor">#include "resource.h"</font>
00032 
00033 <font class="comment">//Qt includes</font>
00034 <font class="preprocessor">#include &lt;qpixmap.h&gt;</font>
00035 
00036 <font class="comment">//KDE includes</font>
00037 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00038 <font class="preprocessor">#include &lt;kglobal.h&gt;</font>
00039 <font class="preprocessor">#include &lt;kiconloader.h&gt;</font>
00040 
00041 <font class="comment">//Sword includes</font>
00042 <font class="preprocessor">#include &lt;swmodule.h&gt;</font>
00043 
00044 
<a name="l00045"></a><a class="code" href="class_c_group_manager_item.html#a0">00045</a> <a class="code" href="class_c_group_manager_item.html#a0">CGroupManagerItem::CGroupManagerItem</a>(<a class="code" href="class_c_group_manager.html">CGroupManager</a> *parent, <font class="keyword">const</font> QString&amp; caption,
00046     <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::ItemType Type)
00047     : KListViewItem(static_cast&lt;QListView*&gt;(parent) ) {
00048     
00049     <a class="code" href="class_c_group_manager_item.html#c0">init</a>(caption, modulename, module_info, bookmarkKey, Type);
00050 }
00051 
<a name="l00052"></a><a class="code" href="class_c_group_manager_item.html#a1">00052</a> <a class="code" href="class_c_group_manager_item.html#a0">CGroupManagerItem::CGroupManagerItem</a>(<a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a> *parent, <font class="keyword">const</font> QString&amp; caption,
00053     <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::ItemType Type)
00054     : KListViewItem(static_cast&lt;QListViewItem*&gt;(parent)) {
00055     
00056     <a class="code" href="class_c_group_manager_item.html#c0">init</a>(caption, modulename, module_info,bookmarkKey, Type);
00057 }
00058 
<a name="l00059"></a><a class="code" href="class_c_group_manager_item.html#a2">00059</a> <a class="code" href="class_c_group_manager_item.html#a2">CGroupManagerItem::~CGroupManagerItem</a>(){
00060     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> &amp;&amp; <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a>) {
00061         <font class="keyword">delete</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;
00062         <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = 0;
00063     }   
00064 }
00065 
<a name="l00067"></a><a class="code" href="class_c_group_manager_item.html#a12">00067</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <a class="code" href="class_c_group_manager_item.html#a12">CGroupManagerItem::moduleInfo</a>()<font class="keyword"> const </font>{
00068     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>;
00069 }
00070 
<a name="l00072"></a><a class="code" href="class_c_group_manager_item.html#a13">00072</a> <font class="keyword">const</font> CGroupManagerItem::ItemType <a class="code" href="class_c_group_manager_item.html#a13">CGroupManagerItem::type</a>()<font class="keyword"> const </font>{
00073     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o0">m_type</a>;
00074 }
00075 
<a name="l00077"></a><a class="code" href="class_c_group_manager_item.html#a14">00077</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a14">CGroupManagerItem::setOpen</a>( <font class="keywordtype">bool</font> open ){
00078     QListViewItem::setOpen(open);
00079     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Group) {
00080     <font class="keywordflow">if</font> (open &amp;&amp; this-&gt;childCount() &gt; 0)
00081             setPixmap(0,<a class="code" href="class_c_group_manager_item.html#o8">m_openFolderIcon</a>);
00082         <font class="keywordflow">else</font>
00083             setPixmap(0,<a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a>);
00084     }
00085 }
00086 
<a name="l00088"></a><a class="code" href="class_c_group_manager_item.html#c0">00088</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#c0">CGroupManagerItem::init</a>( <font class="keyword">const</font> QString&amp; caption, <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::ItemType Type ){
00089     <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = 0;
00090     <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">false</font>;
00091     <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> = 0;
00092     <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a> = QString::null;
00093     <a class="code" href="class_c_group_manager_item.html#o4">m_description</a> = QString::null;
00094     
00095     <a class="code" href="class_c_group_manager_item.html#a6">setType</a>(Type);  
00096     <font class="keywordflow">if</font> (bookmarkKey)
00097         <a class="code" href="class_c_group_manager_item.html#a9">setBookmarkKey</a>( bookmarkKey );
00098     <a class="code" href="class_c_group_manager_item.html#a5">setModuleInfo</a>( module_info );
00099     <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a> = caption;
00100     <a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a> = modulename;
00101     
00102     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();   <font class="comment">//refresh the pixmap, texts etc.</font>
00103 }
00104 
<a name="l00106"></a><a class="code" href="class_c_group_manager_item.html#a15">00106</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a15">CGroupManagerItem::setDescription</a>(<font class="keyword">const</font> QString&amp; new_description) {
00107     <a class="code" href="class_c_group_manager_item.html#o4">m_description</a> = new_description;
00108     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();
00109 }
00110 
<a name="l00112"></a><a class="code" href="class_c_group_manager_item.html#a3">00112</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a3">CGroupManagerItem::description</a>()<font class="keyword"> const </font>{
00113     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o4">m_description</a>;
00114 }
00115 
<a name="l00117"></a><a class="code" href="class_c_group_manager_item.html#a4">00117</a> <a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a>* <a class="code" href="class_c_group_manager_item.html#a4">CGroupManagerItem::parent</a>(){
00118     <a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a>* myParent = dynamic_cast&lt;CGroupManagerItem*&gt;(QListViewItem::parent());    
00119     <font class="keywordflow">if</font> (myParent)
00120         <font class="keywordflow">return</font> myParent;
00121     <font class="keywordflow">else</font>
00122         <font class="keywordflow">return</font> 0;
00123 }
00124 
<a name="l00126"></a><a class="code" href="class_c_group_manager_item.html#a8">00126</a> <a class="code" href="class_c_group_manager.html">CGroupManager</a>* <a class="code" href="class_c_group_manager_item.html#a8">CGroupManagerItem::listView</a>(){
00127     <a class="code" href="class_c_group_manager.html">CGroupManager</a>* myListView = dynamic_cast&lt;CGroupManager*&gt;(QListViewItem::listView());
00128     <font class="keywordflow">if</font> (myListView)
00129         <font class="keywordflow">return</font> myListView;
00130     <font class="keywordflow">else</font>
00131         <font class="keywordflow">return</font> 0;   
00132 }
00133 
<a name="l00135"></a><a class="code" href="class_c_group_manager_item.html#a10">00135</a> <a class="code" href="class_c_sword_key.html">CSwordKey</a>* <a class="code" href="class_c_group_manager_item.html#a10">CGroupManagerItem::getBookmarkKey</a>()<font class="keyword"> const</font>{
00136     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;
00137 }
00138 
<a name="l00140"></a><a class="code" href="class_c_group_manager_item.html#a9">00140</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a9">CGroupManagerItem::setBookmarkKey</a>( <a class="code" href="class_c_sword_key.html">CSwordKey</a>* key ){
00141     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> &amp;&amp; <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a>)
00142         <font class="keyword">delete</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;       
00143     <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = key;
00144     <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">false</font>;
00145     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();
00146 }
00147 
<a name="l00149"></a><a class="code" href="class_c_group_manager_item.html#a7">00149</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a7">CGroupManagerItem::update</a>(){
00150     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Group) {
00151         <a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a> = GROUP_ICON_SMALL;
00152         <a class="code" href="class_c_group_manager_item.html#o8">m_openFolderIcon</a> = GROUP_OPEN_ICON_SMALL;       
00153         setPixmap(0, <a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a>);
00154         setText(0, <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>);
00155     }
00156   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Bookmark) {
00157         QString title = QString::null;
00158         setPixmap(0, BOOKMARK_ICON_SMALL);
00159         <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey = <a class="code" href="class_c_group_manager_item.html#a10">getBookmarkKey</a>();
00160         <font class="keywordflow">if</font> ( bookmarkKey ) {    <font class="comment">//if we have a valid key</font>
00161             title = bookmarkKey-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>();
00162         }
00163         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!<a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>.isEmpty()){ <font class="comment">//bookmark key is 0, we use now the m_caption member to create a valid key</font>
00164             <a class="code" href="class_c_sword_key.html">CSwordKey</a>* key = <a class="code" href="class_c_sword_key.html#d0">CSwordKey::createInstance</a>(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>);
00165 <font class="comment">//          ASSERT(key);</font>
00166             <font class="keywordflow">if</font> (key) {
00167                 <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">true</font>;
00168                 key-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>(<a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>);
00169                 <a class="code" href="class_c_group_manager_item.html#a9">setBookmarkKey</a>(key);
00170                 <a class="code" href="class_c_group_manager_item.html#a7">update</a>();<font class="comment">// this won't lead to a infinite loop because we have now a valid key</font>
00171             }
00172             <font class="keywordflow">else</font> { <font class="comment">//no key and now module but a valid caption</font>
00173                 title = <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>;
00174             }
00175         }       
00176         <font class="keywordflow">if</font> (!title.isEmpty()) {
00177                 title = QString::fromLatin1(<font class="stringliteral">"%1 (%2)"</font>)
00178                     .arg(title)
00179                     .arg(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> ? <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>-&gt;<a class="code" href="class_c_sword_module_info.html#o2">name</a>() : i18n(<font class="stringliteral">"unknown"</font>));
00180             setText(0,title);
00181         }
00182     }
00183     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( <a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == CGroupManagerItem::Module ) {
00184         setPixmap(0, <a class="code" href="class_c_tool_class.html#d4">CToolClass::getIconForModule</a>(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>));
00185         <font class="keywordflow">if</font> (m_moduleInfo)
00186             setText(0, <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>-&gt;<a class="code" href="class_c_sword_module_info.html#o2">name</a>());
00187         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!<a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a>.isEmpty())
00188             setText(0, <a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a>);           
00189         <font class="keywordflow">else</font>
00190             setText(0, i18n(<font class="stringliteral">"unknown"</font>));
00191     }
00192 }
00193 
<a name="l00195"></a><a class="code" href="class_c_group_manager_item.html#a6">00195</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a6">CGroupManagerItem::setType</a>( <font class="keyword">const</font> CGroupManagerItem::ItemType type) {
00196     <a class="code" href="class_c_group_manager_item.html#o0">m_type</a> = <a class="code" href="class_c_group_manager_item.html#a13">type</a>;
00197 }
00198 
<a name="l00200"></a><a class="code" href="class_c_group_manager_item.html#a5">00200</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a5">CGroupManagerItem::setModuleInfo</a>( <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* moduleInfo ){
00201     <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> = dynamic_cast&lt;CSwordModuleInfo*&gt;(moduleInfo);
00202 }
00203 
<a name="l00205"></a><a class="code" href="class_c_group_manager_item.html#a11">00205</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a11">CGroupManagerItem::getKeyText</a>(){
00206     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> ? <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>() : QString::null;
00207 }
00208 
<a name="l00210"></a><a class="code" href="class_c_group_manager_item.html#a16">00210</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a16">CGroupManagerItem::getToolTip</a>(){
00211     QString text = QString::null;
00212     <font class="keywordflow">switch</font> ( <a class="code" href="class_c_group_manager_item.html#a13">type</a>() ) {
00213         <font class="keywordflow">case</font> Bookmark:
00214         {
00215 <font class="comment">//          text = i18n("Bookmark to" ) + QString::fromLatin1(" ");</font>
00216 <font class="comment">//          text.append(QString::fromLatin1("&lt;B&gt;") + getKeyText() + QString::fromLatin1("&lt;/B&gt;&lt;BR&gt;"));</font>
00217 <font class="comment">//          if (!description().stripWhiteSpace().isEmpty())</font>
00218 <font class="comment">//              text.append(QString::fromLatin1("&lt;FONT color=\"#800000\"&gt;(") + description().stripWhiteSpace() + QString::fromLatin1(")&lt;/FONT&gt;&lt;BR&gt;"));</font>
00219 <font class="comment">//          text.append(QString::fromLatin1("&lt;HR&gt;"));           </font>
00220 <font class="comment">//              </font>
00221 <font class="comment">//          CSwordKey* key = dynamic_cast&lt;CSwordKey*&gt;(getBookmarkKey());</font>
00222 <font class="comment">//          if (!key)</font>
00223 <font class="comment">//              return QString::null;               </font>
00224 <font class="comment">//          QString bookmarkText =  key ? key-&gt;renderedText() : QString();</font>
00225 <font class="comment">//          if (bookmarkText.length() &gt; 150 &amp;&amp; (moduleInfo()-&gt;type() != CSwordModuleInfo::Bible))</font>
00226 <font class="comment">//              bookmarkText = bookmarkText.left(150) + "&lt;BR&gt;[...]";</font>
00227 <font class="comment">//</font>
00228 <font class="comment">//          //Module is Unicode-based</font>
00229 <font class="comment">//          if (moduleInfo() &amp;&amp; moduleInfo()-&gt;isUnicode() ) {</font>
00230 <font class="comment">//              QFont f = CBTConfig::get(CBTConfig::unicode);</font>
00231 <font class="comment">//              text.append( QString::fromLatin1("&lt;FONT FACE=\"%1\"&gt;%3&lt;/FONT&gt;").arg(f.family())/*.arg(CToolClass::makeLogicFontSize(f.pointSize()))*/.arg(bookmarkText) );</font>
00232 <font class="comment">//          }</font>
00233 <font class="comment">//          else</font>
00234 <font class="comment">//              text.append(bookmarkText);</font>
00235 
00236 <font class="comment">//      return text;                </font>
00237             <font class="keywordflow">return</font> <a class="code" href="class_c_tooltip_manager.html#d1">CTooltipManager::textForReference</a>(<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;name(), <a class="code" href="class_c_group_manager_item.html#a11">getKeyText</a>(), <a class="code" href="class_c_group_manager_item.html#a3">description</a>());
00238         }
00239         <font class="keywordflow">case</font> Module:
00240         {
00241             text = i18n(<font class="stringliteral">"Module"</font>) + QString::fromLatin1(<font class="stringliteral">": &lt;B&gt;%1&lt;/B&gt;&lt;HR&gt;"</font>).arg( <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;name() );
00242             text += <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a0">config</a>(CSwordModuleInfo::Description) + QString::fromLatin1(<font class="stringliteral">"&lt;HR&gt;"</font>);
00243             text += i18n(<font class="stringliteral">"Language"</font>)+ QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>).arg(<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;module()-&gt;Lang());
00244             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a8">isEncrypted</a>())
00245                 text += i18n(<font class="stringliteral">"Unlock key"</font>) + QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>)
00246                     .arg(!<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::CipherKey).isEmpty() ? <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::CipherKey) : QString(<font class="stringliteral">"&lt;FONT COLOR=\"red\"&gt;%1&lt;/FONT&gt;"</font>).arg(i18n(<font class="stringliteral">"not set"</font>)));
00247             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a10">hasVersion</a>())
00248                 text += i18n(<font class="stringliteral">"Version"</font>) + QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>).arg(<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::ModuleVersion));
00249                 
00250         QString options;
00251         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> opts;
00252         <font class="keywordflow">for</font> (opts = CSwordBackend::filterOptionsMIN; opts &lt;= CSwordBackend::filterOptionsMAX; ++opts){
00253             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a20">has</a>( (<a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a>) opts )) {
00254             <font class="keywordflow">if</font> (!options.isEmpty())
00255                 options += QString::fromLatin1(<font class="stringliteral">", "</font>);
00256             options += <a class="code" href="class_c_sword_backend.html#d3">CSwordBackend::translatedOptionName</a>( (<a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a>) opts);
00257             }
00258         }
00259         <font class="keywordflow">if</font> (!options.isEmpty())
00260             text += i18n(<font class="stringliteral">"Options"</font>) + QString::fromLatin1(<font class="stringliteral">": &lt;font size= \"-1\"&gt;"</font>) + options + QString::fromLatin1(<font class="stringliteral">"&lt;/font&gt;"</font>);
00261             
00262             <font class="keywordflow">if</font> (text.right(4) == QString::fromLatin1(<font class="stringliteral">"&lt;BR&gt;"</font>))
00263                 text = text.left(text.length()-4);          
00264             <font class="keywordflow">return</font> text;
00265         }
00266         <font class="keywordflow">case</font> Group:
00267         <font class="keywordflow">default</font>:
00268             <font class="keywordflow">return</font> QString::null;
00269     }
00270 }
00271 
<a name="l00273"></a><a class="code" href="class_c_group_manager_item.html#a17">00273</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a17">CGroupManagerItem::moveAfter</a>( <a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a>* item, MoveType type ){
00274     <font class="keywordflow">if</font> (!item)
00275         <font class="keywordflow">return</font>;
00276     
00277     <font class="keywordflow">if</font> ( <a class="code" href="class_c_group_manager_item.html#a4">parent</a>() != item-&gt;<a class="code" href="class_c_group_manager_item.html#a4">parent</a>() ) { <font class="comment">//different levels</font>
00278         <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a13">type</a> == AllowDifferentParents) { <font class="comment">//different parents are allowed</font>
00279             <font class="keywordflow">if</font> (item-&gt;<a class="code" href="class_c_group_manager_item.html#a4">parent</a>())
00280                 item-&gt;<a class="code" href="class_c_group_manager_item.html#a4">parent</a>()-&gt;insertItem(<font class="keyword">this</font>); <font class="comment">//insert item to the childs</font>
00281             <font class="keywordflow">else</font>
00282                 <a class="code" href="class_c_group_manager_item.html#a8">listView</a>()-&gt;insertItem(<font class="keyword">this</font>);
00283             moveItem(item);
00284         }
00285     }
00286     <font class="keywordflow">else</font> {
00287         moveItem(item); <font class="comment">//both items are on the same level, so we can use moveItem</font>
00288     }
00289 }
</pre></div><hr><address align="right"><small>Generated on Tue Jul 16 13:53:08 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
