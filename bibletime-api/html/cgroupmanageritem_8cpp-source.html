<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cgroupmanageritem.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cgroupmanageritem.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cgroupmanageritem.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Tue Jan 25 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime Team</font>
00006 <font class="comment">    email                : Info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#include "cgroupmanageritem.h"</font>
00019 <font class="preprocessor">#include "cgroupmanager.h"</font>
00020 <font class="preprocessor">#include "../../backend/cswordversekey.h"</font>
00021 <font class="preprocessor">#include "../../backend/cswordldkey.h"</font>
00022 <font class="preprocessor">#include "../../backend/cswordmoduleinfo.h"</font>
00023 <font class="preprocessor">#include "../../backend/cswordbiblemoduleinfo.h"</font>
00024 <font class="preprocessor">#include "../../backend/cswordlexiconmoduleinfo.h"</font>
00025 <font class="preprocessor">#include "../../resource.h"</font>
00026 <font class="preprocessor">#include "../ctoolclass.h"</font>
00027 <font class="preprocessor">#include "../cbtconfig.h"</font>
00028 
00029 <font class="comment">//Qt includes</font>
00030 <font class="preprocessor">#include &lt;qpixmap.h&gt;</font>
00031 
00032 <font class="comment">//KDE includes</font>
00033 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00034 <font class="preprocessor">#include &lt;kglobal.h&gt;</font>
00035 <font class="preprocessor">#include &lt;kiconloader.h&gt;</font>
00036 
00037 <font class="comment">//Sword includes</font>
00038 <font class="preprocessor">#include &lt;swmodule.h&gt;</font>
00039 
00040 
<a name="l00041"></a><a class="code" href="class_c_group_manager_item.html#a0">00041</a> <a class="code" href="class_c_group_manager_item.html#a0">CGroupManagerItem::CGroupManagerItem</a>(<a class="code" href="class_c_group_manager.html">CGroupManager</a> *parent, <font class="keyword">const</font> QString&amp; caption,
00042     <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::itemType Type)
00043     : KListViewItem((QListView*)parent) {   
00044     
00045     <a class="code" href="class_c_group_manager_item.html#c0">init</a>(caption, modulename, module_info, bookmarkKey, Type);
00046 }
00047 
<a name="l00048"></a><a class="code" href="class_c_group_manager_item.html#a1">00048</a> <a class="code" href="class_c_group_manager_item.html#a0">CGroupManagerItem::CGroupManagerItem</a>(<a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a> *parent, <font class="keyword">const</font> QString&amp; caption,
00049     <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::itemType Type)
00050     : KListViewItem((QListViewItem*)parent) {
00051     
00052     <a class="code" href="class_c_group_manager_item.html#c0">init</a>(caption, modulename, module_info,bookmarkKey, Type);
00053 }
00054 
<a name="l00055"></a><a class="code" href="class_c_group_manager_item.html#a2">00055</a> <a class="code" href="class_c_group_manager_item.html#a2">CGroupManagerItem::~CGroupManagerItem</a>(){
00056     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> &amp;&amp; <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a>) {
00057         <font class="keyword">delete</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;
00058         <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = 0;
00059     }   
00060 }
00061 
<a name="l00063"></a><a class="code" href="class_c_group_manager_item.html#a12">00063</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <a class="code" href="class_c_group_manager_item.html#a12">CGroupManagerItem::moduleInfo</a>()<font class="keyword"> const </font>{
00064     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>;
00065 }
00066 
<a name="l00068"></a><a class="code" href="class_c_group_manager_item.html#a13">00068</a> <font class="keyword">const</font> CGroupManagerItem::itemType <a class="code" href="class_c_group_manager_item.html#a13">CGroupManagerItem::type</a>()<font class="keyword"> const </font>{
00069     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o0">m_type</a>;
00070 }
00071 
<a name="l00073"></a><a class="code" href="class_c_group_manager_item.html#a14">00073</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a14">CGroupManagerItem::setOpen</a>( <font class="keywordtype">bool</font> open ){
00074     QListViewItem::setOpen(open);
00075     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Group) {
00076     <font class="keywordflow">if</font> (open &amp;&amp; this-&gt;childCount() &gt; 0)
00077             setPixmap(0,<a class="code" href="class_c_group_manager_item.html#o8">m_openFolderIcon</a>);
00078         <font class="keywordflow">else</font>
00079             setPixmap(0,<a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a>);
00080     }
00081 }
00082 
<a name="l00084"></a><a class="code" href="class_c_group_manager_item.html#c0">00084</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#c0">CGroupManagerItem::init</a>( <font class="keyword">const</font> QString&amp; caption, <font class="keyword">const</font> QString&amp; modulename, <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module_info, <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey, CGroupManagerItem::itemType Type ){
00085     <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = 0;
00086     <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">false</font>;
00087     <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> = 0;
00088     <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a> = QString::null;
00089     <a class="code" href="class_c_group_manager_item.html#o4">m_description</a> = QString::null;
00090     
00091     <a class="code" href="class_c_group_manager_item.html#a6">setType</a>(Type);  
00092     <font class="keywordflow">if</font> (bookmarkKey)
00093         <a class="code" href="class_c_group_manager_item.html#a9">setBookmarkKey</a>( bookmarkKey );
00094     <a class="code" href="class_c_group_manager_item.html#a5">setModuleInfo</a>( module_info );
00095     <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a> = caption;
00096     <a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a> = modulename;
00097     
00098     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();   <font class="comment">//refresh the pixmap, texts etc.</font>
00099 }
00100 
<a name="l00102"></a><a class="code" href="class_c_group_manager_item.html#a15">00102</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a15">CGroupManagerItem::setDescription</a>(<font class="keyword">const</font> QString&amp; new_description) {
00103     <a class="code" href="class_c_group_manager_item.html#o4">m_description</a> = new_description;
00104     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();
00105 }
00106 
<a name="l00108"></a><a class="code" href="class_c_group_manager_item.html#a3">00108</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a3">CGroupManagerItem::description</a>()<font class="keyword"> const </font>{
00109     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o4">m_description</a>;
00110 }
00111 
<a name="l00113"></a><a class="code" href="class_c_group_manager_item.html#a4">00113</a> <a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a>* <a class="code" href="class_c_group_manager_item.html#a4">CGroupManagerItem::parent</a>(){
00114     <a class="code" href="class_c_group_manager_item.html">CGroupManagerItem</a>* myParent = dynamic_cast&lt;CGroupManagerItem*&gt;(QListViewItem::parent());    
00115     <font class="keywordflow">if</font> (myParent)
00116         <font class="keywordflow">return</font> myParent;
00117     <font class="keywordflow">else</font>
00118         <font class="keywordflow">return</font> 0;
00119 }
00120 
<a name="l00122"></a><a class="code" href="class_c_group_manager_item.html#a8">00122</a> <a class="code" href="class_c_group_manager.html">CGroupManager</a>* <a class="code" href="class_c_group_manager_item.html#a8">CGroupManagerItem::listView</a>(){
00123     <a class="code" href="class_c_group_manager.html">CGroupManager</a>* myListView = dynamic_cast&lt;CGroupManager*&gt;(QListViewItem::listView());
00124     <font class="keywordflow">if</font> (myListView)
00125         <font class="keywordflow">return</font> myListView;
00126     <font class="keywordflow">else</font>
00127         <font class="keywordflow">return</font> 0;   
00128 }
00129 
<a name="l00131"></a><a class="code" href="class_c_group_manager_item.html#a10">00131</a> <a class="code" href="class_c_sword_key.html">CSwordKey</a>* <a class="code" href="class_c_group_manager_item.html#a10">CGroupManagerItem::getBookmarkKey</a>()<font class="keyword"> const</font>{
00132     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;
00133 }
00134 
<a name="l00136"></a><a class="code" href="class_c_group_manager_item.html#a9">00136</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a9">CGroupManagerItem::setBookmarkKey</a>( <a class="code" href="class_c_sword_key.html">CSwordKey</a>* key ){
00137     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> &amp;&amp; <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a>)
00138         <font class="keyword">delete</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>;       
00139     <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> = key;
00140     <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">false</font>;
00141     <a class="code" href="class_c_group_manager_item.html#a7">update</a>();
00142 }
00143 
<a name="l00145"></a><a class="code" href="class_c_group_manager_item.html#a7">00145</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a7">CGroupManagerItem::update</a>(){
00146     <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Group) {
00147         <a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a> = GROUP_ICON_SMALL;
00148         <a class="code" href="class_c_group_manager_item.html#o8">m_openFolderIcon</a> = GROUP_OPEN_ICON_SMALL;       
00149         setPixmap(0, <a class="code" href="class_c_group_manager_item.html#o7">m_folderIcon</a>);
00150         setText(0, <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>);
00151     }
00152   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == Bookmark) {
00153         QString title = QString::null;
00154         setPixmap(0, BOOKMARK_ICON_SMALL);
00155         <a class="code" href="class_c_sword_key.html">CSwordKey</a>* bookmarkKey = <a class="code" href="class_c_group_manager_item.html#a10">getBookmarkKey</a>();
00156         <font class="keywordflow">if</font> ( bookmarkKey ) {    <font class="comment">//if we have a valid key</font>
00157             title = bookmarkKey-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>();
00158         }
00159         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!<a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>.isEmpty()){ <font class="comment">//bookmark key is 0, we use now the m_caption member to create a valid key</font>
00160             <a class="code" href="class_c_sword_key.html">CSwordKey</a>* key = <a class="code" href="class_c_sword_key.html#d0">CSwordKey::createInstance</a>(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>);
00161             ASSERT(key);
00162             <font class="keywordflow">if</font> (key) {
00163                 <a class="code" href="class_c_group_manager_item.html#o3">m_createdOwnKey</a> = <font class="keyword">true</font>;
00164                 key-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>(<a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>);
00165                 <a class="code" href="class_c_group_manager_item.html#a9">setBookmarkKey</a>(key);
00166                 <a class="code" href="class_c_group_manager_item.html#a7">update</a>();<font class="comment">// this won't lead to a infinite loop because we have now a valid key</font>
00167             }
00168             <font class="keywordflow">else</font> { <font class="comment">//no key and now module but a valid caption</font>
00169                 title = <a class="code" href="class_c_group_manager_item.html#o5">m_caption</a>;
00170             }
00171         }       
00172         <font class="keywordflow">if</font> (!title.isEmpty()) {
00173                 title = QString::fromLatin1(<font class="stringliteral">"%1 (%2)"</font>)
00174                     .arg(title)
00175                     .arg(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> ? <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>-&gt;<a class="code" href="class_c_sword_module_info.html#a17">name</a>() : i18n(<font class="stringliteral">"unknown"</font>));
00176             setText(0,title);
00177         }
00178     }
00179     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( <a class="code" href="class_c_group_manager_item.html#o0">m_type</a> == CGroupManagerItem::Module ) {
00180         setPixmap(0, <a class="code" href="class_c_tool_class.html#d5">CToolClass::getIconForModule</a>(<a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>));
00181         <font class="keywordflow">if</font> (m_moduleInfo)
00182             setText(0, <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a>-&gt;<a class="code" href="class_c_sword_module_info.html#a17">name</a>());
00183         <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!<a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a>.isEmpty())
00184             setText(0, <a class="code" href="class_c_group_manager_item.html#o6">m_moduleName</a>);           
00185         <font class="keywordflow">else</font>
00186             setText(0, i18n(<font class="stringliteral">"unknown"</font>));
00187     }
00188 }
00189 
<a name="l00191"></a><a class="code" href="class_c_group_manager_item.html#a6">00191</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a6">CGroupManagerItem::setType</a>( <font class="keyword">const</font> CGroupManagerItem::itemType type) {
00192     <a class="code" href="class_c_group_manager_item.html#o0">m_type</a> = <a class="code" href="class_c_group_manager_item.html#a13">type</a>;
00193 }
00194 
<a name="l00196"></a><a class="code" href="class_c_group_manager_item.html#a5">00196</a> <font class="keywordtype">void</font> <a class="code" href="class_c_group_manager_item.html#a5">CGroupManagerItem::setModuleInfo</a>( <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* moduleInfo ){
00197     <a class="code" href="class_c_group_manager_item.html#o1">m_moduleInfo</a> = dynamic_cast&lt;CSwordModuleInfo*&gt;(moduleInfo);
00198 }
00199 
<a name="l00201"></a><a class="code" href="class_c_group_manager_item.html#a11">00201</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a11">CGroupManagerItem::getKeyText</a>(){
00202 <font class="comment">//  CSwordKey* key = dynamic_cast&lt;CSwordKey*&gt;(m_bookmarkKey);</font>
00203     <font class="keywordflow">return</font> <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a> ? <a class="code" href="class_c_group_manager_item.html#o2">m_bookmarkKey</a>-&gt;<a class="code" href="class_c_sword_key.html#a1">key</a>() : QString::null;
00204 }
00205 
<a name="l00207"></a><a class="code" href="class_c_group_manager_item.html#a16">00207</a> <font class="keyword">const</font> QString <a class="code" href="class_c_group_manager_item.html#a16">CGroupManagerItem::getToolTip</a>(){
00208     QString text = QString::null;
00209     <font class="keywordflow">switch</font> ( <a class="code" href="class_c_group_manager_item.html#a13">type</a>() ) {
00210         <font class="keywordflow">case</font> Bookmark:
00211         {
00212             text = i18n(<font class="stringliteral">"Bookmark to"</font> ) + QString::fromLatin1(<font class="stringliteral">" "</font>);
00213             text.append(QString::fromLatin1(<font class="stringliteral">"&lt;B&gt;"</font>) + <a class="code" href="class_c_group_manager_item.html#a11">getKeyText</a>() + QString::fromLatin1(<font class="stringliteral">"&lt;/B&gt;&lt;BR&gt;"</font>));
00214             <font class="keywordflow">if</font> (!<a class="code" href="class_c_group_manager_item.html#a3">description</a>().stripWhiteSpace().isEmpty())
00215                 text.append(QString::fromLatin1(<font class="stringliteral">"&lt;FONT color=\"#800000\"&gt;("</font>) + <a class="code" href="class_c_group_manager_item.html#a3">description</a>().stripWhiteSpace() + QString::fromLatin1(<font class="stringliteral">")&lt;/FONT&gt;&lt;BR&gt;"</font>));
00216             text.append(QString::fromLatin1(<font class="stringliteral">"&lt;HR&gt;"</font>));           
00217                 
00218             <a class="code" href="class_c_sword_key.html">CSwordKey</a>* key = dynamic_cast&lt;CSwordKey*&gt;(<a class="code" href="class_c_group_manager_item.html#a10">getBookmarkKey</a>());
00219             <font class="keywordflow">if</font> (!key)
00220                 <font class="keywordflow">return</font> QString::null;               
00221             QString bookmarkText =  key ? key-&gt;<a class="code" href="class_c_sword_key.html#a5">renderedText</a>() : QString();
00222             <font class="keywordflow">if</font> (bookmarkText.length() &gt; 150 &amp;&amp; (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a15">type</a>() != CSwordModuleInfo::Bible))
00223                 bookmarkText = bookmarkText.left(150) + <font class="stringliteral">"&lt;BR&gt;[...]"</font>;
00224 
00225             <font class="comment">//Module is Unicode-based</font>
00226             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>() &amp;&amp; <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a18">isUnicode</a>() ) {
00227             QFont f = CBTConfig::get(CBTConfig::unicode);
00228                 text.append( QString::fromLatin1(<font class="stringliteral">"&lt;FONT FACE=\"%1\"&gt;%3&lt;/FONT&gt;"</font>).arg(f.family())<font class="comment">/*.arg(CToolClass::makeLogicFontSize(f.pointSize()))*/</font>.arg(bookmarkText) );
00229             }
00230             <font class="keywordflow">else</font>
00231                 text.append(bookmarkText);
00232 
00233       <font class="keywordflow">return</font> text;              
00234         }
00235         <font class="keywordflow">case</font> Module:
00236         {
00237             text = i18n(<font class="stringliteral">"Module"</font>) + QString::fromLatin1(<font class="stringliteral">": &lt;B&gt;%1&lt;/B&gt;&lt;HR&gt;"</font>).arg( <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;name() );
00238             text += <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a0">config</a>(CSwordModuleInfo::Description) + QString::fromLatin1(<font class="stringliteral">"&lt;HR&gt;"</font>);
00239             text += i18n(<font class="stringliteral">"Language"</font>)+ QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>).arg(<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;module()-&gt;Lang());
00240             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a8">isEncrypted</a>())
00241                 text += i18n(<font class="stringliteral">"Unlock key"</font>) + QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>)
00242                     .arg(!<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::CipherKey).isEmpty() ? <a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::CipherKey) : QString(<font class="stringliteral">"&lt;FONT COLOR=\"red\"&gt;%1&lt;/FONT&gt;"</font>).arg(i18n(<font class="stringliteral">"not set"</font>)));
00243             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a10">hasVersion</a>())
00244                 text += i18n(<font class="stringliteral">"Version"</font>) + QString::fromLatin1(<font class="stringliteral">": %1&lt;BR&gt;"</font>).arg(<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;config(CSwordModuleInfo::ModuleVersion));
00245                 
00246         QString options;
00247         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> opts;
00248         <font class="keywordflow">for</font> (opts = CSwordBackend::filterOptionsMIN; opts &lt;= CSwordBackend::filterOptionsMAX; ++opts){
00249             <font class="keywordflow">if</font> (<a class="code" href="class_c_group_manager_item.html#a12">moduleInfo</a>()-&gt;<a class="code" href="class_c_sword_module_info.html#a20">has</a>( (<a class="code" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a>) opts )) {
00250             <font class="keywordflow">if</font> (!options.isEmpty())
00251                 options += QString::fromLatin1(<font class="stringliteral">", "</font>);
00252             options += <a class="code" href="class_c_sword_backend.html#d3">CSwordBackend::translatedOptionName</a>( (<a class="code" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a>) opts);
00253             }
00254         }
00255         <font class="keywordflow">if</font> (!options.isEmpty())
00256             text += i18n(<font class="stringliteral">"Options"</font>) + QString::fromLatin1(<font class="stringliteral">": &lt;font size= \"-1\"&gt;"</font>) + options + QString::fromLatin1(<font class="stringliteral">"&lt;/font&gt;"</font>);
00257             
00258             <font class="keywordflow">if</font> (text.right(4) == QString::fromLatin1(<font class="stringliteral">"&lt;BR&gt;"</font>))
00259                 text = text.left(text.length()-4);          
00260             <font class="keywordflow">return</font> text;
00261         }
00262         <font class="keywordflow">case</font> Group:
00263         <font class="keywordflow">default</font>:
00264             <font class="keywordflow">return</font> QString::null;
00265     }
00266 }
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:46 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
