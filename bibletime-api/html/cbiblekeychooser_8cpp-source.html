<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cbiblekeychooser.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cbiblekeychooser.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cbiblekeychooser.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Wed Sep 20 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "cbiblekeychooser.h"</font>
00020 <font class="preprocessor">#include "ckeychooserwidget.h"</font>
00021 <font class="preprocessor">#include "cfx_btn.h"</font>
00022 <font class="preprocessor">#include "../../whatsthisdef.h"</font>
00023 <font class="preprocessor">#include "../../tooltipdef.h"</font>
00024 <font class="preprocessor">#include "../../backend/cswordversekey.h"</font>
00025 <font class="preprocessor">#include "../../backend/cswordbiblemoduleinfo.h"</font>
00026 <font class="preprocessor">#include "../../backend/cswordmoduleinfo.h"</font>
00027 
00028 <font class="comment">//Qt includes</font>
00029 <font class="preprocessor">#include &lt;qcombobox.h&gt;</font>
00030 <font class="preprocessor">#include &lt;qlistbox.h&gt;</font>
00031 <font class="preprocessor">#include &lt;qlayout.h&gt;</font>
00032 
00033 <font class="comment">//KDE includes</font>
00034 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00035 
<a name="l00036"></a><a class="code" href="class_c_bible_key_chooser.html#a0">00036</a> <a class="code" href="class_c_bible_key_chooser.html#a0">CBibleKeyChooser::CBibleKeyChooser</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module, <a class="code" href="class_c_sword_key.html">CSwordKey</a> *key, QWidget *parent, <font class="keyword">const</font> <font class="keywordtype">char</font> *name )
00037     : <a class="code" href="class_c_key_chooser.html">CKeyChooser</a>(module, key, parent, name), m_info(0), m_key(0), w_book(0), w_chapter(0), w_verse(0)
00038 {
00039     <font class="keywordflow">if</font> (module &amp;&amp; (module-&gt;<a class="code" href="class_c_sword_module_info.html#a15">type</a>() == CSwordModuleInfo::Bible || module-&gt;<a class="code" href="class_c_sword_module_info.html#a15">type</a>() == CSwordModuleInfo::Commentary) ) {
00040         m_info = dynamic_cast&lt;CSwordBibleModuleInfo*&gt;(module);
00041         m_key  = dynamic_cast&lt;CSwordVerseKey*&gt;(key);
00042     }
00043     <font class="keywordflow">else</font> {
00044         qWarning(<font class="stringliteral">"CBibleKeyChooser: module is not a Bible or commentary!"</font>);
00045         <font class="keywordflow">return</font>;
00046     }
00047     QHBoxLayout* layout = <font class="keyword">new</font> QHBoxLayout(<font class="keyword">this</font>);
00048     layout-&gt;setResizeMode(QLayout::Fixed);
00049         
00050     w_book = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a5">books</a>(),<font class="keyword">false</font>,<font class="keyword">this</font>); 
00051     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_BOOK_COMBO, TT_PRESENTER_NEXT_BOOK, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_BOOK);
00052     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_BOOK_COMBO, WT_PRESENTER_NEXT_BOOK, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_BOOK);
00053     
00054     w_chapter = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>(1),<font class="keyword">true</font>,<font class="keyword">this</font>);      
00055     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_CHAPTER_COMBO, TT_PRESENTER_NEXT_CHAPTER, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_CHAPTER);   
00056     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_CHAPTER_COMBO, WT_PRESENTER_NEXT_CHAPTER, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_CHAPTER);      
00057     
00058     w_verse = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(1,1),<font class="keyword">true</font>,<font class="keyword">this</font>);
00059     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_VERSE_COMBO, TT_PRESENTER_NEXT_VERSE, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_VERSE);
00060     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_VERSE_COMBO, WT_PRESENTER_NEXT_VERSE, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_VERSE);
00061                         
00062     QWidget::setTabOrder(w_book, w_chapter);
00063     QWidget::setTabOrder(w_chapter, w_verse);
00064     QWidget::setTabOrder(w_verse, 0);   
00065         
00066     layout-&gt;addWidget(w_book);
00067     layout-&gt;addWidget(w_chapter);
00068     layout-&gt;addWidget(w_verse); 
00069 
00070     <font class="comment">/*Book connections*/</font>
00071     connect(w_book,SIGNAL(changed(<font class="keywordtype">int</font>))       ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g5">bookChanged</a>(<font class="keywordtype">int</font>)));
00072     connect(w_book,SIGNAL(focusOut(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i0">bookFocusOut</a>(<font class="keywordtype">int</font>)));    
00073     
00074     <font class="comment">/*Chapter Connections*/</font>
00075     connect(w_chapter,SIGNAL(changed(<font class="keywordtype">int</font>))    ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g6">chapterChanged</a>(<font class="keywordtype">int</font>)));
00076     connect(w_chapter,SIGNAL(next_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g9">chapterNextRequested</a>()));
00077     connect(w_chapter,SIGNAL(prev_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g8">chapterPrevRequested</a>()));
00078     connect(w_chapter,SIGNAL(focusOut(<font class="keywordtype">int</font>))   ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i1">chapterFocusOut</a>(<font class="keywordtype">int</font>)));
00079     
00080     
00081     <font class="comment">/*Verse Connections*/</font>
00082     connect(w_verse,SIGNAL(changed(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g7">verseChanged</a>(<font class="keywordtype">int</font>)));
00083     connect(w_verse,SIGNAL(next_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g11">verseNextRequested</a>()));
00084     connect(w_verse,SIGNAL(prev_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g10">versePrevRequested</a>()));
00085     connect(w_verse,SIGNAL(focusOut(<font class="keywordtype">int</font>))     ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i2">verseFocusOut</a>(<font class="keywordtype">int</font>)));   
00086 }
00087 
<a name="l00088"></a><a class="code" href="class_c_bible_key_chooser.html#g0">00088</a> <a class="code" href="class_c_sword_key.html">CSwordKey</a>* <font class="keyword">const</font> <a class="code" href="class_c_bible_key_chooser.html#g0">CBibleKeyChooser::key</a>(){
00089     <font class="keywordflow">if</font> (m_key) {
00090         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>(w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()); 
00091         m_key-&gt;Chapter(w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());           
00092         m_key-&gt;Verse(w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());           
00093     }
00094     <font class="keywordflow">return</font> m_key;
00095 }
00096 
<a name="l00097"></a><a class="code" href="class_c_bible_key_chooser.html#g1">00097</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g1">CBibleKeyChooser::setKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00098     qWarning(<font class="stringliteral">"CBibleKeyChooser::setKey(CKey* key)"</font>);
00099     <font class="keywordflow">if</font> ( !(m_key = dynamic_cast&lt;CSwordVerseKey*&gt;(key)) )
00100         <font class="keywordflow">return</font>;
00101         
00102     <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> bookIndex = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() );
00103     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = m_key-&gt;Chapter();
00104     <font class="keyword">const</font> <font class="keywordtype">int</font> verse = m_key-&gt;Verse();
00105 
00106     qWarning(<font class="stringliteral">"%i %i:%i"</font>, bookIndex, chapter, verse);
00107     
00108     <font class="comment">//reset the keychooser parts only if we found a valid book</font>
00109     <font class="keyword">const</font> <font class="keywordtype">int</font> count = w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;count();
00110     <font class="keyword">const</font> QString desiredBook = m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>();
00111     <font class="keywordtype">bool</font> bookIsValid = <font class="keyword">false</font>;
00112     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; count; ++i) {
00113         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;text(i) == desiredBook) {
00114             bookIsValid = <font class="keyword">true</font>;
00115             <font class="keywordflow">break</font>;
00116         }
00117     }
00118     
00119     <font class="keywordflow">if</font> (bookIsValid) {  <font class="comment">//we have a valid book</font>
00120         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() != m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()) <font class="comment">//necessary?</font>
00121             w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a9">setItem</a>( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() );
00122         
00123         w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>(bookIndex), chapter-1, <font class="keyword">false</font>);
00124         w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a6">adjustSize</a>();
00125         
00126         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(bookIndex, chapter), verse-1, <font class="keyword">false</font>);
00127         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a6">adjustSize</a>();
00128     
00129         emit <a class="code" href="class_c_key_chooser.html#j0">keyChanged</a>(m_key);                 
00130     }
00131     <font class="keywordflow">else</font> {
00132         qWarning(<font class="stringliteral">"CBibleKeyChooser::setKey: book %s is invalid!"</font>, m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>().latin1());
00133         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;setCurrentItem(0);             
00134         m_key-&gt;Verse(w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());       
00135     }
00136 }
00137 
<a name="l00139"></a><a class="code" href="class_c_bible_key_chooser.html#g9">00139</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g9">CBibleKeyChooser::chapterNextRequested</a>(<font class="keywordtype">void</font>){
00140     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00141         <font class="keywordflow">return</font>;
00142     
00143     setUpdatesEnabled(<font class="keyword">false</font>);   
00144     <font class="keywordflow">if</font> (m_key)
00145         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>()); 
00146     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">next</a>(CSwordVerseKey::UseChapter))    
00147         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00148     setUpdatesEnabled(<font class="keyword">true</font>);    
00149 }
00150 
<a name="l00152"></a><a class="code" href="class_c_bible_key_chooser.html#g8">00152</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g8">CBibleKeyChooser::chapterPrevRequested</a>(<font class="keywordtype">void</font>){
00153     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00154         <font class="keywordflow">return</font>;
00155         
00156     setUpdatesEnabled(<font class="keyword">false</font>);       
00157     <font class="keywordflow">if</font> (m_key)
00158         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>());
00159     
00160     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">previous</a>(CSwordVerseKey::UseChapter))
00161         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00162     setUpdatesEnabled(<font class="keyword">true</font>);
00163 }
00164 
<a name="l00166"></a><a class="code" href="class_c_bible_key_chooser.html#g11">00166</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g11">CBibleKeyChooser::verseNextRequested</a>(<font class="keywordtype">void</font>){
00167     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00168         <font class="keywordflow">return</font>;
00169     
00170     setUpdatesEnabled(<font class="keyword">false</font>);
00171     <font class="keywordflow">if</font> (m_key)
00172         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>());
00173 
00174     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">next</a>(CSwordVerseKey::UseVerse))  
00175         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00176     setUpdatesEnabled(<font class="keyword">true</font>);        
00177 }
00178 
<a name="l00180"></a><a class="code" href="class_c_bible_key_chooser.html#g10">00180</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g10">CBibleKeyChooser::versePrevRequested</a>(<font class="keywordtype">void</font>){
00181     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00182         <font class="keywordflow">return</font>;
00183     
00184     setUpdatesEnabled(<font class="keyword">false</font>);   
00185     <font class="keywordflow">if</font> (m_key)
00186         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>());
00187     
00188     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">previous</a>(CSwordVerseKey::UseVerse))
00189         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00190     setUpdatesEnabled(<font class="keyword">true</font>);    
00191 }
00192 
<a name="l00193"></a><a class="code" href="class_c_bible_key_chooser.html#g5">00193</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g5">CBibleKeyChooser::bookChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00194 <font class="comment">//  qDebug("CBibleKeyChooser::bookChanged(int /*i*/)");</font>
00195     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00196         <font class="keywordflow">return</font>;
00197     setUpdatesEnabled(<font class="keyword">false</font>);   
00198     <font class="keywordflow">if</font> (m_key)
00199         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>());
00200     
00201     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() != w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()) {
00202         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00203         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00204     }   
00205     setUpdatesEnabled(<font class="keyword">true</font>);        
00206 }
00207 
<a name="l00208"></a><a class="code" href="class_c_bible_key_chooser.html#g6">00208</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g6">CBibleKeyChooser::chapterChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00209 <font class="comment">//  qDebug("CBibleKeyChooser::chapterChanged(int /*i*/)");</font>
00210     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00211         <font class="keywordflow">return</font>;
00212     
00213     setUpdatesEnabled(<font class="keyword">false</font>);       
00214     <font class="keywordflow">if</font> (m_key)
00215         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a5">key</a>());
00216 <font class="comment">//  if (m_key)</font>
00217 <font class="comment">//      emit beforeKeyChange(m_key-&gt;key());</font>
00218     
00219     <font class="keywordflow">if</font> (m_key-&gt;Chapter() != w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) { 
00220         m_key-&gt;Chapter( w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00221         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00222     }
00223     
00224     setUpdatesEnabled(<font class="keyword">true</font>);        
00225 }
00226 
<a name="l00227"></a><a class="code" href="class_c_bible_key_chooser.html#g7">00227</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g7">CBibleKeyChooser::verseChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00228 <font class="comment">//  qDebug("CBibleKeyChooser::verseChanged(int /*i*/)");</font>
00229     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00230         <font class="keywordflow">return</font>; 
00231     
00232     setUpdatesEnabled(<font class="keyword">false</font>);           
00233 
00234     <font class="keywordflow">if</font> (m_key-&gt;Verse() != w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) {     
00235         m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() ); 
00236         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00237     }
00238     
00239     setUpdatesEnabled(<font class="keyword">true</font>);    
00240 }
00241 
<a name="l00243"></a><a class="code" href="class_c_bible_key_chooser.html#g2">00243</a> QSize <a class="code" href="class_c_bible_key_chooser.html#g2">CBibleKeyChooser::sizeHint</a>(){
00244   <font class="keywordflow">return</font> QSize( w_book-&gt;sizeHint().width() + w_chapter-&gt;sizeHint().width() + w_verse-&gt;sizeHint().width(), w_book-&gt;sizeHint().height());
00245 }
00246 
<a name="l00248"></a><a class="code" href="class_c_bible_key_chooser.html#g4">00248</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g4">CBibleKeyChooser::refreshContent</a>() {
00249     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a5">books</a>(), w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentItem(), <font class="keyword">false</font>);
00250     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00251 }
00252 
<a name="l00254"></a><a class="code" href="class_c_bible_key_chooser.html#g3">00254</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g3">CBibleKeyChooser::setModule</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* module){
00255     <font class="keywordflow">if</font> (module != m_info &amp;&amp; module) {
00256         m_info = dynamic_cast&lt;CSwordBibleModuleInfo*&gt;(module);
00257         <a class="code" href="class_c_bible_key_chooser.html#g4">refreshContent</a>();
00258     }
00259 }
00260 
<a name="l00262"></a><a class="code" href="class_c_bible_key_chooser.html#i0">00262</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i0">CBibleKeyChooser::bookFocusOut</a>(<font class="keywordtype">int</font> index){
00263     qWarning(<font class="stringliteral">"CBibleKeyChooser::bookFocusOut(int index)"</font>);
00264     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00265         <font class="keywordflow">return</font>;
00266         
00267     setUpdatesEnabled(<font class="keyword">false</font>);
00268     
00269     m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00270     <font class="keyword">const</font> <font class="keywordtype">int</font> chapterCount = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()));
00271     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( chapterCount, m_key-&gt;Chapter()-1, <font class="keyword">false</font>);
00272             
00273     <font class="keyword">const</font> <font class="keywordtype">int</font> verseCount = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()),m_key-&gt;Chapter());
00274     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(verseCount,m_key-&gt;Verse()-1,<font class="keyword">false</font>);
00275 
00276     setUpdatesEnabled(<font class="keyword">true</font>);
00277 }
00278 
<a name="l00280"></a><a class="code" href="class_c_bible_key_chooser.html#i1">00280</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i1">CBibleKeyChooser::chapterFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00281     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt();
00282     m_key-&gt;Chapter( chapter );
00283     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()),chapter), 0, <font class="keyword">false</font>);
00284 }
00285 
<a name="l00287"></a><a class="code" href="class_c_bible_key_chooser.html#i2">00287</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i2">CBibleKeyChooser::verseFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00288     m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00289     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00290 }
00291 
<a name="l00293"></a><a class="code" href="class_c_bible_key_chooser.html#g12">00293</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g12">CBibleKeyChooser::updateKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00294 }
</pre></div><hr><address><small>Generated on Sun Mar 10 21:52:40 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
