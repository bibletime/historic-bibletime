<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cbiblekeychooser.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cbiblekeychooser.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cbiblekeychooser.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Wed Sep 20 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "cbiblekeychooser.h"</font>
00020 <font class="preprocessor">#include "ckeychooserwidget.h"</font>
00021 <font class="preprocessor">#include "cfx_btn.h"</font>
00022 <font class="preprocessor">#include "whatsthisdef.h"</font>
00023 <font class="preprocessor">#include "tooltipdef.h"</font>
00024 <font class="preprocessor">#include "backend/cswordversekey.h"</font>
00025 <font class="preprocessor">#include "backend/cswordbiblemoduleinfo.h"</font>
00026 <font class="preprocessor">#include "backend/cswordmoduleinfo.h"</font>
00027 
00028 <font class="comment">//Qt includes</font>
00029 <font class="preprocessor">#include &lt;qcombobox.h&gt;</font>
00030 <font class="preprocessor">#include &lt;qlistbox.h&gt;</font>
00031 <font class="preprocessor">#include &lt;qlayout.h&gt;</font>
00032 
00033 <font class="comment">//KDE includes</font>
00034 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00035 
<a name="l00036"></a><a class="code" href="class_c_bible_key_chooser.html#a0">00036</a> <a class="code" href="class_c_bible_key_chooser.html#a0">CBibleKeyChooser::CBibleKeyChooser</a>(ListCSwordModuleInfo modules, <a class="code" href="class_c_sword_key.html">CSwordKey</a> *key, QWidget *parent, <font class="keyword">const</font> <font class="keywordtype">char</font> *name )
00037     : <a class="code" href="class_c_key_chooser.html">CKeyChooser</a>(modules, key, parent, name), m_key(dynamic_cast&lt;<a class="code" href="class_c_sword_verse_key.html">CSwordVerseKey</a>*&gt;(key))
00038 {
00039     <a class="code" href="class_c_bible_key_chooser.html#g3">setModules</a>(modules, <font class="keyword">false</font>);
00040     <font class="keywordflow">if</font> (!m_modules.count()) {
00041         qWarning(<font class="stringliteral">"CBibleKeyChooser: module is not a Bible or commentary!"</font>);
00042     m_key = 0;
00043         <font class="keywordflow">return</font>;
00044     }
00045 
00046     QHBoxLayout* layout = <font class="keyword">new</font> QHBoxLayout(<font class="keyword">this</font>);
00047     layout-&gt;setResizeMode(QLayout::Minimum);
00048         
00049     w_book = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>(m_modules.first()-&gt;books(),<font class="keyword">false</font>,<font class="keyword">this</font>);  
00050     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_BOOK_COMBO, TT_PRESENTER_NEXT_BOOK, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_BOOK);
00051     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_BOOK_COMBO, WT_PRESENTER_NEXT_BOOK, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_BOOK);
00052     
00053 <font class="comment">//  qWarning("Biblekey chooser: has %i chapters",m_info-&gt;chapterCount(w_book-&gt;comboBox()-&gt;currentText()));</font>
00054   w_chapter = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_modules.first()-&gt;chapterCount(w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()),<font class="keyword">true</font>,<font class="keyword">this</font>);     
00055     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_CHAPTER_COMBO, TT_PRESENTER_NEXT_CHAPTER, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_CHAPTER);   
00056     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_CHAPTER_COMBO, WT_PRESENTER_NEXT_CHAPTER, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_CHAPTER);      
00057     
00058 <font class="comment">//  qWarning("Biblekey chooser: has %i verses",m_info-&gt;verseCount(w_book-&gt;comboBox()-&gt;currentText(),1));</font>
00059   w_verse = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_modules.first()-&gt;verseCount(w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText(),1),<font class="keyword">true</font>,<font class="keyword">this</font>);
00060     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_VERSE_COMBO, TT_PRESENTER_NEXT_VERSE, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_VERSE);
00061     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_VERSE_COMBO, WT_PRESENTER_NEXT_VERSE, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_VERSE);
00062                         
00063     QWidget::setTabOrder(w_book, w_chapter);
00064     QWidget::setTabOrder(w_chapter, w_verse);
00065     QWidget::setTabOrder(w_verse, 0);   
00066         
00067     layout-&gt;addWidget(w_book);
00068     layout-&gt;addWidget(w_chapter);
00069     layout-&gt;addWidget(w_verse); 
00070 
00071     <font class="comment">/*Book connections*/</font>
00072     connect(w_book,SIGNAL(changed(<font class="keywordtype">int</font>))       ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g5">bookChanged</a>(<font class="keywordtype">int</font>)));
00073     connect(w_book,SIGNAL(focusOut(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i0">bookFocusOut</a>(<font class="keywordtype">int</font>)));    
00074     
00075     <font class="comment">/*Chapter Connections*/</font>
00076     connect(w_chapter,SIGNAL(changed(<font class="keywordtype">int</font>))    ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g6">chapterChanged</a>(<font class="keywordtype">int</font>)));
00077     connect(w_chapter,SIGNAL(next_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g9">chapterNextRequested</a>()));
00078     connect(w_chapter,SIGNAL(prev_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g8">chapterPrevRequested</a>()));
00079     connect(w_chapter,SIGNAL(focusOut(<font class="keywordtype">int</font>))   ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i1">chapterFocusOut</a>(<font class="keywordtype">int</font>)));
00080     
00081     
00082     <font class="comment">/*Verse Connections*/</font>
00083     connect(w_verse,SIGNAL(changed(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g7">verseChanged</a>(<font class="keywordtype">int</font>)));
00084     connect(w_verse,SIGNAL(next_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g11">verseNextRequested</a>()));
00085     connect(w_verse,SIGNAL(prev_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g10">versePrevRequested</a>()));
00086     connect(w_verse,SIGNAL(focusOut(<font class="keywordtype">int</font>))     ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i2">verseFocusOut</a>(<font class="keywordtype">int</font>)));
00087 }
00088 
<a name="l00089"></a><a class="code" href="class_c_bible_key_chooser.html#g0">00089</a> <a class="code" href="class_c_sword_key.html">CSwordKey</a>* <font class="keyword">const</font> <a class="code" href="class_c_bible_key_chooser.html#g0">CBibleKeyChooser::key</a>(){
00090     <font class="keywordflow">if</font> (m_key) {
00091     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter =  w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt();
00092     <font class="keyword">const</font> <font class="keywordtype">int</font> verse = w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt();
00093         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>(w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()); 
00094         m_key-&gt;Chapter(chapter &lt; 0 ? 0 : chapter);          
00095         m_key-&gt;Verse(verse &lt; 0 ? 0 : verse);            
00096     }
00097     <font class="keywordflow">return</font> m_key;
00098 }
00099 
<a name="l00100"></a><a class="code" href="class_c_bible_key_chooser.html#g1">00100</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g1">CBibleKeyChooser::setKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00101     qWarning(<font class="stringliteral">"CBibleKeyChooser::setKey(CSwordKey* key)"</font>);
00102     <font class="keywordflow">if</font> ( !(m_key = dynamic_cast&lt;CSwordVerseKey*&gt;(key)) )
00103         <font class="keywordflow">return</font>;
00104         
00105     <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> bookIndex = m_modules.first()-&gt;bookNumber( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() );
00106     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = m_key-&gt;Chapter();
00107     <font class="keyword">const</font> <font class="keywordtype">int</font> verse = m_key-&gt;Verse();
00108 
00109 <font class="comment">//  qWarning("setkey: %s: %i %i:%i", m_key-&gt;book().latin1(), bookIndex, chapter, verse);</font>
00110 
00111     <font class="comment">//reset the keychooser parts only if we found a valid book</font>
00112     <font class="keyword">const</font> <font class="keywordtype">int</font> count = w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;count();
00113     <font class="keyword">const</font> QString desiredBook = m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>();
00114     <font class="keywordtype">bool</font> bookIsValid = <font class="keyword">false</font>;
00115     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; count; ++i) {
00116         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;text(i) == desiredBook) {
00117             bookIsValid = <font class="keyword">true</font>;
00118             <font class="keywordflow">break</font>;
00119         }
00120     }
00121     
00122     <font class="keywordflow">if</font> (bookIsValid) {  <font class="comment">//we have a valid book</font>
00123         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() != m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()) <font class="comment">//necessary?</font>
00124             w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a9">setItem</a>( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() );
00125 
00126         w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_modules.first()-&gt;chapterCount(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()), chapter-1, <font class="keyword">false</font>);
00127         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_modules.first()-&gt;verseCount(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>(), chapter), verse-1, <font class="keyword">false</font>);
00128         
00129     qWarning(<font class="stringliteral">"key changed: %s"</font>, m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>().latin1());
00130     emit <a class="code" href="class_c_key_chooser.html#j0">keyChanged</a>(m_key);                 
00131     }
00132     <font class="keywordflow">else</font> {
00133 <font class="comment">//      qWarning("CBibleKeyChooser::setKey: book %s is invalid!", m_key-&gt;book().latin1());</font>
00134     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;setCurrentItem(0);               
00135         m_key-&gt;Chapter(1);      
00136 
00137     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;setCurrentItem(0);             
00138         m_key-&gt;Verse(1);        
00139     }
00140 }
00141 
<a name="l00143"></a><a class="code" href="class_c_bible_key_chooser.html#g9">00143</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g9">CBibleKeyChooser::chapterNextRequested</a>(<font class="keywordtype">void</font>){
00144     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00145         <font class="keywordflow">return</font>;
00146     
00147     setUpdatesEnabled(<font class="keyword">false</font>);   
00148     <font class="keywordflow">if</font> (m_key)
00149         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>()); 
00150     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">next</a>(CSwordVerseKey::UseChapter))    
00151         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00152     setUpdatesEnabled(<font class="keyword">true</font>);    
00153 }
00154 
<a name="l00156"></a><a class="code" href="class_c_bible_key_chooser.html#g8">00156</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g8">CBibleKeyChooser::chapterPrevRequested</a>(<font class="keywordtype">void</font>){
00157     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00158         <font class="keywordflow">return</font>;
00159         
00160     setUpdatesEnabled(<font class="keyword">false</font>);       
00161     <font class="keywordflow">if</font> (m_key)
00162         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00163     
00164     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">previous</a>(CSwordVerseKey::UseChapter))
00165         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00166     setUpdatesEnabled(<font class="keyword">true</font>);
00167 }
00168 
<a name="l00170"></a><a class="code" href="class_c_bible_key_chooser.html#g11">00170</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g11">CBibleKeyChooser::verseNextRequested</a>(<font class="keywordtype">void</font>){
00171     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00172         <font class="keywordflow">return</font>;
00173     
00174     setUpdatesEnabled(<font class="keyword">false</font>);
00175     <font class="keywordflow">if</font> (m_key)
00176         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00177 
00178     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">next</a>(CSwordVerseKey::UseVerse))  
00179         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00180     setUpdatesEnabled(<font class="keyword">true</font>);        
00181 }
00182 
<a name="l00184"></a><a class="code" href="class_c_bible_key_chooser.html#g10">00184</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g10">CBibleKeyChooser::versePrevRequested</a>(<font class="keywordtype">void</font>){
00185     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00186         <font class="keywordflow">return</font>;
00187     
00188     setUpdatesEnabled(<font class="keyword">false</font>);   
00189     <font class="keywordflow">if</font> (m_key)
00190         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00191     
00192     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">previous</a>(CSwordVerseKey::UseVerse))
00193         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00194     setUpdatesEnabled(<font class="keyword">true</font>);    
00195 }
00196 
<a name="l00197"></a><a class="code" href="class_c_bible_key_chooser.html#g5">00197</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g5">CBibleKeyChooser::bookChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00198     qWarning(<font class="stringliteral">"CBibleKeyChooser::bookChanged(int /*i*/)"</font>);
00199     Q_ASSERT(m_key);
00200 
00201     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00202         <font class="keywordflow">return</font>;
00203 
00204     setUpdatesEnabled(<font class="keyword">false</font>);   
00205     <font class="keywordflow">if</font> (m_key)
00206         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00207     
00208     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>() != w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()) {
00209         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00210         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00211     }   
00212     setUpdatesEnabled(<font class="keyword">true</font>);        
00213 }
00214 
<a name="l00215"></a><a class="code" href="class_c_bible_key_chooser.html#g6">00215</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g6">CBibleKeyChooser::chapterChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00216     qWarning(<font class="stringliteral">"CBibleKeyChooser::chapterChanged(int /*i*/)"</font>);
00217     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00218         <font class="keywordflow">return</font>;
00219     
00220     setUpdatesEnabled(<font class="keyword">false</font>);       
00221     <font class="keywordflow">if</font> (m_key)
00222         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00223 <font class="comment">//  if (m_key)</font>
00224 <font class="comment">//      emit beforeKeyChange(m_key-&gt;key());</font>
00225     
00226     <font class="keywordflow">if</font> (m_key-&gt;Chapter() != w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) { 
00227         m_key-&gt;Chapter( w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00228         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00229     }
00230     
00231     setUpdatesEnabled(<font class="keyword">true</font>);        
00232 }
00233 
<a name="l00234"></a><a class="code" href="class_c_bible_key_chooser.html#g7">00234</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g7">CBibleKeyChooser::verseChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00235 <font class="comment">//  qDebug("CBibleKeyChooser::verseChanged(int /*i*/)");</font>
00236     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00237         <font class="keywordflow">return</font>; 
00238     
00239     setUpdatesEnabled(<font class="keyword">false</font>);           
00240 
00241     <font class="keywordflow">if</font> (m_key-&gt;Verse() != w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) {     
00242         m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() ); 
00243         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00244     }
00245     
00246     setUpdatesEnabled(<font class="keyword">true</font>);    
00247 }
00248 
<a name="l00250"></a><a class="code" href="class_c_bible_key_chooser.html#g2">00250</a> QSize <a class="code" href="class_c_bible_key_chooser.html#g2">CBibleKeyChooser::sizeHint</a>(){
00251   <font class="keywordflow">return</font> QSize( w_book-&gt;sizeHint().width() + w_chapter-&gt;sizeHint().width() + w_verse-&gt;sizeHint().width(), w_book-&gt;sizeHint().height());
00252 }
00253 
<a name="l00255"></a><a class="code" href="class_c_bible_key_chooser.html#g4">00255</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g4">CBibleKeyChooser::refreshContent</a>() {
00256 
00257 
00258     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( m_modules.first()-&gt;books(), w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentItem(), <font class="keyword">false</font>);
00259     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00260 }
00261 
<a name="l00263"></a><a class="code" href="class_c_bible_key_chooser.html#g3">00263</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g3">CBibleKeyChooser::setModules</a>(ListCSwordModuleInfo modules, <font class="keyword">const</font> <font class="keywordtype">bool</font> refresh){
00264   m_modules.clear();
00265   <font class="keywordflow">for</font> (modules.first(); modules.current(); modules.next()) {
00266     <font class="keywordflow">if</font> (modules.current()-&gt;type() == CSwordModuleInfo::Bible || modules.current()-&gt;type() == CSwordModuleInfo::Commentary) {
00267       <font class="keywordflow">if</font> (<a class="code" href="class_c_sword_bible_module_info.html">CSwordBibleModuleInfo</a>* bible = dynamic_cast&lt;CSwordBibleModuleInfo*&gt;(modules.current())) {
00268         m_modules.append(bible);
00269       }
00270     }
00271   }
00272 
00273   <font class="keywordflow">if</font> (refresh)
00274     <a class="code" href="class_c_bible_key_chooser.html#g4">refreshContent</a>();
00275 }
00276 
<a name="l00278"></a><a class="code" href="class_c_bible_key_chooser.html#i0">00278</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i0">CBibleKeyChooser::bookFocusOut</a>(<font class="keywordtype">int</font> index){
00279     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00280         <font class="keywordflow">return</font>;
00281         
00282     setUpdatesEnabled(<font class="keyword">false</font>);
00283     
00284     m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00285     <font class="keyword">const</font> <font class="keywordtype">int</font> chapterCount = m_modules.first()-&gt;chapterCount( m_modules.first()-&gt;bookNumber(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()));
00286     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( chapterCount, m_key-&gt;Chapter()-1, <font class="keyword">false</font>);
00287             
00288     <font class="keyword">const</font> <font class="keywordtype">int</font> verseCount = m_modules.first()-&gt;verseCount(m_modules.first()-&gt;bookNumber(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()),m_key-&gt;Chapter());
00289     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(verseCount,m_key-&gt;Verse()-1,<font class="keyword">false</font>);
00290 
00291     setUpdatesEnabled(<font class="keyword">true</font>);
00292 }
00293 
<a name="l00295"></a><a class="code" href="class_c_bible_key_chooser.html#i1">00295</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i1">CBibleKeyChooser::chapterFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00296     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt();
00297     m_key-&gt;Chapter( chapter );
00298     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_modules.first()-&gt;verseCount(m_modules.first()-&gt;bookNumber(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a9">book</a>()),chapter), 0, <font class="keyword">false</font>);
00299 }
00300 
<a name="l00302"></a><a class="code" href="class_c_bible_key_chooser.html#i2">00302</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i2">CBibleKeyChooser::verseFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00303     m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00304     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00305 }
00306 
<a name="l00308"></a><a class="code" href="class_c_bible_key_chooser.html#g12">00308</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g12">CBibleKeyChooser::updateKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00309 }
</pre></div><hr><address align="right"><small>Generated on Tue Jul 16 13:53:08 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
