<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cbiblekeychooser.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cbiblekeychooser.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cbiblekeychooser.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Wed Sep 20 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "cbiblekeychooser.h"</font>
00020 <font class="preprocessor">#include "ckeychooserwidget.h"</font>
00021 <font class="preprocessor">#include "cfx_btn.h"</font>
00022 <font class="preprocessor">#include "../../whatsthisdef.h"</font>
00023 <font class="preprocessor">#include "../../tooltipdef.h"</font>
00024 <font class="preprocessor">#include "../../backend/cswordversekey.h"</font>
00025 <font class="preprocessor">#include "../../backend/cswordbiblemoduleinfo.h"</font>
00026 <font class="preprocessor">#include "../../backend/cswordmoduleinfo.h"</font>
00027 
00028 <font class="comment">//Qt includes</font>
00029 <font class="preprocessor">#include &lt;qcombobox.h&gt;</font>
00030 <font class="preprocessor">#include &lt;qlistbox.h&gt;</font>
00031 <font class="preprocessor">#include &lt;qlayout.h&gt;</font>
00032 
00033 <font class="comment">//KDE includes</font>
00034 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00035 
<a name="l00036"></a><a class="code" href="class_c_bible_key_chooser.html#a0">00036</a> <a class="code" href="class_c_bible_key_chooser.html#a0">CBibleKeyChooser::CBibleKeyChooser</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *module, <a class="code" href="class_c_sword_key.html">CSwordKey</a> *key, QWidget *parent, <font class="keyword">const</font> <font class="keywordtype">char</font> *name )
00037     : <a class="code" href="class_c_key_chooser.html">CKeyChooser</a>(module, key, parent, name), m_info(0), m_key(0), w_book(0), w_chapter(0), w_verse(0)
00038 {
00039     <font class="keywordflow">if</font> (module &amp;&amp; (module-&gt;<a class="code" href="class_c_sword_module_info.html#a15">type</a>() == CSwordModuleInfo::Bible || module-&gt;<a class="code" href="class_c_sword_module_info.html#a15">type</a>() == CSwordModuleInfo::Commentary) ) {
00040         m_info = dynamic_cast&lt;CSwordBibleModuleInfo*&gt;(module);
00041         m_key  = dynamic_cast&lt;CSwordVerseKey*&gt;(key);
00042     }
00043     <font class="keywordflow">else</font> {
00044         qWarning(<font class="stringliteral">"CBibleKeyChooser: module is not a Bible or commentary!"</font>);
00045         <font class="keywordflow">return</font>;
00046     }
00047     QHBoxLayout* layout = <font class="keyword">new</font> QHBoxLayout(<font class="keyword">this</font>);
00048     layout-&gt;setResizeMode(QLayout::Fixed);
00049         
00050     w_book = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a5">books</a>(),<font class="keyword">false</font>,<font class="keyword">this</font>); 
00051     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_BOOK_COMBO, TT_PRESENTER_NEXT_BOOK, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_BOOK);
00052     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_BOOK_COMBO, WT_PRESENTER_NEXT_BOOK, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_BOOK);
00053     
00054     w_chapter = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>(1),<font class="keyword">true</font>,<font class="keyword">this</font>);      
00055     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_CHAPTER_COMBO, TT_PRESENTER_NEXT_CHAPTER, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_CHAPTER);   
00056     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_CHAPTER_COMBO, WT_PRESENTER_NEXT_CHAPTER, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_CHAPTER);      
00057     
00058     w_verse = <font class="keyword">new</font> <a class="code" href="class_c_key_chooser_widget.html">CKeyChooserWidget</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(1,1),<font class="keyword">true</font>,<font class="keyword">this</font>);
00059     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a8">setToolTips</a>(TT_PRESENTER_VERSE_COMBO, TT_PRESENTER_NEXT_VERSE, TT_PRESENTER_SCROLL_BUTTON, TT_PRESENTER_PREVIOUS_VERSE);
00060     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a7">setWhatsThis</a>(WT_PRESENTER_VERSE_COMBO, WT_PRESENTER_NEXT_VERSE, WT_PRESENTER_SCROLL_BUTTON, WT_PRESENTER_PREVIOUS_VERSE);
00061                         
00062     QWidget::setTabOrder(w_book, w_chapter);
00063     QWidget::setTabOrder(w_chapter, w_verse);
00064     QWidget::setTabOrder(w_verse, 0);   
00065         
00066     layout-&gt;addWidget(w_book);
00067     layout-&gt;addWidget(w_chapter);
00068     layout-&gt;addWidget(w_verse); 
00069 
00070     <font class="comment">/*Book connections*/</font>
00071     connect(w_book,SIGNAL(changed(<font class="keywordtype">int</font>))       ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g5">bookChanged</a>(<font class="keywordtype">int</font>)));
00072     connect(w_book,SIGNAL(focusOut(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i0">bookFocusOut</a>(<font class="keywordtype">int</font>)));    
00073     
00074     <font class="comment">/*Chapter Connections*/</font>
00075     connect(w_chapter,SIGNAL(changed(<font class="keywordtype">int</font>))    ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g6">chapterChanged</a>(<font class="keywordtype">int</font>)));
00076     connect(w_chapter,SIGNAL(next_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g9">chapterNextRequested</a>()));
00077     connect(w_chapter,SIGNAL(prev_requested()),SLOT(<a class="code" href="class_c_bible_key_chooser.html#g8">chapterPrevRequested</a>()));
00078     connect(w_chapter,SIGNAL(focusOut(<font class="keywordtype">int</font>))   ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i1">chapterFocusOut</a>(<font class="keywordtype">int</font>)));
00079     
00080     
00081     <font class="comment">/*Verse Connections*/</font>
00082     connect(w_verse,SIGNAL(changed(<font class="keywordtype">int</font>))      ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g7">verseChanged</a>(<font class="keywordtype">int</font>)));
00083     connect(w_verse,SIGNAL(next_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g11">verseNextRequested</a>()));
00084     connect(w_verse,SIGNAL(prev_requested())  ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#g10">versePrevRequested</a>()));
00085     connect(w_verse,SIGNAL(focusOut(<font class="keywordtype">int</font>))     ,SLOT(<a class="code" href="class_c_bible_key_chooser.html#i2">verseFocusOut</a>(<font class="keywordtype">int</font>)));   
00086 }
00087 
<a name="l00088"></a><a class="code" href="class_c_bible_key_chooser.html#g0">00088</a> <a class="code" href="class_c_sword_key.html">CSwordKey</a>* <font class="keyword">const</font> <a class="code" href="class_c_bible_key_chooser.html#g0">CBibleKeyChooser::key</a>(){
00089     <font class="keywordflow">if</font> (m_key) {
00090         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>(w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()); 
00091         m_key-&gt;Chapter(w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());           
00092         m_key-&gt;Verse(w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());           
00093     }
00094     <font class="keywordflow">return</font> m_key;
00095 }
00096 
<a name="l00097"></a><a class="code" href="class_c_bible_key_chooser.html#g1">00097</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g1">CBibleKeyChooser::setKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00098     qWarning(<font class="stringliteral">"CBibleKeyChooser::setKey(CSwordKey* key)"</font>);
00099     <font class="keywordflow">if</font> ( !(m_key = dynamic_cast&lt;CSwordVerseKey*&gt;(key)) )
00100         <font class="keywordflow">return</font>;
00101         
00102     <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> bookIndex = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>() );
00103     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = m_key-&gt;Chapter();
00104     <font class="keyword">const</font> <font class="keywordtype">int</font> verse = m_key-&gt;Verse();
00105 
00106     <font class="comment">//reset the keychooser parts only if we found a valid book</font>
00107     <font class="keyword">const</font> <font class="keywordtype">int</font> count = w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;count();
00108     <font class="keyword">const</font> QString desiredBook = m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>();
00109     <font class="keywordtype">bool</font> bookIsValid = <font class="keyword">false</font>;
00110     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; count; ++i) {
00111         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;text(i) == desiredBook) {
00112             bookIsValid = <font class="keyword">true</font>;
00113             <font class="keywordflow">break</font>;
00114         }
00115     }
00116     
00117     <font class="keywordflow">if</font> (bookIsValid) {  <font class="comment">//we have a valid book</font>
00118         <font class="keywordflow">if</font> (w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() != m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>()) <font class="comment">//necessary?</font>
00119             w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a9">setItem</a>( m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>() );
00120         
00121         w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>(bookIndex), chapter-1, <font class="keyword">false</font>);
00122         w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a6">adjustSize</a>();
00123         
00124         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(bookIndex, chapter), verse-1, <font class="keyword">false</font>);
00125         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a6">adjustSize</a>();
00126     
00127         emit <a class="code" href="class_c_key_chooser.html#j0">keyChanged</a>(m_key);                 
00128     }
00129     <font class="keywordflow">else</font> {
00130         qWarning(<font class="stringliteral">"CBibleKeyChooser::setKey: book %s is invalid!"</font>, m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>().latin1());
00131         w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;setCurrentItem(0);             
00132         m_key-&gt;Verse(w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt());       
00133     }
00134 }
00135 
<a name="l00137"></a><a class="code" href="class_c_bible_key_chooser.html#g9">00137</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g9">CBibleKeyChooser::chapterNextRequested</a>(<font class="keywordtype">void</font>){
00138     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00139         <font class="keywordflow">return</font>;
00140     
00141     setUpdatesEnabled(<font class="keyword">false</font>);   
00142     <font class="keywordflow">if</font> (m_key)
00143         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>()); 
00144     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a6">next</a>(CSwordVerseKey::UseChapter))    
00145         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00146     setUpdatesEnabled(<font class="keyword">true</font>);    
00147 }
00148 
<a name="l00150"></a><a class="code" href="class_c_bible_key_chooser.html#g8">00150</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g8">CBibleKeyChooser::chapterPrevRequested</a>(<font class="keywordtype">void</font>){
00151     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00152         <font class="keywordflow">return</font>;
00153         
00154     setUpdatesEnabled(<font class="keyword">false</font>);       
00155     <font class="keywordflow">if</font> (m_key)
00156         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00157     
00158     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">previous</a>(CSwordVerseKey::UseChapter))
00159         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00160     setUpdatesEnabled(<font class="keyword">true</font>);
00161 }
00162 
<a name="l00164"></a><a class="code" href="class_c_bible_key_chooser.html#g11">00164</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g11">CBibleKeyChooser::verseNextRequested</a>(<font class="keywordtype">void</font>){
00165     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00166         <font class="keywordflow">return</font>;
00167     
00168     setUpdatesEnabled(<font class="keyword">false</font>);
00169     <font class="keywordflow">if</font> (m_key)
00170         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00171 
00172     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a6">next</a>(CSwordVerseKey::UseVerse))  
00173         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00174     setUpdatesEnabled(<font class="keyword">true</font>);        
00175 }
00176 
<a name="l00178"></a><a class="code" href="class_c_bible_key_chooser.html#g10">00178</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g10">CBibleKeyChooser::versePrevRequested</a>(<font class="keywordtype">void</font>){
00179     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00180         <font class="keywordflow">return</font>;
00181     
00182     setUpdatesEnabled(<font class="keyword">false</font>);   
00183     <font class="keywordflow">if</font> (m_key)
00184         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00185     
00186     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a7">previous</a>(CSwordVerseKey::UseVerse))
00187         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00188     setUpdatesEnabled(<font class="keyword">true</font>);    
00189 }
00190 
<a name="l00191"></a><a class="code" href="class_c_bible_key_chooser.html#g5">00191</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g5">CBibleKeyChooser::bookChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00192     qWarning(<font class="stringliteral">"CBibleKeyChooser::bookChanged(int /*i*/)"</font>);
00193     Q_ASSERT(m_key);
00194 
00195     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00196         <font class="keywordflow">return</font>;
00197 
00198     setUpdatesEnabled(<font class="keyword">false</font>);   
00199     <font class="keywordflow">if</font> (m_key)
00200         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00201     
00202     <font class="keywordflow">if</font> (m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>() != w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText()) {
00203         m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00204         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00205     }   
00206     setUpdatesEnabled(<font class="keyword">true</font>);        
00207 }
00208 
<a name="l00209"></a><a class="code" href="class_c_bible_key_chooser.html#g6">00209</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g6">CBibleKeyChooser::chapterChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00210     qWarning(<font class="stringliteral">"CBibleKeyChooser::chapterChanged(int /*i*/)"</font>);
00211     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00212         <font class="keywordflow">return</font>;
00213     
00214     setUpdatesEnabled(<font class="keyword">false</font>);       
00215     <font class="keywordflow">if</font> (m_key)
00216         emit <a class="code" href="class_c_key_chooser.html#j1">beforeKeyChange</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a4">key</a>());
00217 <font class="comment">//  if (m_key)</font>
00218 <font class="comment">//      emit beforeKeyChange(m_key-&gt;key());</font>
00219     
00220     <font class="keywordflow">if</font> (m_key-&gt;Chapter() != w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) { 
00221         m_key-&gt;Chapter( w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00222         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00223     }
00224     
00225     setUpdatesEnabled(<font class="keyword">true</font>);        
00226 }
00227 
<a name="l00228"></a><a class="code" href="class_c_bible_key_chooser.html#g7">00228</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g7">CBibleKeyChooser::verseChanged</a>(<font class="keywordtype">int</font> <font class="comment">/*i*/</font>){
00229 <font class="comment">//  qDebug("CBibleKeyChooser::verseChanged(int /*i*/)");</font>
00230     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00231         <font class="keywordflow">return</font>; 
00232     
00233     setUpdatesEnabled(<font class="keyword">false</font>);           
00234 
00235     <font class="keywordflow">if</font> (m_key-&gt;Verse() != w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt()) {     
00236         m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() ); 
00237         <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );
00238     }
00239     
00240     setUpdatesEnabled(<font class="keyword">true</font>);    
00241 }
00242 
<a name="l00244"></a><a class="code" href="class_c_bible_key_chooser.html#g2">00244</a> QSize <a class="code" href="class_c_bible_key_chooser.html#g2">CBibleKeyChooser::sizeHint</a>(){
00245   <font class="keywordflow">return</font> QSize( w_book-&gt;sizeHint().width() + w_chapter-&gt;sizeHint().width() + w_verse-&gt;sizeHint().width(), w_book-&gt;sizeHint().height());
00246 }
00247 
<a name="l00249"></a><a class="code" href="class_c_bible_key_chooser.html#g4">00249</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g4">CBibleKeyChooser::refreshContent</a>() {
00250     w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a5">books</a>(), w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentItem(), <font class="keyword">false</font>);
00251     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>(m_key);
00252 }
00253 
<a name="l00255"></a><a class="code" href="class_c_bible_key_chooser.html#g3">00255</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g3">CBibleKeyChooser::setModule</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* module){
00256     <font class="keywordflow">if</font> (module != m_info &amp;&amp; module) {
00257         m_info = dynamic_cast&lt;CSwordBibleModuleInfo*&gt;(module);
00258         <a class="code" href="class_c_bible_key_chooser.html#g4">refreshContent</a>();
00259     }
00260 }
00261 
<a name="l00263"></a><a class="code" href="class_c_bible_key_chooser.html#i0">00263</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i0">CBibleKeyChooser::bookFocusOut</a>(<font class="keywordtype">int</font> index){
00264     <font class="keywordflow">if</font> (!isUpdatesEnabled())
00265         <font class="keywordflow">return</font>;
00266         
00267     setUpdatesEnabled(<font class="keyword">false</font>);
00268     
00269     m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>( w_book-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText() );
00270     <font class="keyword">const</font> <font class="keywordtype">int</font> chapterCount = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a4">chapterCount</a>( m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>()));
00271     w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>( chapterCount, m_key-&gt;Chapter()-1, <font class="keyword">false</font>);
00272             
00273     <font class="keyword">const</font> <font class="keywordtype">int</font> verseCount = m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>()),m_key-&gt;Chapter());
00274     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(verseCount,m_key-&gt;Verse()-1,<font class="keyword">false</font>);
00275 
00276     setUpdatesEnabled(<font class="keyword">true</font>);
00277 }
00278 
<a name="l00280"></a><a class="code" href="class_c_bible_key_chooser.html#i1">00280</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i1">CBibleKeyChooser::chapterFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00281     <font class="keyword">const</font> <font class="keywordtype">int</font> chapter = w_chapter-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt();
00282     m_key-&gt;Chapter( chapter );
00283     w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a2">reset</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a3">verseCount</a>(m_info-&gt;<a class="code" href="class_c_sword_bible_module_info.html#a7">bookNumber</a>(m_key-&gt;<a class="code" href="class_c_sword_verse_key.html#a8">book</a>()),chapter), 0, <font class="keyword">false</font>);
00284 }
00285 
<a name="l00287"></a><a class="code" href="class_c_bible_key_chooser.html#i2">00287</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#i2">CBibleKeyChooser::verseFocusOut</a>(<font class="keywordtype">int</font> <font class="comment">/*index*/</font>){
00288     m_key-&gt;Verse( w_verse-&gt;<a class="code" href="class_c_key_chooser_widget.html#a10">comboBox</a>()-&gt;currentText().toInt() );
00289     <a class="code" href="class_c_bible_key_chooser.html#g1">setKey</a>( m_key );    
00290 }
00291 
<a name="l00293"></a><a class="code" href="class_c_bible_key_chooser.html#g12">00293</a> <font class="keywordtype">void</font> <a class="code" href="class_c_bible_key_chooser.html#g12">CBibleKeyChooser::updateKey</a>(<a class="code" href="class_c_sword_key.html">CSwordKey</a>* key){
00294 }
</pre></div><hr><address align="right"><small>Generated on Sun May 12 20:27:11 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
