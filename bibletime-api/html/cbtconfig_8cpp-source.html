<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cbtconfig.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cbtconfig.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cbtconfig.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Mon Nov 19 2001</font>
00005 <font class="comment">    copyright            : (C) 2001 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#include "cbtconfig.h"</font>
00019 
00020 <font class="preprocessor">#include &lt;kconfig.h&gt;</font>
00021 <font class="preprocessor">#include &lt;kglobal.h&gt;</font>
00022 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00023 
00024 <font class="preprocessor">#include &lt;qapplication.h&gt;</font>
00025 
00026 <font class="comment">/*  No constructor and destructor, because this class only contains static methods.</font>
00027 <font class="comment">        It won't be instantiated. */</font>
00028 
00029 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::strings ID){
00030     <font class="keywordflow">switch</font> ( ID ){
00031         <font class="keywordflow">case</font> bibletimeVersion:          <font class="keywordflow">return</font> <font class="stringliteral">"bibletimeVersion"</font>;
00032         <font class="keywordflow">case</font> language:                          <font class="keywordflow">return</font> <font class="stringliteral">"language"</font>;
00033         <font class="keywordflow">case</font> standardBible:                 <font class="keywordflow">return</font> <font class="stringliteral">"standardBible"</font>;
00034         <font class="keywordflow">case</font> standardCommentary:        <font class="keywordflow">return</font> <font class="stringliteral">"standardCommentary"</font>;
00035         <font class="keywordflow">case</font> standardLexicon:           <font class="keywordflow">return</font> <font class="stringliteral">"standardLexicon"</font>;
00036         <font class="keywordflow">case</font> standardHebrewStrongsLexicon:  <font class="keywordflow">return</font> <font class="stringliteral">"standardHebrewLexicon"</font>;
00037         <font class="keywordflow">case</font> standardGreekStrongsLexicon:   <font class="keywordflow">return</font> <font class="stringliteral">"standardGreekLexicon"</font>;
00038         <font class="keywordflow">case</font> standardHebrewMorphLexicon:    <font class="keywordflow">return</font> <font class="stringliteral">"standardHebrewMorphLexicon"</font>;
00039         <font class="keywordflow">case</font> standardGreekMorphLexicon:     <font class="keywordflow">return</font> <font class="stringliteral">"standardGreekMorphLexicon"</font>;
00040     }
00041 }
00042 
00043 <font class="keyword">const</font> QString CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::strings ID){
00044     <font class="keywordflow">switch</font> ( ID ){
00045         <font class="keywordflow">case</font> bibletimeVersion:          <font class="keywordflow">return</font> ( <font class="stringliteral">"NOT YET INSTALLED"</font> );
00046             <font class="comment">// main() will realize this and set the value to VERSION</font>
00047         <font class="keywordflow">case</font> language:                          <font class="keywordflow">return</font> (KGlobal::locale()-&gt;language()).local8Bit();
00048         <font class="keywordflow">case</font> standardBible:                 <font class="keywordflow">return</font> <font class="stringliteral">"KJV"</font>;  <font class="comment">// no effect</font>
00049         <font class="keywordflow">case</font> standardCommentary:        <font class="keywordflow">return</font> <font class="stringliteral">"MHC"</font>;
00050         <font class="keywordflow">case</font> standardLexicon:           <font class="keywordflow">return</font> <font class="stringliteral">"Eastons"</font>;
00051         <font class="keywordflow">case</font> standardHebrewStrongsLexicon: <font class="keywordflow">return</font> <font class="stringliteral">"StrongsHebrew"</font>;
00052         <font class="keywordflow">case</font> standardGreekStrongsLexicon:   <font class="keywordflow">return</font> <font class="stringliteral">"StrongsGreek"</font>;
00053         <font class="keywordflow">case</font> standardHebrewMorphLexicon:    <font class="keywordflow">return</font> <font class="stringliteral">"StrongsHebrew"</font>; <font class="comment">//warning this is wrong</font>
00054         <font class="keywordflow">case</font> standardGreekMorphLexicon:     <font class="keywordflow">return</font> <font class="stringliteral">"StrongsGreek"</font>;  <font class="comment">//but imo has no effect</font>
00055     }
00056 }
00057 
00058 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::fonts ID){
00059     <font class="keywordflow">switch</font> ( ID ){
00060         <font class="keywordflow">case</font> standard:  <font class="keywordflow">return</font> <font class="stringliteral">"standard"</font>;
00061         <font class="keywordflow">case</font> unicode:   <font class="keywordflow">return</font> <font class="stringliteral">"unicode"</font>;
00062     }
00063 }
00064 
00065 <font class="keyword">const</font> QFont CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::fonts ID){
00066     <font class="keywordflow">switch</font> ( ID ){
00067         <font class="keywordflow">case</font> standard:  <font class="keywordflow">return</font> QApplication::font();
00068         <font class="keywordflow">case</font> unicode:   <font class="keywordflow">return</font> QApplication::font();
00069     }
00070 }
00071 
00072 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::bools ID){
00073     <font class="keywordflow">switch</font> ( ID ){
00074         <font class="keywordflow">case</font> firstSearchDialog:     <font class="keywordflow">return</font> <font class="stringliteral">"firstSearchDialog"</font>;
00075 
00076         <font class="keywordflow">case</font> toolbar:                           <font class="keywordflow">return</font> <font class="stringliteral">"toolbar"</font>;
00077         <font class="keywordflow">case</font> mainIndex:                     <font class="keywordflow">return</font> <font class="stringliteral">"mainIndex"</font>;
00078 
00079         <font class="keywordflow">case</font> autoTile:                      <font class="keywordflow">return</font> <font class="stringliteral">"autoTile"</font>;
00080         <font class="keywordflow">case</font> autoCascade:                   <font class="keywordflow">return</font> <font class="stringliteral">"autoCascade"</font>;
00081 
00082         <font class="keywordflow">case</font> lexiconCache:              <font class="keywordflow">return</font> <font class="stringliteral">"lexicon_chache"</font>;
00083 
00084         <font class="keywordflow">case</font> footnotes:                     <font class="keywordflow">return</font> <font class="stringliteral">"footnotes"</font>;
00085         <font class="keywordflow">case</font> strongNumbers:             <font class="keywordflow">return</font> <font class="stringliteral">"strongNumbers"</font>;
00086     <font class="keywordflow">case</font> headings:                      <font class="keywordflow">return</font> <font class="stringliteral">"headings"</font>;
00087     <font class="keywordflow">case</font> morphTags:                     <font class="keywordflow">return</font> <font class="stringliteral">"morphTags"</font>;
00088         <font class="keywordflow">case</font> lemmas:                            <font class="keywordflow">return</font> <font class="stringliteral">"lemmas"</font>;
00089         <font class="keywordflow">case</font> hebrewPoints:              <font class="keywordflow">return</font> <font class="stringliteral">"hebrewPoints"</font>;
00090         <font class="keywordflow">case</font> hebrewCantillation:    <font class="keywordflow">return</font> <font class="stringliteral">"hebrewCantillation"</font>;
00091         <font class="keywordflow">case</font> greekAccents:              <font class="keywordflow">return</font> <font class="stringliteral">"greekAccents"</font>;
00092 
00093         <font class="keywordflow">case</font> lineBreaks:                    <font class="keywordflow">return</font> <font class="stringliteral">"lineBreaks"</font>;
00094         <font class="keywordflow">case</font> verseNumbers:              <font class="keywordflow">return</font> <font class="stringliteral">"verseNumbers"</font>;
00095         <font class="keywordflow">case</font> scroll:                            <font class="keywordflow">return</font> <font class="stringliteral">"scroll"</font>;
00096 
00097         <font class="keywordflow">case</font> tips:                              <font class="keywordflow">return</font> <font class="stringliteral">"RunOnStart"</font>;
00098         <font class="keywordflow">case</font> logo:                              <font class="keywordflow">return</font> <font class="stringliteral">"logo"</font>;
00099         <font class="keywordflow">case</font> restoreWorkspace:      <font class="keywordflow">return</font> <font class="stringliteral">"restoreWorkspace"</font>;
00100 
00101     }
00102 }
00103 
00104 <font class="keyword">const</font> <font class="keywordtype">bool</font> CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::bools ID){
00105     <font class="keywordflow">switch</font> ( ID ){
00106         <font class="keywordflow">case</font> firstSearchDialog:     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00107 
00108         <font class="keywordflow">case</font> toolbar:                           <font class="keywordflow">return</font> <font class="keyword">true</font>;
00109         <font class="keywordflow">case</font> mainIndex:                     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00110 
00111         <font class="keywordflow">case</font> autoTile:                      <font class="keywordflow">return</font> <font class="keyword">true</font>;
00112         <font class="keywordflow">case</font> autoCascade:                   <font class="keywordflow">return</font> <font class="keyword">false</font>;
00113 
00114         <font class="keywordflow">case</font> lexiconCache:              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00115 
00116         <font class="keywordflow">case</font> footnotes:                     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00117         <font class="keywordflow">case</font> strongNumbers:             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00118     <font class="keywordflow">case</font> headings:                      <font class="keywordflow">return</font> <font class="keyword">true</font>;
00119     <font class="keywordflow">case</font> morphTags:                     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00120         <font class="keywordflow">case</font> lemmas:                            <font class="keywordflow">return</font> <font class="keyword">true</font>;
00121         <font class="keywordflow">case</font> hebrewPoints:              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00122         <font class="keywordflow">case</font> hebrewCantillation:    <font class="keywordflow">return</font> <font class="keyword">true</font>;
00123         <font class="keywordflow">case</font> greekAccents:              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00124 
00125         <font class="keywordflow">case</font> lineBreaks:                    <font class="keywordflow">return</font> <font class="keyword">true</font>;
00126         <font class="keywordflow">case</font> verseNumbers:              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00127         <font class="keywordflow">case</font> scroll:                            <font class="keywordflow">return</font> <font class="keyword">true</font>;
00128 
00129         <font class="keywordflow">case</font> tips:                              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00130         <font class="keywordflow">case</font> logo:                              <font class="keywordflow">return</font> <font class="keyword">true</font>;
00131         <font class="keywordflow">case</font> restoreWorkspace:      <font class="keywordflow">return</font> <font class="keyword">false</font>;
00132 
00133     }
00134 }
00135 
00136 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::colors ID){
00137     <font class="keywordflow">switch</font> ( ID ){
00138         <font class="keywordflow">case</font> textColor:                             <font class="keywordflow">return</font> <font class="stringliteral">"textColor"</font>;
00139         <font class="keywordflow">case</font> backgroundColor:               <font class="keywordflow">return</font> <font class="stringliteral">"backgroundColor"</font>;
00140         <font class="keywordflow">case</font> highlightedVerseColor:     <font class="keywordflow">return</font> <font class="stringliteral">"highlightedVerseClolor"</font>;
00141         <font class="keywordflow">case</font> footnotesColor:                    <font class="keywordflow">return</font> <font class="stringliteral">"footnotesColor"</font>;
00142         <font class="keywordflow">case</font> strongsColor:                      <font class="keywordflow">return</font> <font class="stringliteral">"strongsColor"</font>;
00143         <font class="keywordflow">case</font> morphsColor:                       <font class="keywordflow">return</font> <font class="stringliteral">"morphsColor"</font>;
00144         <font class="keywordflow">case</font> jesuswordsColor:               <font class="keywordflow">return</font> <font class="stringliteral">"jesuswordsColor"</font>;
00145         <font class="keywordflow">case</font> swordRefColor:                     <font class="keywordflow">return</font> <font class="stringliteral">"swordRefColor"</font>;
00146     }
00147 }
00148 
00149 <font class="keyword">const</font> QColor CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::colors ID){
00150     <font class="keywordflow">switch</font> ( ID ){
00151         <font class="keywordflow">case</font> textColor:                             <font class="keywordflow">return</font> QColor(Qt::black);
00152         <font class="keywordflow">case</font> backgroundColor:               <font class="keywordflow">return</font> QColor(Qt::white);
00153         <font class="keywordflow">case</font> highlightedVerseColor:     <font class="keywordflow">return</font> QColor(Qt::red);
00154         <font class="keywordflow">case</font> footnotesColor:                    <font class="keywordflow">return</font> QColor(Qt::black);
00155         <font class="keywordflow">case</font> strongsColor:                      <font class="keywordflow">return</font> QColor(Qt::green);
00156         <font class="keywordflow">case</font> morphsColor:                       <font class="keywordflow">return</font> QColor(Qt::green);
00157         <font class="keywordflow">case</font> jesuswordsColor:               <font class="keywordflow">return</font> QColor(Qt::red);
00158         <font class="keywordflow">case</font> swordRefColor:                     <font class="keywordflow">return</font> QColor(Qt::blue);
00159     }
00160 }
00161 
00162 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::intLists ID){
00163     <font class="keywordflow">switch</font> ( ID ){
00164         <font class="keywordflow">case</font> splitterSizes: <font class="keywordflow">return</font> <font class="stringliteral">"splitterSizes"</font>;
00165     }
00166 }
00167 
00168 <font class="keyword">const</font> QValueList&lt;int&gt; CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::intLists ID){
00169     <font class="keywordflow">switch</font> ( ID ){
00170         <font class="keywordflow">case</font> splitterSizes: <font class="keywordflow">return</font> QValueList&lt;int&gt;();
00171     }
00172 }
00173 
00174 <font class="keyword">const</font> QString CBTConfig::getKey( <font class="keyword">const</font> CBTConfig::stringLists ID){
00175     <font class="keywordflow">switch</font> ( ID ){
00176         <font class="keywordflow">case</font> searchCompletionTexts: <font class="keywordflow">return</font> <font class="stringliteral">"searchCompletionTexts"</font>;
00177         <font class="keywordflow">case</font> searchTexts: <font class="keywordflow">return</font> <font class="stringliteral">"searchTexts"</font>;     
00178     }
00179 }
00180 
00181 <font class="keyword">const</font> QStringList CBTConfig::getDefault( <font class="keyword">const</font> CBTConfig::stringLists ID){
00182     <font class="keywordflow">switch</font> ( ID ){
00183         <font class="keywordflow">case</font> searchTexts: <font class="keywordflow">return</font> QStringList();
00184     }
00185 }
00186 
00187 <font class="keyword">const</font> QString CBTConfig::get( <font class="keyword">const</font> CBTConfig::strings ID){
00188     KConfig* config = KGlobal::config();
00189     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"strings"</font>);
00190     <font class="keywordflow">return</font> config-&gt;readEntry(getKey(ID),getDefault(ID));
00191 }
00192 
00193 <font class="keyword">const</font> QFont CBTConfig::get(<font class="keyword">const</font> CBTConfig::fonts ID){
00194     KConfig* config = KGlobal::config();
00195     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"fonts"</font>);
00196     QFont defaultFont = getDefault(ID);
00197     <font class="keywordflow">return</font> config-&gt;readFontEntry(getKey(ID), &amp;defaultFont);
00198 }
00199 
00200 <font class="keyword">const</font> <font class="keywordtype">bool</font> CBTConfig::get( <font class="keyword">const</font> CBTConfig::bools ID){
00201     <font class="comment">//specila behaviour for the KTipDialog class</font>
00202     KConfig* config = KGlobal::config();    
00203     KConfigGroupSaver groupSaver(config, (ID == CBTConfig::tips) ? <font class="stringliteral">"TipOfDay"</font> : <font class="stringliteral">"bools"</font>);       
00204     <font class="keywordflow">return</font> config-&gt;readBoolEntry(getKey(ID),getDefault(ID));
00205 }
00206 
00207 <font class="keyword">const</font> QColor CBTConfig::get( <font class="keyword">const</font> CBTConfig::colors ID){
00208     KConfig* config = KGlobal::config();
00209     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"colors"</font>);
00210     QColor defaultColor = getDefault(ID);
00211     <font class="keywordflow">return</font> config-&gt;readColorEntry(getKey(ID),&amp;defaultColor);
00212 }
00213 
00214 <font class="keyword">const</font> QValueList&lt;int&gt;   CBTConfig::get( <font class="keyword">const</font> CBTConfig::intLists ID ){
00215     KConfig* config = KGlobal::config();
00216     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"lists"</font>);
00217     <font class="keywordflow">return</font> config-&gt;readIntListEntry(getKey(ID));
00218 }
00219 
00220 <font class="keyword">const</font> QStringList   CBTConfig::get( <font class="keyword">const</font> CBTConfig::stringLists ID ){
00221     KConfig* config = KGlobal::config();
00222     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"lists"</font>);
00223     <font class="keywordflow">return</font> config-&gt;readListEntry(getKey(ID));
00224 }
00225 
00226 <font class="keywordtype">void</font> CBTConfig::set( <font class="keyword">const</font> CBTConfig::strings ID, <font class="keyword">const</font> QString value ){
00227     KConfig* config = KGlobal::config();
00228     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"strings"</font>);
00229     config-&gt;writeEntry(getKey(ID), value);
00230 }
00231 
00232 <font class="keywordtype">void</font> CBTConfig::set( <font class="keyword">const</font> CBTConfig::fonts ID, <font class="keyword">const</font> QFont value ){
00233     KConfig* config = KGlobal::config();
00234     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"fonts"</font>);
00235     config-&gt;writeEntry(getKey(ID), value);
00236 }
00237 
00238 <font class="keywordtype">void</font> CBTConfig::set(<font class="keyword">const</font>  CBTConfig::bools ID,<font class="keyword">const</font>  <font class="keywordtype">bool</font> value ){
00239     KConfig* config = KGlobal::config();
00240     <font class="comment">//special behaviour to work with KTipDialog class of KDE</font>
00241     KConfigGroupSaver groupSaver(config, (ID == CBTConfig::tips) ? <font class="stringliteral">"TipOfDay"</font> : <font class="stringliteral">"bools"</font>);
00242     config-&gt;writeEntry(getKey(ID), value);
00243 }
00244 
00245 <font class="keywordtype">void</font> CBTConfig::set( <font class="keyword">const</font> CBTConfig::colors ID, <font class="keyword">const</font> QColor value ){
00246     KConfig* config = KGlobal::config();
00247     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"colors"</font>);
00248     config-&gt;writeEntry(getKey(ID), value);
00249 }
00250 
00251 <font class="keywordtype">void</font> CBTConfig::set( <font class="keyword">const</font> CBTConfig::intLists ID, <font class="keyword">const</font> QValueList&lt;int&gt; value ){
00252     KConfig* config = KGlobal::config();
00253     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"lists"</font>);
00254     config-&gt;writeEntry(getKey(ID), value);
00255 }
00256 
00257 <font class="keywordtype">void</font> CBTConfig::set( <font class="keyword">const</font> CBTConfig::stringLists ID, <font class="keyword">const</font> QStringList value ){
00258     KConfig* config = KGlobal::config();
00259     KConfigGroupSaver groupSaver(config, <font class="stringliteral">"lists"</font>);
00260     config-&gt;writeEntry(getKey(ID), value);
00261 }
00262 
00263 
00264 
00265 <font class="keyword">const</font> CSwordBackend::DisplayOptionsBool CBTConfig::getDisplayOptionDefaults(){
00266 
00267   CSwordBackend::DisplayOptionsBool options;
00268 
00269     options.lineBreaks =        get(CBTConfig::lineBreaks);
00270   options.verseNumbers =    get(CBTConfig::verseNumbers);
00271 
00272     <font class="keywordflow">return</font> options;
00273 }
00274 
00275 <font class="keyword">const</font> CSwordBackend::FilterOptionsBool CBTConfig::getFilterOptionDefaults(){
00276 
00277   CSwordBackend::FilterOptionsBool options;
00278 
00279   options.footnotes =                       get(CBTConfig::footnotes);
00280   options.strongNumbers =           get(CBTConfig::strongNumbers);
00281   options.headings =                        get(CBTConfig::headings);
00282   options.morphTags =                   get(CBTConfig::morphTags);
00283   options.lemmas =                          get(CBTConfig::lemmas);
00284   options.hebrewPoints =                get(CBTConfig::hebrewPoints);
00285   options.hebrewCantillation =  get(CBTConfig::hebrewCantillation);
00286   options.greekAccents =                get(CBTConfig::greekAccents);
00287 
00288     <font class="keywordflow">return</font> options;
00289 }
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:45 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
