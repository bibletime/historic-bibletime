<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cstyleeditordialog.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cstyleeditordialog.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cstyleeditordialog.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Sun Aug 20 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#include "cstyleeditordialog.h"</font>
00019 
00020 <font class="comment">//KDE includes</font>
00021 <font class="preprocessor">#include &lt;kcombobox.h&gt;</font>
00022 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00023 <font class="preprocessor">#include &lt;kcolorbutton.h&gt;</font>
00024 <font class="preprocessor">#include &lt;kfontdialog.h&gt;</font>
00025 
00026 <font class="comment">//Qt includes</font>
00027 <font class="preprocessor">#include &lt;qlineedit.h&gt;</font>
00028 <font class="preprocessor">#include &lt;qlayout.h&gt;</font>
00029 <font class="preprocessor">#include &lt;qlabel.h&gt;</font>
00030 <font class="preprocessor">#include &lt;qgroupbox.h&gt;</font>
00031 <font class="preprocessor">#include &lt;qcheckbox.h&gt;</font>
00032 <font class="preprocessor">#include &lt;qwidget.h&gt;</font>
00033 <font class="preprocessor">#include &lt;qbuttongroup.h&gt;</font>
00034 <font class="preprocessor">#include &lt;qvbuttongroup.h&gt;</font>
00035 <font class="preprocessor">#include &lt;qhbuttongroup.h&gt;</font>
00036 <font class="preprocessor">#include &lt;qradiobutton.h&gt;</font>
00037 <font class="preprocessor">#include &lt;qspinbox.h&gt;</font>
00038 
00039 <font class="preprocessor">#define INNER_BORDER 4</font>
00040 <font class="preprocessor"></font><font class="preprocessor">#define OUTER_BORDER 4</font>
00041 <font class="preprocessor"></font>
00042 CStyleEditorDialog::CStyleEditorDialog(CStyle* style, QWidget *parent, <font class="keyword">const</font> <font class="keywordtype">char</font> *name )
00043     : KDialogBase(parent,name, true, i18n("style editor")) {
00044     m_style = style;
00045     m_currentFormat = 0;
00046     m_formatEnabled =  <font class="keyword">false</font>;
00047     
00048     initView(); 
00049     <a class="code" href="class_c_search_dialog_text.html#c0">readSettings</a>(); 
00050     styleTypeChanged(<font class="stringliteral">"Header"</font>);
00051 }
00052 
00053 CStyleEditorDialog::~CStyleEditorDialog(){
00054     saveSettings();
00055 }
00056 
00058 <font class="keywordtype">void</font> CStyleEditorDialog::initView(){
00059   enableButtonSeparator( <font class="keyword">true</font> );
00060   QFrame *mainWidget = makeMainWidget();
00061   QLabel* label = 0;
00062 
00063   QVBoxLayout *topLayout = <font class="keyword">new</font> QVBoxLayout( mainWidget, OUTER_BORDER, INNER_BORDER );
00064     
00065     QHBoxLayout *hboxLayout = <font class="keyword">new</font> QHBoxLayout(0, OUTER_BORDER, INNER_BORDER);
00066   m_styleNameEdit = <font class="keyword">new</font> QLineEdit( mainWidget );
00067     label = <font class="keyword">new</font> QLabel(m_styleNameEdit, i18n(<font class="stringliteral">"Name of style:"</font>), <font class="keyword">this</font>);
00068     hboxLayout-&gt;addWidget(label);
00069     hboxLayout-&gt;addWidget(m_styleNameEdit); 
00070 
00071   topLayout-&gt;addLayout(hboxLayout);
00072 
00073     hboxLayout = <font class="keyword">new</font> QHBoxLayout(0, OUTER_BORDER, INNER_BORDER);    
00074   m_styleTypeChooser = <font class="keyword">new</font> KComboBox( mainWidget, <font class="stringliteral">"styleTypeChooser"</font> );
00075   label = <font class="keyword">new</font> QLabel( m_styleTypeChooser, i18n(<font class="stringliteral">"Choose the part of the style:"</font>), mainWidget );
00076   hboxLayout-&gt;addWidget(label);
00077   m_styleTypeChooser-&gt;insertItem( i18n(<font class="stringliteral">"Header"</font>) );
00078   m_styleTypeChooser-&gt;insertItem( i18n(<font class="stringliteral">"Description"</font>) );
00079   m_styleTypeChooser-&gt;insertItem( i18n(<font class="stringliteral">"Module text"</font>) );
00080   connect(m_styleTypeChooser, SIGNAL(activated(<font class="keyword">const</font> QString&amp;)), SLOT(styleTypeChanged(<font class="keyword">const</font> QString&amp;)));
00081   m_currentFormat = m_style-&gt;formatForType( CStyle::Header );
00082   hboxLayout-&gt;addWidget( m_styleTypeChooser );
00083 
00084   m_setEnabledBox = <font class="keyword">new</font> QCheckBox( mainWidget );
00085   m_setEnabledBox-&gt;setText( i18n(<font class="stringliteral">"Enable this part"</font>));
00086   connect( m_setEnabledBox, SIGNAL(clicked()), SLOT(enableBoxClicked()));
00087   hboxLayout-&gt;addWidget( m_setEnabledBox );
00088 
00089   topLayout-&gt;addLayout( hboxLayout );
00090 
00091 
00092     hboxLayout = <font class="keyword">new</font> QHBoxLayout(0, OUTER_BORDER, INNER_BORDER);
00093     topLayout-&gt;addLayout(hboxLayout);
00094 
00095   m_alignRadios.buttongroup = <font class="keyword">new</font> QVButtonGroup( mainWidget );
00096     m_alignRadios.leftRB = <font class="keyword">new</font> QRadioButton( i18n(<font class="stringliteral">"Left"</font>), m_alignRadios.buttongroup);
00097     m_alignRadios.centerRB = <font class="keyword">new</font> QRadioButton( i18n(<font class="stringliteral">"Center"</font>), m_alignRadios.buttongroup);
00098     m_alignRadios.rightRB = <font class="keyword">new</font> QRadioButton(i18n(<font class="stringliteral">"Right"</font>),m_alignRadios.buttongroup);
00099 <font class="comment">//  m_alignRadios.justificationRB = new QRadioButton(i18n("Justification"), m_alignRadios.buttongroup);</font>
00100     m_alignRadios.buttongroup-&gt;setFixedHeight( m_alignRadios.buttongroup-&gt;sizeHint().height());
00101   hboxLayout-&gt;addWidget( m_alignRadios.buttongroup );
00102 
00103     QButtonGroup* box = <font class="keyword">new</font> QButtonGroup( mainWidget );
00104     QVBoxLayout* boxLayout = <font class="keyword">new</font> QVBoxLayout( box, OUTER_BORDER, INNER_BORDER );
00105     
00106     QHBoxLayout* layout1 = <font class="keyword">new</font> QHBoxLayout(0, 1, 1);
00107     m_colors.foregroundChooser = <font class="keyword">new</font> KColorButton( box );
00108     label = <font class="keyword">new</font> QLabel(m_colors.foregroundChooser, <font class="stringliteral">"label"</font>, box);
00109     label-&gt;setText(i18n(<font class="stringliteral">"Foreground:"</font>));    
00110     layout1-&gt;addWidget(label);
00111   layout1-&gt;addStretch(2);   
00112     layout1-&gt;addWidget(m_colors.foregroundChooser);
00113     
00114   boxLayout-&gt;addLayout(layout1);
00115   boxLayout-&gt;addStretch(3);
00116     
00117     layout1 = <font class="keyword">new</font> QHBoxLayout(0, 1, 1);
00118     m_colors.backgroundChooser = <font class="keyword">new</font> KColorButton(box);
00119     label = <font class="keyword">new</font> QLabel(m_colors.backgroundChooser, <font class="stringliteral">"label"</font>, box);
00120     label-&gt;setText(i18n(<font class="stringliteral">"Background:"</font>));
00121     layout1-&gt;addWidget(label);  
00122   layout1-&gt;addStretch(2);   
00123     layout1-&gt;addWidget(m_colors.backgroundChooser);
00124         
00125   boxLayout-&gt;addLayout(layout1);
00126   boxLayout-&gt;addStretch(3);
00127   hboxLayout-&gt;addWidget(box);
00128 
00129   hboxLayout = <font class="keyword">new</font> QHBoxLayout();
00130     m_font.fontButton = <font class="keyword">new</font> QPushButton(mainWidget);
00131     m_font.fontButton-&gt;setText(i18n(<font class="stringliteral">"Choose font"</font>));
00132     connect(m_font.fontButton, SIGNAL(clicked()), SLOT(showFontChooser())); 
00133   m_font.fontDisplay = <font class="keyword">new</font> QLabel(m_font.fontButton, <font class="stringliteral">""</font>, mainWidget);   
00134   m_font.fontDisplay-&gt;setText(i18n(<font class="stringliteral">"Font preview"</font>));
00135   hboxLayout-&gt;addWidget(m_font.fontDisplay);
00136   hboxLayout-&gt;addWidget(m_font.fontButton);
00137 
00138 <font class="comment">//  m_font.identation = new QSpinBox(mainWidget);</font>
00139 <font class="comment">//  label = new QLabel(m_font.identation, "identation", mainWidget);</font>
00140 <font class="comment">//  label-&gt;setText(i18n("Identation (in mm):"));</font>
00141 <font class="comment">//  hboxLayout-&gt;addStretch(2);</font>
00142 <font class="comment">//  hboxLayout-&gt;addWidget(label);</font>
00143 <font class="comment">//  hboxLayout-&gt;addWidget(m_font.identation);</font>
00144 
00145   topLayout-&gt;addLayout(hboxLayout);
00146 
00147   m_frame.useFrame = <font class="keyword">new</font> QCheckBox(mainWidget);
00148   m_frame.useFrame-&gt;setText( i18n(<font class="stringliteral">"Use frame"</font>) );
00149   topLayout-&gt;addWidget(m_frame.useFrame);
00150   connect(m_frame.useFrame, SIGNAL(clicked()), SLOT(useFrameClicked()));
00151 
00152   m_frame.groupbox = <font class="keyword">new</font> QGroupBox(mainWidget);
00153     boxLayout = <font class="keyword">new</font> QVBoxLayout(m_frame.groupbox);
00154     
00155     hboxLayout = <font class="keyword">new</font> QHBoxLayout();
00156   m_frame.lineThicknessChooser = <font class="keyword">new</font> QSpinBox( m_frame.groupbox );
00157   m_frame.lineThicknessChooser-&gt;setMinValue(1);
00158   label = <font class="keyword">new</font> QLabel(m_frame.lineThicknessChooser, <font class="stringliteral">"label"</font>, m_frame.groupbox);
00159   label-&gt;setText( i18n(<font class="stringliteral">"Line thickness (in point):"</font>) );
00160   hboxLayout-&gt;addWidget(label);
00161     hboxLayout-&gt;addWidget(m_frame.lineThicknessChooser);    
00162     boxLayout-&gt;addLayout(hboxLayout);
00163     
00164     hboxLayout = <font class="keyword">new</font> QHBoxLayout();
00165     m_frame.colorChooser = <font class="keyword">new</font> KColorButton(m_frame.groupbox);
00166     label = <font class="keyword">new</font> QLabel(m_frame.colorChooser, <font class="stringliteral">""</font>, m_frame.groupbox);
00167     label-&gt;setText(i18n(<font class="stringliteral">"Frame color:"</font>));
00168     hboxLayout-&gt;addWidget(label);
00169     hboxLayout-&gt;addWidget(m_frame.colorChooser);
00170     boxLayout-&gt;addLayout(hboxLayout);
00171 
00172     hboxLayout = <font class="keyword">new</font> QHBoxLayout();
00173     m_frame.lineStyleChooser = <font class="keyword">new</font> QComboBox(m_frame.groupbox);
00174     label = <font class="keyword">new</font> QLabel(m_frame.lineStyleChooser, <font class="stringliteral">""</font>, m_frame.groupbox);
00175     label-&gt;setText(i18n(<font class="stringliteral">"Line style:"</font>));
00176     hboxLayout-&gt;addWidget(label);
00177     hboxLayout-&gt;addWidget(m_frame.lineStyleChooser);
00178     boxLayout-&gt;addLayout(hboxLayout);
00179             
00180     topLayout-&gt;addWidget(m_frame.groupbox);
00181     topLayout-&gt;addStretch(3);
00182     
00183     QPainter p;
00184     QPen pen(Qt::black, 2, Qt::SolidLine);
00185     QBrush brush(Qt::white);        
00186     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=1; i &lt;= 5; i++) {  <font class="comment">// from Qt::SolidLine to Qt::DashDotDotLine</font>
00187         QPixmap* pix = <font class="keyword">new</font> QPixmap(<font class="comment">/*m_frame.lineStyleChooser-&gt;width()*/</font>150,15);
00188         pen.setStyle((Qt::PenStyle)i);
00189         p.begin(pix);
00190         p.setPen(pen);
00191         p.fillRect(0,0, pix-&gt;width(), pix-&gt;height(), brush);
00192         p.drawLine(0,(<font class="keywordtype">int</font>)((<font class="keywordtype">float</font>)pix-&gt;height()/2),pix-&gt;width(),(int)((float)pix-&gt;height()/2));
00193         p.end();
00194         m_frame.lineStyleChooser-&gt;insertItem(*pix); 
00195     }
00196     
00197     m_currentFormat = m_style-&gt;formatForType( CStyle::Header ); 
00198     setupWithFormat( m_currentFormat );
00199     enableBoxClicked();
00200 }
00201 
00203 <font class="keywordtype">void</font> CStyleEditorDialog::readSettings(){
00204     m_styleNameEdit-&gt;setText( m_style-&gt;styleName() );
00205     <font class="keywordflow">if</font> (m_styleNameEdit-&gt;text() == i18n(<font class="stringliteral">"Standard"</font>))
00206         m_styleNameEdit-&gt;setEnabled(<font class="keyword">false</font>); <font class="comment">//you can't change the name of the standard style</font>
00207 }
00208 
00210 <font class="keywordtype">void</font> CStyleEditorDialog::saveSettings(){
00211     applySettingsToFormat( m_currentFormat );
00212   m_style-&gt;setStyleName( m_styleNameEdit-&gt;text() ); 
00213 }
00214 
00216 <font class="keywordtype">void</font> CStyleEditorDialog::showFontChooser(){
00217     <font class="keywordtype">int</font> result = KFontDialog::getFont( m_font.font );
00218     <font class="keywordflow">if</font> ( result == KFontDialog::Accepted ) {
00219         setupFontWidgets( m_font.font );
00220     }
00221 }
00222 
00224 <font class="keywordtype">void</font> CStyleEditorDialog::useFrameClicked(){
00225     m_frame.groupbox-&gt;setEnabled( m_frame.useFrame-&gt;isChecked() );
00226 }
00227 
00229 <font class="keywordtype">void</font> CStyleEditorDialog::setupWithFormat( <a class="code" href="class_c_style_format.html">CStyleFormat</a>* format){
00230     qDebug(<font class="stringliteral">"CStyleEditorDialog::setupWithFormat( CStyleFormat* format)"</font>);
00231     <font class="keywordflow">if</font> (!format)
00232         <font class="keywordflow">return</font>; 
00233 
00234     CStyle::styleType styleType = CStyle::Unknown;
00235     <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::Header))
00236         styleType = CStyle::Header;
00237     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::Description))
00238         styleType = CStyle::Description;
00239     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::ModuleText))
00240         styleType = CStyle::ModuleText;
00241     
00242     <font class="keywordflow">if</font> (styleType == CStyle::Unknown)
00243         <font class="keywordflow">return</font>;
00244     
00245     m_formatEnabled = m_style-&gt;hasFormatTypeEnabled(styleType);
00246     
00247   m_styleNameEdit-&gt;setText( m_style-&gt;styleName());  
00248     <font class="comment">//setup alignement</font>
00249     <font class="keywordflow">switch</font>(format-&gt;<a class="code" href="class_c_style_format.html#a7">alignement</a>()) {
00250         <font class="keywordflow">case</font> CStyleFormat::Left:
00251             m_alignRadios.leftRB-&gt;setChecked(<font class="keyword">true</font>);
00252             <font class="keywordflow">break</font>;
00253         <font class="keywordflow">case</font> CStyleFormat::Center:
00254             m_alignRadios.centerRB-&gt;setChecked(<font class="keyword">true</font>);
00255             <font class="keywordflow">break</font>;
00256         <font class="keywordflow">case</font> CStyleFormat::Right:
00257             m_alignRadios.rightRB-&gt;setChecked(<font class="keyword">true</font>);
00258             <font class="keywordflow">break</font>;
00259 <font class="comment">//      case CStyleFormat::Justification:</font>
00260 <font class="comment">//          m_alignRadios.justificationRB-&gt;setChecked(true);</font>
00261 <font class="comment">//          break;</font>
00262         <font class="keywordflow">default</font>:
00263             m_alignRadios.leftRB-&gt;setChecked(<font class="keyword">true</font>);
00264             <font class="keywordflow">break</font>;
00265     }
00266     m_alignRadios.buttongroup-&gt;setEnabled(m_formatEnabled); 
00267     m_setEnabledBox-&gt;setChecked(m_formatEnabled);
00268     
00269     <font class="comment">//setup colors</font>
00270     m_colors.backgroundChooser-&gt;setColor( format-&gt;<a class="code" href="class_c_style_format.html#a2">color</a>( CStyleFormat::Background ) );
00271     m_colors.backgroundChooser-&gt;setEnabled(m_formatEnabled);        
00272     
00273     m_colors.foregroundChooser-&gt;setColor( format-&gt;<a class="code" href="class_c_style_format.html#a2">color</a>( CStyleFormat::Foreground ) );
00274     m_colors.foregroundChooser-&gt;setEnabled(m_formatEnabled);
00275         
00276     <font class="comment">//setup fonts</font>
00277     m_font.font = format-&gt;<a class="code" href="class_c_style_format.html#a5">getFont</a>();
00278     setupFontWidgets( m_font.font );
00279     
00280     <font class="comment">//setup frame part</font>
00281     <a class="code" href="class_c_style_format_frame.html">CStyleFormatFrame</a>* frame = format-&gt;<a class="code" href="class_c_style_format.html#a9">frame</a>();
00282     m_frame.useFrame-&gt;setChecked(frame != 0);
00283     m_frame.useFrame-&gt;setEnabled(m_formatEnabled);      
00284     m_frame.groupbox-&gt;setEnabled(m_formatEnabled);      
00285     useFrameClicked();
00286     
00287     <font class="keywordflow">if</font> (frame) {
00288         m_frame.colorChooser-&gt;setColor( frame-&gt;<a class="code" href="class_c_style_format_frame.html#a2">color</a>() );
00289         m_frame.lineThicknessChooser-&gt;setValue( frame-&gt;<a class="code" href="class_c_style_format_frame.html#a6">thickness</a>() );   
00290         m_frame.lineStyleChooser-&gt;setCurrentItem((<font class="keywordtype">int</font>)(frame-&gt;<a class="code" href="class_c_style_format_frame.html#a4">lineStyle</a>())-1);  
00291     }
00292     qDebug(<font class="stringliteral">"finished"</font>);
00293 }
00294 
00296 <font class="keywordtype">void</font> CStyleEditorDialog::setupFontWidgets( QFont&amp; font ){
00297     QFont dummy(font);
00298     dummy.setPointSize(12);
00299     m_font.fontDisplay-&gt;setFont( dummy );
00300     m_font.fontDisplay-&gt;setText( QString::fromLatin1(<font class="stringliteral">"%1 - %2"</font>).arg(m_font.font.family()).arg(m_font.font.pointSize()) );
00301     m_font.fontDisplay-&gt;setEnabled(m_formatEnabled);
00302     
00303     m_font.fontButton-&gt;setEnabled(m_formatEnabled); 
00304 }
00305 
00307 <font class="keywordtype">void</font> CStyleEditorDialog::styleTypeChanged( <font class="keyword">const</font> QString&amp; name ){
00308     applySettingsToFormat( m_currentFormat );
00309     
00310     <font class="keywordflow">if</font> (name == i18n(<font class="stringliteral">"Header"</font>)) {
00311         m_currentFormat = m_style-&gt;formatForType( CStyle::Header );
00312         m_formatEnabled = m_style-&gt;hasFormatTypeEnabled( CStyle::Header );
00313     }
00314     <font class="keywordflow">else</font>    <font class="keywordflow">if</font> (name == i18n(<font class="stringliteral">"Description"</font>)) {
00315         m_currentFormat = m_style-&gt;formatForType( CStyle::Description );
00316         m_formatEnabled = m_style-&gt;hasFormatTypeEnabled( CStyle::Description );
00317     }
00318     <font class="keywordflow">else</font>    <font class="keywordflow">if</font> (name == i18n(<font class="stringliteral">"Module text"</font>)) {
00319         m_currentFormat = m_style-&gt;formatForType( CStyle::ModuleText ); 
00320         m_formatEnabled = m_style-&gt;hasFormatTypeEnabled( CStyle::ModuleText );  
00321     }
00322     setupWithFormat( m_currentFormat );
00323 }
00324 
00326 <font class="keywordtype">void</font> CStyleEditorDialog::applySettingsToFormat( <a class="code" href="class_c_style_format.html">CStyleFormat</a>* format ){
00327     <font class="keywordflow">if</font> (!format)
00328         <font class="keywordflow">return</font>;
00329     m_style-&gt;setStyleName(m_styleNameEdit-&gt;text());
00330     
00331     <font class="comment">//apply alignement settings</font>
00332     <font class="keywordflow">if</font> (m_alignRadios.buttongroup-&gt;selected() == m_alignRadios.leftRB ) {
00333         format-&gt;<a class="code" href="class_c_style_format.html#a6">setAlignement</a>( CStyleFormat::Left);
00334     }
00335     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_alignRadios.buttongroup-&gt;selected() == m_alignRadios.centerRB) {
00336         format-&gt;<a class="code" href="class_c_style_format.html#a6">setAlignement</a>( CStyleFormat::Center );
00337     }
00338     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_alignRadios.buttongroup-&gt;selected() == m_alignRadios.rightRB ) {
00339         format-&gt;<a class="code" href="class_c_style_format.html#a6">setAlignement</a>( CStyleFormat::Right );
00340     }
00341 <font class="comment">//  else if (m_alignRadios.buttongroup-&gt;selected() == m_alignRadios.justificationRB ) {</font>
00342 <font class="comment">//      format-&gt;setAlignement( CStyleFormat::Justification );</font>
00343 <font class="comment">//  }</font>
00344     
00345     <font class="comment">//apply color settings</font>
00346     format-&gt;<a class="code" href="class_c_style_format.html#a3">setColor</a>( CStyleFormat::Background, m_colors.backgroundChooser-&gt;color() );
00347     format-&gt;<a class="code" href="class_c_style_format.html#a3">setColor</a>( CStyleFormat::Foreground, m_colors.foregroundChooser-&gt;color() );
00348     
00349     <font class="comment">//apply font settings</font>
00350     format-&gt;<a class="code" href="class_c_style_format.html#a4">setFont</a>( m_font.font );
00351     
00352     <font class="comment">//apply frame settings</font>
00353     <a class="code" href="class_c_style_format_frame.html">CStyleFormatFrame</a>* frame = format-&gt;<a class="code" href="class_c_style_format.html#a9">frame</a>();
00354     <font class="keywordflow">if</font> (frame) {
00355         frame-&gt;<a class="code" href="class_c_style_format_frame.html#a1">setColor</a>( m_frame.colorChooser-&gt;color() );   
00356         frame-&gt;<a class="code" href="class_c_style_format_frame.html#a5">setThickness</a>( m_frame.lineThicknessChooser-&gt;value() );
00357         <font class="comment">//the position in the list equal to the position in Qt::PenStyle+1</font>
00358         frame-&gt;<a class="code" href="class_c_style_format_frame.html#a3">setLineStyle</a>((Qt::PenStyle)(m_frame.lineStyleChooser-&gt;currentItem()+1));
00359 <font class="comment">//      qDebug("%i",m_frame.lineStyleChooser-&gt;currentItem()+1);</font>
00360     }
00361     
00362     format-&gt;<a class="code" href="class_c_style_format.html#a8">setFrame</a>( m_frame.useFrame-&gt;isChecked(), frame );
00363 }
00364 
00366 <font class="keywordtype">void</font> CStyleEditorDialog::enableBoxClicked() {
00367     qDebug(<font class="stringliteral">"CStyleEditorDialog::enableBoxClicked()"</font>);
00368     <font class="comment">//find the correct format type</font>
00369     CStyle::styleType styleType = CStyle::Unknown;  
00370     <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::Header))
00371         styleType = CStyle::Header;
00372     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::Description))
00373         styleType = CStyle::Description;
00374     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (m_currentFormat == m_style-&gt;formatForType(CStyle::ModuleText))
00375         styleType = CStyle::ModuleText;
00376     
00377     m_style-&gt;setFormatTypeEnabled(styleType, m_setEnabledBox-&gt;isChecked()); 
00378     applySettingsToFormat(m_style-&gt;formatForType(styleType));
00379     setupWithFormat( m_currentFormat );
00380 }
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:47 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
