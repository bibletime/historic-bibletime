<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>qcomplextext_p.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>qcomplextext_p.h</h1><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef QCOMPLEXTEXT_H</font>
00002 <font class="preprocessor"></font><font class="preprocessor">#define QCOMPLEXTEXT_H</font>
00003 <font class="preprocessor"></font>
00004 <font class="preprocessor">#ifndef QT_H</font>
00005 <font class="preprocessor"></font><font class="preprocessor">#include &lt;qstring.h&gt;</font>
00006 <font class="preprocessor">#include &lt;qpointarray.h&gt;</font>
00007 <font class="preprocessor">#include &lt;qfont.h&gt;</font>
00008 <font class="preprocessor">#include &lt;qpainter.h&gt;</font>
00009 <font class="preprocessor">#include &lt;qlist.h&gt;</font>
00010 <font class="preprocessor">#include &lt;qshared.h&gt;</font>
00011 <font class="preprocessor">#endif // QT_H</font>
00012 <font class="preprocessor"></font>
00013 <font class="keyword">class </font>QFontPrivate;
00014 
00015 <font class="keyword">namespace </font>Qt3 {
00016 
00017 <font class="comment">// bidi helper classes. Internal to Qt</font>
00018 <font class="keyword">struct </font>Q_EXPORT QBidiStatus {
00019     QBidiStatus() {
00020     eor = QChar::DirON;
00021     lastStrong = QChar::DirON;
00022     last = QChar:: DirON;
00023     }
00024     QChar::Direction eor        : 5;
00025     QChar::Direction lastStrong     : 5;
00026     QChar::Direction last       : 5;
00027 };
00028 
00029 <font class="keyword">struct </font>Q_EXPORT QBidiContext : <font class="keyword">public</font> QShared {
00030     <font class="comment">// ### ref and deref parent?</font>
00031     QBidiContext( uchar level, QChar::Direction embedding, QBidiContext *parent = 0, <font class="keywordtype">bool</font> override = FALSE );
00032     ~QBidiContext();
00033 
00034     <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font> level;
00035     <font class="keywordtype">bool</font> override : 1;
00036     QChar::Direction dir : 5;
00037 
00038     QBidiContext *parent;
00039 };
00040 
00041 <font class="keyword">struct </font>Q_EXPORT QBidiControl {
00042     QBidiControl() { context = 0; }
00043     QBidiControl( QBidiContext *c, QBidiStatus s)
00044     { context = c; <font class="keywordflow">if</font>( context ) context-&gt;ref(); status = s; }
00045     ~QBidiControl() { <font class="keywordflow">if</font> ( context &amp;&amp; context-&gt;deref() ) <font class="keyword">delete</font> context; }
00046     <font class="keywordtype">void</font> setContext( QBidiContext *c ) { <font class="keywordflow">if</font> ( context == c ) <font class="keywordflow">return</font>; <font class="keywordflow">if</font> ( context &amp;&amp; context-&gt;deref() ) <font class="keyword">delete</font> context; context = c; context-&gt;ref(); }
00047     QBidiContext *context;
00048     QBidiStatus status;
00049 };
00050 
00051 <font class="keyword">struct </font>Q_EXPORT QTextRun {
00052     QTextRun(<font class="keywordtype">int</font> _start, <font class="keywordtype">int</font> _stop, QBidiContext *context, QChar::Direction dir) {
00053     start = _start;
00054     stop = _stop;
00055     <font class="keywordflow">if</font>(dir == QChar::DirON) dir = context-&gt;dir;
00056 
00057     level = context-&gt;level;
00058 
00059     <font class="comment">// add level of run (cases I1 &amp; I2)</font>
00060     <font class="keywordflow">if</font>( level % 2 ) {
00061         <font class="keywordflow">if</font>(dir == QChar::DirL || dir == QChar::DirAN)
00062         level++;
00063     } <font class="keywordflow">else</font> {
00064         <font class="keywordflow">if</font>( dir == QChar::DirR )
00065         level++;
00066         <font class="keywordflow">else</font> <font class="keywordflow">if</font>( dir == QChar::DirAN )
00067         level += 2;
00068     }
00069     <font class="comment">//printf("new run: level = %d\n", level);</font>
00070     }
00071 
00072     <font class="keywordtype">int</font> start;
00073     <font class="keywordtype">int</font> stop;
00074     <font class="comment">// explicit + implicit levels here</font>
00075     uchar level;
00076 };
00077 
00078 <font class="keyword">class </font>Q_EXPORT QComplexText {
00079 <font class="keyword">public</font>:
00080     <font class="keyword">enum</font> Shape {
00081         XIsolated,
00082         XFinal,
00083         XInitial,
00084         XMedial
00085     };
00086     <font class="keyword">static</font> Shape glyphVariant( <font class="keyword">const</font> QString &amp;str, <font class="keywordtype">int</font> pos);
00087     <font class="keyword">static</font> Shape glyphVariantLogical( <font class="keyword">const</font> QString &amp;str, <font class="keywordtype">int</font> pos);
00088 
00089     <font class="comment">//QT2HACK</font>
00090     <font class="comment">//static QString shapedString( const QString &amp;str, int from = 0, int len = -1, QPainter::TextDirection dir = QPainter::Auto);</font>
00091     <font class="keyword">static</font> QChar shapedCharacter(<font class="keyword">const</font> QString &amp;str, <font class="keywordtype">int</font> pos);
00092 
00093     <font class="comment">// positions non spacing marks relative to the base character at position pos.</font>
00094     <font class="keyword">static</font> QPointArray positionMarks( QFontPrivate *f, <font class="keyword">const</font> QString &amp;str, <font class="keywordtype">int</font> pos, QRect *boundingRect = 0 );
00095 
00096     <font class="keyword">static</font> QList&lt;QTextRun&gt; *bidiReorderLine( QBidiControl *control, <font class="keyword">const</font> QString &amp;str, <font class="keywordtype">int</font> start, <font class="keywordtype">int</font> len );
00097     <font class="keyword">static</font> QString bidiReorderString( <font class="keyword">const</font> QString &amp;str, QChar::Direction basicDir = QChar::DirON );
00098 };
00099 
00100 }; <font class="comment">// namespace</font>
00101 
00102 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:47 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
