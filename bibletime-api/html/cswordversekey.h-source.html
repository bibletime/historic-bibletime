<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>cswordversekey.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.1.5 on Wed Apr 18 13:49:31 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cswordversekey.h</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************
</font>00002 <font class="comment">                          cswordversekey.h  -  description
</font>00003 <font class="comment">                             -------------------
</font>00004 <font class="comment">    begin                : Thu Oct 5 2000
</font>00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team
</font>00006 <font class="comment">    email                : info@bibletime.de
</font>00007 <font class="comment"> ***************************************************************************
</font>00008 <font class="comment">
</font>00009 <font class="comment"> ***************************************************************************
</font>00010 <font class="comment"> *                                                                         *
</font>00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *
</font>00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *
</font>00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *
</font>00014 <font class="comment"> *   (at your option) any later version.                                   *
</font>00015 <font class="comment"> *                                                                         *
</font>00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="preprocessor">#ifndef CSWORDVERSEKEY_H
</font>00019 <font class="preprocessor"></font><font class="preprocessor">#define CSWORDVERSEKEY_H
</font>00020 <font class="preprocessor"></font>
00021 <font class="comment">//own includes</font>
00022 <font class="preprocessor">#include "../ckey.h"</font>
00023 <font class="preprocessor">#include "cswordmoduleinfo.h"</font>
00024 
00025 <font class="comment">//Qt includes</font>
00026 <font class="preprocessor">#include &lt;qstring.h&gt;</font>
00027 
00028 <font class="comment">//Sword includes</font>
00029 <font class="preprocessor">#include &lt;versekey.h&gt;</font>
00030 
<a name="l00052"></a><a class="code" href="class_cswordversekey.html">00052</a> <font class="keyword">class </font><a class="code" href="class_cswordversekey.html">CSwordVerseKey</a> :  <font class="keyword">public</font> VerseKey, <font class="keyword">public</font> <a class="code" href="class_ckey.html">CKey</a>  {
00053 <font class="keyword">public</font>: 
00064     <a class="code" href="class_cswordversekey.html#a0">CSwordVerseKey</a>( <a class="code" href="class_cswordmoduleinfo.html">CSwordModuleInfo</a>* module );
00071     <a class="code" href="class_cswordversekey.html#a1">~CSwordVerseKey</a>();
00077   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a2">setKey</a>( QString key );
00084   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a3">NextVerse</a>();
00091   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a4">PreviousVerse</a>();
00098   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a5">NextChapter</a>();
00104   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a6">PreviousChapter</a>();
00111   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a7">NextBook</a>();
00118   <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a8">PreviousBook</a>();
00125   <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a9">getBook</a>() <font class="keyword">const</font>;
00132   <font class="keywordtype">void</font> <a class="code" href="class_cswordversekey.html#a10">setBook</a>(<font class="keyword">const</font> QString newBook);
00136   <font class="keywordtype">void</font> <a class="code" href="class_cswordversekey.html#a11">setModule</a>( <a class="code" href="class_cswordmoduleinfo.html">CSwordModuleInfo</a>* module );
00140   <font class="keywordtype">void</font> <a class="code" href="class_cswordversekey.html#a2">setKey</a>( VerseKey&amp; key );
00144   <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a13">getKey</a>() <font class="keyword">const</font>;
00148   <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a14">getStrippedText</a>() <font class="keyword">const</font>;
00152   <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a15">getRenderedText</a>() <font class="keyword">const</font>;
00153 <font class="keyword">private</font>:
<a name="l00157"></a><a class="code" href="class_cswordversekey.html#o0">00157</a>   <a class="code" href="class_cswordmoduleinfo.html">CSwordModuleInfo</a>* m_module;
00158 };
00159 
00160 
<a name="l00162"></a><a class="code" href="class_cswordversekey.html#a2">00162</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a2">CSwordVerseKey::setKey</a>( QString key )<font class="keyword"></font>{    
00163     error = 0;  
00164     VerseKey::operator = ((<font class="keyword">const</font> <font class="keywordtype">char</font>*)key.local8Bit());        
00165     <font class="comment">//clear data</font>
00166     <font class="keywordflow">return</font> !(<font class="keywordtype">bool</font>)error;
00167 }
00168 
<a name="l00170"></a><a class="code" href="class_cswordversekey.html#a3">00170</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a3">CSwordVerseKey::NextVerse</a>()<font class="keyword"></font>{  
00171     <font class="keywordflow">if</font> (m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a21">getType</a>() == CSwordModuleInfo::Commentary) {
00172         m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>()-&gt;SetKey(*this-&gt;clone()); <font class="comment">//use this key as base for the next one!</font>
00173         ( *( m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>() ) )++;
00174         <a class="code" href="class_cswordversekey.html#a2">setKey</a>(m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>()-&gt;KeyText());      
00175     }
00176     <font class="keywordflow">else</font> {
00177         Verse(Verse()+1);
00178     }   
00179     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00180 }
00181 
<a name="l00183"></a><a class="code" href="class_cswordversekey.html#a4">00183</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a4">CSwordVerseKey::PreviousVerse</a>()<font class="keyword"></font>{
00184     <font class="keywordflow">if</font> (m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a21">getType</a>() == CSwordModuleInfo::Commentary) {
00185         
00186         m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>()-&gt;SetKey(*this-&gt;clone()); <font class="comment">//use this key as base for the next one!        </font>
00187         ( *( m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>() ) )--;
00188         <a class="code" href="class_cswordversekey.html#a2">setKey</a>(m_module-&gt;<a class="code" href="class_cswordmoduleinfo.html#a3">module</a>()-&gt;KeyText());      
00189     }
00190     <font class="keywordflow">else</font> {
00191         Verse(Verse()-1);
00192     }   
00193     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00194 }
00195 
<a name="l00197"></a><a class="code" href="class_cswordversekey.html#a5">00197</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a5">CSwordVerseKey::NextChapter</a>()<font class="keyword"></font>{
00198 <font class="comment">//#warning Implement some special thing for commentaries    </font>
00199 <font class="comment">//  if (Chapter()&lt;0)</font>
00200 <font class="comment">//      return false;       </font>
00201     Chapter(Chapter()+1);   
00202     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00203 }
00204 
<a name="l00206"></a><a class="code" href="class_cswordversekey.html#a6">00206</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a6">CSwordVerseKey::PreviousChapter</a>()<font class="keyword"></font>{
00207 <font class="comment">//#warning Implement some special thing for commentaries        </font>
00208 <font class="comment">//  if (Chapter()&lt;=0)</font>
00209 <font class="comment">//      return false;   </font>
00210     Chapter(Chapter()-1);
00211     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00212 }
00213 
<a name="l00215"></a><a class="code" href="class_cswordversekey.html#a7">00215</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a7">CSwordVerseKey::NextBook</a>()<font class="keyword"></font>{
00216 <font class="comment">//#warning Implement some special thing for commentaries                    </font>
00217     <font class="keywordflow">if</font> (Book() &lt;= 0 || Book() &gt;= BMAX[Testament()-1] &amp;&amp; Testament() &gt; 1)
00218         <font class="keywordflow">return</font> <font class="keyword">false</font>;   
00219     
00220     Book(Book()+1);         
00221     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00222 }
00223 
<a name="l00225"></a><a class="code" href="class_cswordversekey.html#a8">00225</a> <font class="keyword">inline</font> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_cswordversekey.html#a8">CSwordVerseKey::PreviousBook</a>()<font class="keyword"></font>{
00226 <font class="comment">//#warning Implement some special thing for commentaries        </font>
00227     <font class="keywordflow">if</font> (Book()&lt;=1 || Book() &gt; BMAX[Testament()-1] &amp;&amp; Testament() &gt; 1)
00228         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00229     Book(Book()-1);
00230     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00231 }
00232 
<a name="l00234"></a><a class="code" href="class_cswordversekey.html#a9">00234</a> <font class="keyword">inline</font> <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a9">CSwordVerseKey::getBook</a>()<font class="keyword"> const </font>{
00235     QString book = QString::null;
00236     <font class="keywordflow">if</font> ( Testament() &amp;&amp; Book() &lt;= BMAX[Testament()-1] )
00237         book = QString::fromLocal8Bit( books[Testament()-1][Book()-1].name );
00238     <font class="keywordflow">else</font>
00239         book = QString::fromLocal8Bit(books[0][0].name);
00240     <font class="keywordflow">return</font> book;
00241 }
00242 
<a name="l00244"></a><a class="code" href="class_cswordversekey.html#a10">00244</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_cswordversekey.html#a10">CSwordVerseKey::setBook</a>( <font class="keyword">const</font> QString newBook )<font class="keyword"> </font>{
00245     <font class="keywordflow">if</font>(!<a class="code" href="class_cswordversekey.html#a2">setKey</a>(QString(<font class="stringliteral">"%1 %2:%3"</font>).arg(newBook).arg((<font class="keywordtype">int</font>)Chapter()).arg((<font class="keywordtype">int</font>)Verse())))
00246         qWarning(<font class="stringliteral">"Invalid key!"</font>);
00247 }
00248 
00249 
00250 
<a name="l00252"></a><a class="code" href="class_cswordversekey.html#a13">00252</a> <font class="keyword">inline</font> <font class="keyword">const</font> QString <a class="code" href="class_cswordversekey.html#a13">CSwordVerseKey::getKey</a>()<font class="keyword"> const </font>{
00253     <font class="keywordflow">return</font> QString::fromLocal8Bit((<font class="keyword">const</font> <font class="keywordtype">char</font>*)*<font class="keyword">this</font>);
00254 }
00255 
<a name="l00257"></a><a class="code" href="class_cswordversekey.html#a12">00257</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_cswordversekey.html#a2">CSwordVerseKey::setKey</a>( VerseKey&amp; key )<font class="keyword"></font>{
00258     <a class="code" href="class_cswordversekey.html#a2">setKey</a>(QString::fromLocal8Bit((<font class="keyword">const</font> <font class="keywordtype">char</font>*)key));
00259 }
00260 
00261 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Wed Apr 18 13:49:31 2001 for BibleTime by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=110 height=53></a>1.1.5 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-2000</small></address>
</body>
</html>
