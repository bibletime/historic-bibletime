<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>scoped_resource.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>scoped_resource.h</h1><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef SCOPED_RESOURCE_H_INCLUDED</font>
00002 <font class="preprocessor"></font><font class="preprocessor">#define SCOPED_RESOURCE_H_INCLUDED</font>
00003 <font class="preprocessor"></font>
<a name="l00009"></a><a class="code" href="namespaceutil.html">00009</a> <font class="keyword">namespace </font>util
00010 {
00039 <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T,<font class="keyword">typename</font> ReleasePolicy&gt;
<a name="l00040"></a><a class="code" href="classutil_1_1scoped__resource.html">00040</a> <font class="keyword">class </font>scoped_resource
00041 {
00042     T resource;
00043     ReleasePolicy release;
00044     
00045     <font class="comment">//prohibited operations</font>
00046     <a class="code" href="classutil_1_1scoped__resource.html#a0">scoped_resource</a>(<font class="keyword">const</font> scoped_resource&amp;);
00047     scoped_resource&amp; operator=(<font class="keyword">const</font> scoped_resource&amp;);
00048 <font class="keyword">public</font>:
00049     <font class="keyword">typedef</font> T resource_type;
00050     <font class="keyword">typedef</font> ReleasePolicy release_type;
00051     
<a name="l00058"></a><a class="code" href="classutil_1_1scoped__resource.html#a0">00058</a>     <font class="keyword">explicit</font> <a class="code" href="classutil_1_1scoped__resource.html#a0">scoped_resource</a>(resource_type res,release_type rel=release_type())
00059             : resource(res), release(rel) {}
00060 
<a name="l00065"></a><a class="code" href="classutil_1_1scoped__resource.html#a1">00065</a>     <a class="code" href="classutil_1_1scoped__resource.html#a1">~scoped_resource</a>()
00066     {
00067         release(resource);
00068     }
00069 
<a name="l00076"></a><a class="code" href="classutil_1_1scoped__resource.html#a2">00076</a>     <a class="code" href="classutil_1_1scoped__resource.html#a2">operator resource_type</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> resource; }
00077 
<a name="l00084"></a><a class="code" href="classutil_1_1scoped__resource.html#a3">00084</a>   resource_type <a class="code" href="classutil_1_1scoped__resource.html#a3">get</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> resource; }
00085 
<a name="l00091"></a><a class="code" href="classutil_1_1scoped__resource.html#a4">00091</a>     resource_type <a class="code" href="classutil_1_1scoped__resource.html#a4">operator-&gt;</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> resource; }
00092 
00093 };
00094 
<a name="l00099"></a><a class="code" href="structutil_1_1delete__item.html">00099</a> <font class="keyword">struct </font>delete_item {
00100     <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt;
00101     <font class="keywordtype">void</font> operator()(T*&amp; p)<font class="keyword"> const </font>{ <font class="keyword">delete</font> p; p = 0; }
00102 };
<a name="l00107"></a><a class="code" href="structutil_1_1delete__array.html">00107</a> <font class="keyword">struct </font>delete_array {
00108     <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt;
00109     <font class="keywordtype">void</font> operator()(T*&amp; p)<font class="keyword"> const </font>{ <font class="keyword">delete</font> [] p; p = 0; }
00110 };
00111 
00133 <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt;
<a name="l00134"></a><a class="code" href="structutil_1_1scoped__ptr.html">00134</a> <font class="keyword">struct </font>scoped_ptr : <font class="keyword">public</font> scoped_resource&lt;T*,delete_item&gt;
00135 {
00136     <font class="keyword">explicit</font> scoped_ptr(T* p) : scoped_resource&lt;T*,delete_item&gt;(p) {}
00137 };
00138 
00152 <font class="keyword">template</font>&lt;<font class="keyword">typename</font> T&gt;
<a name="l00153"></a><a class="code" href="structutil_1_1scoped__array.html">00153</a> <font class="keyword">struct </font>scoped_array : <font class="keyword">public</font> scoped_resource&lt;T*,delete_array&gt;
00154 {
00155     <font class="keyword">explicit</font> scoped_array(T* p) : scoped_resource&lt;T*,delete_array&gt;(p) {}
00156 };
00157 
00158 }
00159 
00160 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:50 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
