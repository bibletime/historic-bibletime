<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>bibletime_init.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>bibletime_init.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          bibletime_init.cpp  -  functions to initialize BibleTime on startup</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Wed Jan 19 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime Team</font>
00006 <font class="comment">    email                : Info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "printing/cprinter.h"</font>
00020 <font class="preprocessor">#include "frontend/cmdiarea.h"</font>
00021 <font class="preprocessor">#include "frontend/kstartuplogo.h"</font>
00022 <font class="preprocessor">#include "frontend/groupmanager/cgroupmanager.h"</font>
00023 <font class="preprocessor">#include "bibletime.h"</font>
00024 <font class="preprocessor">#include "resource.h"</font>
00025 <font class="preprocessor">#include "frontend/chtmldialog.h"</font>
00026 <font class="preprocessor">#include "frontend/cprofilemgr.h"</font>
00027 <font class="preprocessor">#include "frontend/cprofile.h"</font>
00028 <font class="preprocessor">#include "backend/cswordbackend.h"</font>
00029 <font class="preprocessor">#include "whatsthisdef.h"</font>
00030 <font class="preprocessor">#include "config.h"</font>
00031 <font class="preprocessor">#include "frontend/cbtconfig.h"</font>
00032 
00033 
00034 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00035 
00036 <font class="comment">//QT includes</font>
00037 <font class="preprocessor">#include &lt;qpopupmenu.h&gt;</font>
00038 <font class="preprocessor">#include &lt;qsplitter.h&gt;</font>
00039 <font class="preprocessor">#include &lt;qguardedptr.h&gt;</font>
00040 <font class="preprocessor">#include &lt;qlistview.h&gt;</font>
00041 
00042 <font class="comment">//KDE includes</font>
00043 <font class="preprocessor">#include &lt;kaboutdata.h&gt;</font>
00044 <font class="preprocessor">#include &lt;kconfigbase.h&gt;</font>
00045 <font class="preprocessor">#include &lt;ktoolbar.h&gt;</font>
00046 <font class="preprocessor">#include &lt;kiconloader.h&gt;</font>
00047 <font class="preprocessor">#include &lt;kstddirs.h&gt;</font>
00048 <font class="preprocessor">#include &lt;kstdaction.h&gt;</font>
00049 <font class="preprocessor">#include &lt;kmenubar.h&gt;</font>
00050 <font class="preprocessor">#include &lt;kaccel.h&gt;</font>
00051 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00052 <font class="preprocessor">#include &lt;kaction.h&gt;</font>
00053 <font class="preprocessor">#include &lt;khelpmenu.h&gt;</font>
00054 <font class="preprocessor">#include &lt;kglobal.h&gt;</font>
00055 <font class="preprocessor">#include &lt;kpopupmenu.h&gt;</font>
00056 
<a name="l00058"></a><a class="code" href="class_bible_time.html#b0">00058</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b0">BibleTime::initView</a>(){
00059     qDebug(<font class="stringliteral">"BibleTime::initView"</font>);
00060     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Creating BibleTime's GUI"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));  
00061     m_splitter = <font class="keyword">new</font> QSplitter(<font class="keyword">this</font>, <font class="stringliteral">"mainsplitter"</font>);
00062     
00063     m_groupmanager = <font class="keyword">new</font> <a class="code" href="class_c_group_manager.html">CGroupManager</a>( m_splitter, <font class="stringliteral">"groupmanager"</font>, <a class="code" href="class_bible_time.html#n20">m_moduleList</a> );
00064     m_groupmanager-&gt;setFocusPolicy(ClickFocus);
00065 
00066     m_mdi = <font class="keyword">new</font> <a class="code" href="class_c_m_d_i_area.html">CMDIArea</a>(m_splitter, <font class="stringliteral">"mdiarea"</font> );
00067     m_mdi-&gt;setFocusPolicy(ClickFocus);
00068 
00069     m_helpMenu = <font class="keyword">new</font> KHelpMenu(<font class="keyword">this</font>, KGlobal::instance()-&gt;aboutData(), <font class="keyword">true</font>, actionCollection());
00070 
00071     setCentralWidget(m_splitter);   
00072 }
00073 
00074 
<a name="l00076"></a><a class="code" href="class_bible_time.html#b4">00076</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b4">BibleTime::initActions</a>() {
00077     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing menu- and toolbars"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));
00078 
00079     KAction* action = 0;
00080         
00081     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a> = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Clear printing queue"</font>), ICON_FILE_CLEAR_QUEUE ,0,
00082         m_printer, SLOT(clearQueue()), actionCollection(), <font class="stringliteral">"fileClearQueue_action"</font>);    
00083     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setEnabled(<font class="keyword">false</font>); 
00084     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setToolTip( TT_FILE_CLEAR_QUEUE );
00085     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setWhatsThis( WT_FILE_CLEAR_QUEUE );
00086     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;plugAccel( m_keyAccel );   
00087     
00088     m_filePrint_action = KStdAction::print(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h10">slotFilePrint</a>() ), actionCollection());
00089     m_filePrint_action-&gt;setEnabled(<font class="keyword">false</font>);      
00090     m_filePrint_action-&gt;setToolTip( TT_FILE_PRINT );    
00091     m_filePrint_action-&gt;setWhatsThis( WT_FILE_PRINT );
00092     m_filePrint_action-&gt;plugAccel( m_keyAccel );    
00093     
00094     action = KStdAction::quit(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h0">slotFileQuit</a>() ), actionCollection());
00095     action-&gt;setToolTip( TT_FILE_QUIT ); 
00096     action-&gt;setWhatsThis( WT_FILE_QUIT );
00097     action-&gt;plugAccel( m_keyAccel );
00098                                                 
00099     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Reset main index"</font>), ICON_MAININDEX_RESET, IDK_GM_RESET,
00100         m_groupmanager, SLOT(slotReset()), actionCollection(), <font class="stringliteral">"GMreset_action"</font>);   
00101     action-&gt;setToolTip( TT_GM_RESET );          
00102     action-&gt;setWhatsThis( WT_GM_RESET );        
00103     action-&gt;plugAccel( m_keyAccel );
00104     
00105     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Search in module(s)"</font>), ICON_MAININDEX_SEARCH, IDK_GM_MODULES_SEARCH,
00106         m_groupmanager, SLOT(slotSearchSelectedModules()), actionCollection(), <font class="stringliteral">"GMsearch_action"</font>);  
00107   action-&gt;setToolTip( TT_GM_SEARCH_MODULES );
00108   action-&gt;setWhatsThis( WT_GM_SEARCH_MODULES );
00109     action-&gt;plugAccel( m_keyAccel );
00110     
00111     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Remove selected item(s)"</font>),ICON_MAININDEX_DELETE_ITEMS, IDK_GM_ITEMS_DELETE,
00112         m_groupmanager, SLOT(slotDeleteSelectedItems()), actionCollection(), <font class="stringliteral">"GMdelete_action"</font>);    
00113     action-&gt;setToolTip( TT_GM_DELETE_ITEMS );   
00114     action-&gt;setWhatsThis( WT_GM_DELETE_ITEMS );
00115     action-&gt;plugAccel( m_keyAccel );
00116 
00117     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a> = KStdAction::showToolbar(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h7">slotToggleToolbar</a>() ), actionCollection());
00118     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;setToolTip( TT_VIEW_TOOLBAR );    
00119     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;setWhatsThis( WT_VIEW_TOOLBAR );
00120     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;plugAccel( m_keyAccel );
00121 
00122     m_viewGroupManager_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Show main index"</font>), ICON_VIEW_MAININDEX, IDK_VIEW_GROUPMANAGER,
00123         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h9">slotToggleGroupManager</a>()), actionCollection(), <font class="stringliteral">"viewGroupManager_action"</font>);
00124     m_viewGroupManager_action-&gt;setToolTip( TT_VIEW_GROUPMANAGER );  
00125     m_viewGroupManager_action-&gt;setWhatsThis( WT_VIEW_GROUPMANAGER );
00126     
00127     action = KStdAction::preferences(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#g1">slotSettingsOptions</a>() ), actionCollection());
00128     action-&gt;setToolTip( TT_SETTINGS_OPTIONS );
00129     action-&gt;setWhatsThis( WT_SETTINGS_OPTIONS );
00130     action-&gt;plugAccel( m_keyAccel );
00131 
00132     action = KStdAction::configureToolbars(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h8">slotSettingsToolbar</a>() ), actionCollection());
00133     action-&gt;setToolTip( TT_SETTINGS_EDIT_TOOLBAR ); 
00134     action-&gt;setWhatsThis( WT_SETTINGS_EDIT_TOOLBAR );
00135     action-&gt;plugAccel( m_keyAccel );
00136 
00137     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a> = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Cascade"</font>), ICON_WINDOW_CASCADE, IDK_WINDOW_CASCADE,
00138         m_mdi, SLOT(cascade()), actionCollection(), <font class="stringliteral">"windowCascade_action"</font>);
00139     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;setToolTip( TT_WINDOW_CASCADE );    
00140     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;setWhatsThis( WT_WINDOW_CASCADE );
00141     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;plugAccel( m_keyAccel); 
00142     
00143     m_windowTile_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Tile"</font>), ICON_WINDOW_TILE,
00144                                                                 IDK_WINDOW_TILE, m_mdi, SLOT(tile()), actionCollection(), <font class="stringliteral">"windowTile_action"</font>);
00145     m_windowTile_action-&gt;setToolTip( TT_WINDOW_TILE );  
00146     m_windowTile_action-&gt;setWhatsThis( WT_WINDOW_TILE );
00147     m_windowTile_action-&gt;plugAccel( m_keyAccel );   
00148     
00149     m_windowAutoCascade_action  = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Auto cascade"</font>), ICON_WINDOW_CASCADE_AUTO,
00150                                                                 IDK_WINDOW_AUTO_CASCADE, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h5">slotAutoCascade</a>()), actionCollection(), <font class="stringliteral">"windowAutoCascade_action"</font>);
00151     m_windowAutoCascade_action-&gt;setToolTip( TT_WINDOW_AUTO_CASCADE );   
00152     m_windowAutoCascade_action-&gt;setWhatsThis( WT_WINDOW_AUTO_CASCADE );
00153     m_windowAutoCascade_action-&gt;plugAccel( m_keyAccel );    
00154                                                                     
00155     m_windowAutoTile_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"A&amp;uto Tile"</font>),ICON_WINDOW_TILE_AUTO,
00156                                                                 IDK_WINDOW_AUTO_TILE, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h4">slotAutoTile</a>()), actionCollection(), <font class="stringliteral">"windowAutoTile_action"</font>);
00157     m_windowAutoTile_action-&gt;setToolTip( TT_WINDOW_AUTO_TILE ); 
00158     m_windowAutoTile_action-&gt;setWhatsThis( WT_WINDOW_AUTO_TILE );
00159     m_windowAutoTile_action-&gt;plugAccel( m_keyAccel );   
00160     
00161     m_windowCloseAll_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Close all"</font>), ICON_WINDOW_CLOSE_ALL,
00162                                                                 IDK_WINDOW_CLOSE_ALL, m_mdi, SLOT(deleteAll()), actionCollection(),<font class="stringliteral">"windowCloseAll_action"</font>);
00163     m_windowCloseAll_action-&gt;setToolTip( TT_WINDOW_CLOSE_ALL ); 
00164     m_windowCloseAll_action-&gt;setWhatsThis( WT_WINDOW_CLOSE_ALL );
00165     m_windowCloseAll_action-&gt;plugAccel( m_keyAccel );   
00166     
00167     m_windowSaveProfile_action = <font class="keyword">new</font> KActionMenu(i18n(<font class="stringliteral">"&amp;Save profile"</font>), ICON_WINDOW_SAVE_PROFILE, actionCollection(),<font class="stringliteral">"windowSaveProfile_action"</font>);
00168     m_windowSaveProfile_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );   
00169     m_windowSaveProfile_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00170     m_windowSaveProfile_action-&gt;plugAccel( m_keyAccel );    
00171 
00172     m_windowLoadProfile_action = <font class="keyword">new</font> KActionMenu(i18n(<font class="stringliteral">"&amp;Load profile"</font>), ICON_WINDOW_SAVE_PROFILE, actionCollection(),<font class="stringliteral">"windowLoadProfile_action"</font>);
00173     m_windowLoadProfile_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );   
00174     m_windowLoadProfile_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00175     m_windowLoadProfile_action-&gt;plugAccel( m_keyAccel );
00176 
00177     m_windowEditProfiles_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Configure profiles"</font>), ICON_WINDOW_EDIT_PROFILES,
00178                                                                 IDK_WINDOW_EDIT_PROFILES, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h14">editProfiles</a>()), actionCollection(),<font class="stringliteral">"windowEditProfiles_action"</font>);
00179     m_windowEditProfiles_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );  
00180     m_windowEditProfiles_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00181     m_windowEditProfiles_action-&gt;plugAccel( m_keyAccel );   
00182 
00183     m_windowFullscreen_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Fullscreen mode"</font>), ICON_WINDOW_FULLSCREEN,
00184                                                                 IDK_WINDOW_FULLSCREEN, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>()), actionCollection(),<font class="stringliteral">"windowFullscreen_action"</font>);
00185     m_windowFullscreen_action-&gt;setToolTip( TT_WINDOW_FULLSCREEN );  
00186     m_windowFullscreen_action-&gt;setWhatsThis( WT_WINDOW_FULLSCREEN );
00187     m_windowFullscreen_action-&gt;plugAccel( m_keyAccel );         
00188         
00189     QList&lt;CProfile&gt; profiles = m_profileMgr.<a class="code" href="class_c_profile_mgr.html#a3">profiles</a>();     
00190     KPopupMenu* loadPopup = m_windowLoadProfile_action-&gt;popupMenu();
00191     KPopupMenu* savePopup = m_windowSaveProfile_action-&gt;popupMenu();    
00192     connect(loadPopup, SIGNAL(activated(<font class="keywordtype">int</font>)), SLOT(<a class="code" href="class_bible_time.html#h15">loadProfile</a>(<font class="keywordtype">int</font>)));
00193     connect(savePopup, SIGNAL(activated(<font class="keywordtype">int</font>)), SLOT(<a class="code" href="class_bible_time.html#h12">saveProfile</a>(<font class="keywordtype">int</font>)));
00194     <font class="keywordflow">for</font> (<a class="code" href="class_c_profile.html">CProfile</a>* p = profiles.first(); p; p = profiles.next()) {
00195         savePopup-&gt;insertItem(p-&gt;<a class="code" href="class_c_profile.html#a5">name</a>());           
00196         loadPopup-&gt;insertItem(p-&gt;<a class="code" href="class_c_profile.html#a5">name</a>());
00197     }
00198     
00199     <font class="keywordflow">if</font> ( actionCollection()-&gt;action(<font class="stringliteral">"help_contents"</font>) )   <font class="comment">//delete help action if KDE created it</font>
00200         actionCollection()-&gt;remove(actionCollection()-&gt;action(<font class="stringliteral">"help_contents"</font>));
00201         
00202     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Handbook"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00203         SLOT(<a class="code" href="class_bible_time.html#g3">openOnlineHelp_Handbook</a>()), actionCollection(), <font class="stringliteral">"help_handbook"</font>);
00204   action-&gt;setToolTip( TT_HELP_HANDBOOK );
00205   action-&gt;setWhatsThis( WT_HELP_HANDBOOK  );
00206     action-&gt;plugAccel( m_keyAccel );
00207 
00208     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Installation"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00209         SLOT(<a class="code" href="class_bible_time.html#g4">openOnlineHelp_Install</a>()), actionCollection(), <font class="stringliteral">"help_install"</font>);
00210   action-&gt;setToolTip( TT_HELP_INSTALLATION );
00211   action-&gt;setWhatsThis( WT_HELP_INSTALLATION  );
00212     action-&gt;plugAccel( m_keyAccel );
00213 
00214     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Bible Study Howto"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00215         SLOT(<a class="code" href="class_bible_time.html#g5">openOnlineHelp_Howto</a>()), actionCollection(), <font class="stringliteral">"help_howto"</font>);
00216   action-&gt;setToolTip( TT_HELP_BIBLESTUDY );
00217   action-&gt;setWhatsThis( WT_HELP_BIBLESTUDY  );
00218     action-&gt;plugAccel( m_keyAccel );
00219 
00220     action = KStdAction::whatsThis(<font class="keyword">this</font>, SLOT(whatsThis()), actionCollection());
00221     action-&gt;setToolTip(TT_HELP_WHATSTHIS);
00222     action-&gt;setWhatsThis(WT_HELP_WHATSTHIS);    
00223     
00224     action = KStdAction::reportBug(m_helpMenu, SLOT(reportBug()), actionCollection());  
00225     action-&gt;setToolTip(TT_HELP_BUGREPORT);
00226     action-&gt;setWhatsThis(WT_HELP_BUGREPORT);
00227     action-&gt;setIcon(ICON_BUG_REPORT);
00228     
00229     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Daily tip"</font>), ICON_HELP_DAILY_TIP, IDK_HELP_DAILY_TIP, <font class="keyword">this</font>,
00230         SLOT(<a class="code" href="class_bible_time.html#g0">slotHelpTipOfDay</a>()), actionCollection(), <font class="stringliteral">"helpDailyTip_action"</font>);
00231     action-&gt;setToolTip(TT_HELP_DAILY_TIP);
00232     action-&gt;setWhatsThis(WT_HELP_DAILY_TIP);    
00233 
00234     action = KStdAction::aboutApp(m_helpMenu, SLOT(aboutApplication()), actionCollection());    
00235     action-&gt;setToolTip(TT_HELP_ABOUT);
00236     action-&gt;setWhatsThis(WT_HELP_ABOUT);    
00237     
00238     <font class="comment">//delete About KDE action if KDE created it already</font>
00239     <font class="keywordflow">if</font> ( actionCollection()-&gt;action(<font class="stringliteral">"help_about_kde"</font>) )  <font class="comment">//delete About KDE action if KDE created it</font>
00240         actionCollection()-&gt;remove(actionCollection()-&gt;action(<font class="stringliteral">"help_about_kde"</font>));   
00241     action = KStdAction::aboutKDE(m_helpMenu, SLOT(aboutKDE()), actionCollection());    
00242     action-&gt;setToolTip(TT_HELP_ABOUT_KDE);
00243     action-&gt;setWhatsThis(WT_HELP_ABOUT_KDE);    
00244 }
00245 
<a name="l00247"></a><a class="code" href="class_bible_time.html#b1">00247</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b1">BibleTime::initMenubar</a>(){
00248     <font class="comment">//get the window and edit menus using the actions and their properties</font>
00249     m_windowMenu = dynamic_cast&lt;QPopupMenu*&gt;(m_windowTile_action-&gt;container(0));    
00250 <font class="comment">//  if ( m_windowTile_action-&gt;container(0) &amp;&amp; m_windowTile_action-&gt;container(0)-&gt;inherits("QPopupMenu") )</font>
00251 <font class="comment">//      m_windowMenu = dynamic_cast&lt;QPopupMenu*&gt;(m_windowTile_action-&gt;container(0));</font>
00252 <font class="comment">//  else</font>
00253 <font class="comment">//      m_windowMenu = 0;</font>
00254 }
00255 
<a name="l00257"></a><a class="code" href="class_bible_time.html#b2">00257</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b2">BibleTime::initConnections</a>(){
00258 <font class="comment">//  KStartupLogo::setStatusMessage(i18n("Initializing menu items") + QString::fromLatin1("..."));</font>
00259     connect(m_mdi, SIGNAL(sigSetToplevelCaption(<font class="keyword">const</font> QString&amp;)),
00260         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#g6">setPlainCaption</a>(<font class="keyword">const</font> QString&amp;)));
00261     connect(m_mdi, SIGNAL(<a class="code" href="class_bible_time.html#h1">createNewSwordPresenter</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*, <font class="keyword">const</font> QString&amp;)),
00262         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createNewSwordPresenter</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*, <font class="keyword">const</font> QString&amp;)));
00263         
00264     <font class="keywordflow">if</font> (m_windowMenu) {
00265         connect(m_windowMenu, SIGNAL(aboutToShow()),
00266             <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h3">slotWindowMenuAboutToShow</a>()));
00267         connect(m_windowMenu, SIGNAL(activated(<font class="keywordtype">int</font>)),
00268             <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h6">slotWindowMenuActivated</a>(<font class="keywordtype">int</font>)));      
00269     }
00270     <font class="keywordflow">else</font>
00271         qWarning(<font class="stringliteral">"can't find window menu"</font>);
00272         
00273     connect(m_groupmanager, SIGNAL(createSwordPresenter(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*, <font class="keyword">const</font> QString&amp;)),
00274         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createNewSwordPresenter</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*,<font class="keyword">const</font> QString&amp;)));
00275     connect(m_groupmanager, SIGNAL(createSwordPresenter(ListCSwordModuleInfo, <font class="keyword">const</font> QString&amp;)),
00276         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createNewSwordPresenter</a>(ListCSwordModuleInfo,<font class="keyword">const</font> QString&amp;)));
00277     
00278     <font class="comment">//connect to the signals of the printer object</font>
00279     connect(m_printer, SIGNAL(addedFirstQueueItem()),
00280         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));
00281     connect(m_printer, SIGNAL(printingStarted()),
00282         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i3">slotPrintingStarted</a>()));     
00283     connect(m_printer, SIGNAL(printingFinished()),
00284         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));       
00285     connect(m_printer, SIGNAL(printingFinished()),
00286         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i1">slotPrintingFinished</a>()));                
00287     connect(m_printer, SIGNAL(printingInterrupted()),
00288         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));               
00289     connect(m_printer, SIGNAL(printingInterrupted()),
00290         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i1">slotPrintingFinished</a>()));                        
00291     connect(m_printer, SIGNAL(queueCleared()),
00292         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));
00293     connect(m_printer, SIGNAL(percentCompleted(<font class="keyword">const</font> <font class="keywordtype">int</font>)),
00294         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i0">slotPrintedPercent</a>(<font class="keyword">const</font> <font class="keywordtype">int</font>)));     
00295 }
00296 
<a name="l00298"></a><a class="code" href="class_bible_time.html#b3">00298</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b3">BibleTime::initBackends</a>(){
00299     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing Sword"</font>)+QString::fromLatin1(<font class="stringliteral">"..."</font>));
00300     
00301     m_backend = <font class="keyword">new</font> <a class="code" href="class_c_sword_backend.html">CSwordBackend</a>();    
00302     CPointers::setBackend(m_backend);
00303     m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a9">Load</a>();
00304     <font class="keyword">const</font> CSwordBackend::ErrorCode errorCode = m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a3">initModules</a>();
00305 
00306     <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = 0;       
00307     <font class="keywordflow">if</font> ( errorCode == CSwordBackend::noError ) {    <font class="comment">//no error</font>
00308         <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a2">moduleList</a>();
00309     } <font class="keywordflow">else</font> {
00310         <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = 0;
00311         <font class="comment">//show error message that initBackend failed        </font>
00312         <font class="keywordflow">switch</font> (errorCode) {
00313             <font class="keywordflow">case</font> CSwordBackend::noModulesAvailable:         
00314                 HTML_DIALOG(HELPDIALOG_NO_SWORD_MODULES);
00315                 <font class="keywordflow">break</font>;
00316 <font class="comment">// --- The following pages are not yet available ---</font>
00317 <font class="comment">/*          case CSwordBackend::noSwordConfigFile:</font>
00318 <font class="comment">                HTML_DIALOG(HELPDIALOG_NO_SWORD_CONFIG);</font>
00319 <font class="comment">                break;</font>
00320 <font class="comment">            case CSwordBackend::noSwordModuleDirectory:</font>
00321 <font class="comment">                HTML_DIALOG(HELPDIALOG_NO_SWORD_MODULES_DIR);</font>
00322 <font class="comment">                break;      </font>
00323 <font class="comment">*/</font>
00324             <font class="keywordflow">case</font> CSwordBackend::noSwordModuleConfigDirectory:
00325                 HTML_DIALOG(HELPDIALOG_NO_SWORD_MODULE_CONFIG_DIR);             
00326                 <font class="keywordflow">break</font>;                      
00327             <font class="keywordflow">default</font>:
00328                 HTML_DIALOG(HELPDIALOG_INITBACKEND_FAILED);
00329                 <font class="keywordflow">break</font>;
00330         }
00331     }
00332 
00333     <font class="comment">//initialize international bookname language</font>
00334     <font class="keyword">const</font> QString language = CBTConfig::get(CBTConfig::language);
00335     m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a10">booknameLanguage</a>(language);
00336     ASSERT(<a class="code" href="class_bible_time.html#n20">m_moduleList</a>);
00337 }
00338 
<a name="l00340"></a><a class="code" href="class_bible_time.html#b8">00340</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b8">BibleTime::initPrinter</a>() {
00341     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing printing system"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));
00342     m_printer = <font class="keyword">new</font> CPrinter(<font class="keyword">this</font>);
00343     CPointers::setPrinter(m_printer);
00344 }
00345 
<a name="l00347"></a><a class="code" href="class_bible_time.html#a6">00347</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#a6">BibleTime::applyProfileSettings</a>( <a class="code" href="class_c_profile.html">CProfile</a>* p ){
00348     <font class="keywordflow">if</font> (!p) {
00349         qDebug(<font class="stringliteral">"profile is empty!"</font>);
00350         <font class="keywordflow">return</font>;
00351     }
00352     <font class="keywordflow">if</font> (p-&gt;<a class="code" href="class_c_profile.html#a10">fullscreen</a>()) { <font class="comment">//we can set only fullscreen OR geometry</font>
00353         m_windowFullscreen_action-&gt;setChecked( <font class="keyword">true</font> );
00354         <a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>();
00355     }
00356     <font class="keywordflow">else</font> {
00357         setGeometry( p-&gt;<a class="code" href="class_c_profile.html#a12">geometry</a>() );
00358         m_windowFullscreen_action-&gt;setChecked( <font class="keyword">false</font> );
00359         <a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>();     
00360     }
00361 }
00362 
<a name="l00364"></a><a class="code" href="class_bible_time.html#a7">00364</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#a7">BibleTime::storeProfileSettings</a>( <a class="code" href="class_c_profile.html">CProfile</a>* p ){
00365     ASSERT(p);
00366     p-&gt;<a class="code" href="class_c_profile.html#a9">setFullscreen</a>(m_windowFullscreen_action-&gt;isChecked());
00367     p-&gt;<a class="code" href="class_c_profile.html#a11">setGeometry</a>(geometry());
00368 }
</pre></div><hr><address><small>Generated on Sun Mar 10 22:12:45 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
