<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>bibletime_init.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>bibletime_init.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          bibletime_init.cpp  -  functions to initialize BibleTime on startup</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Wed Jan 19 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime Team</font>
00006 <font class="comment">    email                : Info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "bibletime.h"</font>
00020 <font class="preprocessor">#include "resource.h"</font>
00021 
00022 <font class="preprocessor">#include "backend/cswordbackend.h"</font>
00023 
00024 <font class="preprocessor">#include "frontend/chtmldialog.h"</font>
00025 <font class="preprocessor">#include "frontend/cprofilemgr.h"</font>
00026 <font class="preprocessor">#include "frontend/cprofile.h"</font>
00027 <font class="preprocessor">#include "frontend/cmdiarea.h"</font>
00028 <font class="preprocessor">#include "frontend/kstartuplogo.h"</font>
00029 <font class="preprocessor">#include "frontend/groupmanager/cgroupmanager.h"</font>
00030 <font class="preprocessor">#include "frontend/mainindex/cmainindex.h"</font>
00031 
00032 <font class="preprocessor">#include "printing/cprinter.h"</font>
00033 
00034 <font class="preprocessor">#include "whatsthisdef.h"</font>
00035 <font class="preprocessor">#include "config.h"</font>
00036 <font class="preprocessor">#include "frontend/cbtconfig.h"</font>
00037 
00038 
00039 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00040 
00041 <font class="comment">//QT includes</font>
00042 <font class="preprocessor">#include &lt;qpopupmenu.h&gt;</font>
00043 <font class="preprocessor">#include &lt;qsplitter.h&gt;</font>
00044 <font class="preprocessor">#include &lt;qguardedptr.h&gt;</font>
00045 <font class="preprocessor">#include &lt;qlistview.h&gt;</font>
00046 
00047 <font class="comment">//KDE includes</font>
00048 <font class="preprocessor">#include &lt;kaboutdata.h&gt;</font>
00049 <font class="preprocessor">#include &lt;kconfigbase.h&gt;</font>
00050 <font class="preprocessor">#include &lt;ktoolbar.h&gt;</font>
00051 <font class="preprocessor">#include &lt;kiconloader.h&gt;</font>
00052 <font class="preprocessor">#include &lt;kstddirs.h&gt;</font>
00053 <font class="preprocessor">#include &lt;kstdaction.h&gt;</font>
00054 <font class="preprocessor">#include &lt;kmenubar.h&gt;</font>
00055 <font class="preprocessor">#include &lt;kaccel.h&gt;</font>
00056 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00057 <font class="preprocessor">#include &lt;kaction.h&gt;</font>
00058 <font class="preprocessor">#include &lt;khelpmenu.h&gt;</font>
00059 <font class="preprocessor">#include &lt;kglobal.h&gt;</font>
00060 <font class="preprocessor">#include &lt;kpopupmenu.h&gt;</font>
00061 
<a name="l00063"></a><a class="code" href="class_bible_time.html#b0">00063</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b0">BibleTime::initView</a>(){
00064     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Creating BibleTime's GUI"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));  
00065     
00066     m_splitter = <font class="keyword">new</font> QSplitter(<font class="keyword">this</font>, <font class="stringliteral">"mainsplitter"</font>);
00067     setCentralWidget(m_splitter);   
00068     
00069     m_groupmanager = <font class="keyword">new</font> <a class="code" href="class_c_group_manager.html">CGroupManager</a>( centralWidget(), <font class="stringliteral">"groupmanager"</font>, <a class="code" href="class_bible_time.html#n20">m_moduleList</a> );
00070     m_groupmanager-&gt;setFocusPolicy(ClickFocus);
00071 
00072     m_mainIndex = <font class="keyword">new</font> CMainIndex( centralWidget() );
00073   m_mainIndex-&gt;initTree();
00074     m_mainIndex-&gt;setFocusPolicy(WheelFocus);
00075 
00076     m_mdi = <font class="keyword">new</font> <a class="code" href="class_c_m_d_i_area.html">CMDIArea</a>(centralWidget(), <font class="stringliteral">"mdiarea"</font> );
00077     m_mdi-&gt;setFocusPolicy(ClickFocus);
00078 
00079     m_helpMenu = <font class="keyword">new</font> KHelpMenu(<font class="keyword">this</font>, KGlobal::instance()-&gt;aboutData(), <font class="keyword">true</font>, actionCollection());
00080 }
00081 
00082 
<a name="l00084"></a><a class="code" href="class_bible_time.html#b4">00084</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b4">BibleTime::initActions</a>() {
00085     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing menu- and toolbars"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));
00086 
00087     KAction* action = 0;
00088         
00089     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a> = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Clear printing queue"</font>), ICON_FILE_CLEAR_QUEUE ,0,
00090         m_printer, SLOT(clearQueue()), actionCollection(), <font class="stringliteral">"fileClearQueue_action"</font>);    
00091     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setEnabled(<font class="keyword">false</font>); 
00092     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setToolTip( TT_FILE_CLEAR_QUEUE );
00093     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;setWhatsThis( WT_FILE_CLEAR_QUEUE );
00094     <a class="code" href="class_bible_time.html#n2">m_fileClearQueue_action</a>-&gt;plugAccel( m_keyAccel );   
00095     
00096     m_filePrint_action = KStdAction::print(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h10">slotFilePrint</a>() ), actionCollection());
00097     m_filePrint_action-&gt;setEnabled(<font class="keyword">false</font>);      
00098     m_filePrint_action-&gt;setToolTip( TT_FILE_PRINT );    
00099     m_filePrint_action-&gt;setWhatsThis( WT_FILE_PRINT );
00100     m_filePrint_action-&gt;plugAccel( m_keyAccel );    
00101     
00102     action = KStdAction::quit(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h0">slotFileQuit</a>() ), actionCollection());
00103     action-&gt;setToolTip( TT_FILE_QUIT ); 
00104     action-&gt;setWhatsThis( WT_FILE_QUIT );
00105     action-&gt;plugAccel( m_keyAccel );
00106                                                 
00107     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Reset main index"</font>), ICON_MAININDEX_RESET, IDK_GM_RESET,
00108         m_groupmanager, SLOT(slotReset()), actionCollection(), <font class="stringliteral">"GMreset_action"</font>);   
00109     action-&gt;setToolTip( TT_GM_RESET );          
00110     action-&gt;setWhatsThis( WT_GM_RESET );        
00111     action-&gt;plugAccel( m_keyAccel );
00112     
00113     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Search in module(s)"</font>), ICON_MAININDEX_SEARCH, IDK_GM_MODULES_SEARCH,
00114         m_groupmanager, SLOT(slotSearchSelectedModules()), actionCollection(), <font class="stringliteral">"GMsearch_action"</font>);  
00115   action-&gt;setToolTip( TT_GM_SEARCH_MODULES );
00116   action-&gt;setWhatsThis( WT_GM_SEARCH_MODULES );
00117     action-&gt;plugAccel( m_keyAccel );
00118     
00119     action =  <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"Remove selected item(s)"</font>),ICON_MAININDEX_DELETE_ITEMS, IDK_GM_ITEMS_DELETE,
00120         m_groupmanager, SLOT(slotDeleteSelectedItems()), actionCollection(), <font class="stringliteral">"GMdelete_action"</font>);    
00121     action-&gt;setToolTip( TT_GM_DELETE_ITEMS );   
00122     action-&gt;setWhatsThis( WT_GM_DELETE_ITEMS );
00123     action-&gt;plugAccel( m_keyAccel );
00124 
00125     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a> = KStdAction::showToolbar(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h7">slotToggleToolbar</a>() ), actionCollection());
00126     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;setToolTip( TT_VIEW_TOOLBAR );    
00127     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;setWhatsThis( WT_VIEW_TOOLBAR );
00128     <a class="code" href="class_bible_time.html#n4">m_viewToolbar_action</a>-&gt;plugAccel( m_keyAccel );
00129 
00130     m_viewGroupManager_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Show main index"</font>), ICON_VIEW_MAININDEX, IDK_VIEW_GROUPMANAGER,
00131         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h9">slotToggleGroupManager</a>()), actionCollection(), <font class="stringliteral">"viewGroupManager_action"</font>);
00132     m_viewGroupManager_action-&gt;setToolTip( TT_VIEW_GROUPMANAGER );  
00133     m_viewGroupManager_action-&gt;setWhatsThis( WT_VIEW_GROUPMANAGER );
00134     
00135     action = KStdAction::preferences(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#g1">slotSettingsOptions</a>() ), actionCollection());
00136     action-&gt;setToolTip( TT_SETTINGS_OPTIONS );
00137     action-&gt;setWhatsThis( WT_SETTINGS_OPTIONS );
00138     action-&gt;plugAccel( m_keyAccel );
00139 
00140     action = KStdAction::configureToolbars(<font class="keyword">this</font>, SLOT( <a class="code" href="class_bible_time.html#h8">slotSettingsToolbar</a>() ), actionCollection());
00141     action-&gt;setToolTip( TT_SETTINGS_EDIT_TOOLBAR ); 
00142     action-&gt;setWhatsThis( WT_SETTINGS_EDIT_TOOLBAR );
00143     action-&gt;plugAccel( m_keyAccel );
00144 
00145     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a> = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Cascade"</font>), ICON_WINDOW_CASCADE, IDK_WINDOW_CASCADE,
00146         m_mdi, SLOT(cascade()), actionCollection(), <font class="stringliteral">"windowCascade_action"</font>);
00147     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;setToolTip( TT_WINDOW_CASCADE );    
00148     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;setWhatsThis( WT_WINDOW_CASCADE );
00149     <a class="code" href="class_bible_time.html#n6">m_windowCascade_action</a>-&gt;plugAccel( m_keyAccel); 
00150     
00151     m_windowTile_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Tile"</font>), ICON_WINDOW_TILE,
00152                                                                 IDK_WINDOW_TILE, m_mdi, SLOT(tile()), actionCollection(), <font class="stringliteral">"windowTile_action"</font>);
00153     m_windowTile_action-&gt;setToolTip( TT_WINDOW_TILE );  
00154     m_windowTile_action-&gt;setWhatsThis( WT_WINDOW_TILE );
00155     m_windowTile_action-&gt;plugAccel( m_keyAccel );   
00156     
00157     m_windowAutoCascade_action  = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Auto cascade"</font>), ICON_WINDOW_CASCADE_AUTO,
00158                                                                 IDK_WINDOW_AUTO_CASCADE, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h5">slotAutoCascade</a>()), actionCollection(), <font class="stringliteral">"windowAutoCascade_action"</font>);
00159     m_windowAutoCascade_action-&gt;setToolTip( TT_WINDOW_AUTO_CASCADE );   
00160     m_windowAutoCascade_action-&gt;setWhatsThis( WT_WINDOW_AUTO_CASCADE );
00161     m_windowAutoCascade_action-&gt;plugAccel( m_keyAccel );    
00162                                                                     
00163     m_windowAutoTile_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"A&amp;uto Tile"</font>),ICON_WINDOW_TILE_AUTO,
00164                                                                 IDK_WINDOW_AUTO_TILE, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h4">slotAutoTile</a>()), actionCollection(), <font class="stringliteral">"windowAutoTile_action"</font>);
00165     m_windowAutoTile_action-&gt;setToolTip( TT_WINDOW_AUTO_TILE ); 
00166     m_windowAutoTile_action-&gt;setWhatsThis( WT_WINDOW_AUTO_TILE );
00167     m_windowAutoTile_action-&gt;plugAccel( m_keyAccel );   
00168     
00169     m_windowCloseAll_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Close all"</font>), ICON_WINDOW_CLOSE_ALL,
00170                                                                 IDK_WINDOW_CLOSE_ALL, m_mdi, SLOT(deleteAll()), actionCollection(),<font class="stringliteral">"windowCloseAll_action"</font>);
00171     m_windowCloseAll_action-&gt;setToolTip( TT_WINDOW_CLOSE_ALL ); 
00172     m_windowCloseAll_action-&gt;setWhatsThis( WT_WINDOW_CLOSE_ALL );
00173     m_windowCloseAll_action-&gt;plugAccel( m_keyAccel );   
00174     
00175     m_windowSaveProfile_action = <font class="keyword">new</font> KActionMenu(i18n(<font class="stringliteral">"&amp;Save profile"</font>), ICON_WINDOW_SAVE_PROFILE, actionCollection(),<font class="stringliteral">"windowSaveProfile_action"</font>);
00176     m_windowSaveProfile_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );   
00177     m_windowSaveProfile_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00178     m_windowSaveProfile_action-&gt;plugAccel( m_keyAccel );    
00179 
00180     m_windowLoadProfile_action = <font class="keyword">new</font> KActionMenu(i18n(<font class="stringliteral">"&amp;Load profile"</font>), ICON_WINDOW_SAVE_PROFILE, actionCollection(),<font class="stringliteral">"windowLoadProfile_action"</font>);
00181     m_windowLoadProfile_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );   
00182     m_windowLoadProfile_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00183     m_windowLoadProfile_action-&gt;plugAccel( m_keyAccel );
00184 
00185     m_windowEditProfiles_action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Configure profiles"</font>), ICON_WINDOW_EDIT_PROFILES,
00186                                                                 IDK_WINDOW_EDIT_PROFILES, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h14">editProfiles</a>()), actionCollection(),<font class="stringliteral">"windowEditProfiles_action"</font>);
00187     m_windowEditProfiles_action-&gt;setToolTip( TT_WINDOW_SAVE_PROFILE );  
00188     m_windowEditProfiles_action-&gt;setWhatsThis( WT_WINDOW_SAVE_PROFILE );
00189     m_windowEditProfiles_action-&gt;plugAccel( m_keyAccel );   
00190 
00191     m_windowFullscreen_action = <font class="keyword">new</font> KToggleAction(i18n(<font class="stringliteral">"&amp;Fullscreen mode"</font>), ICON_WINDOW_FULLSCREEN,
00192                                                                 IDK_WINDOW_FULLSCREEN, <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>()), actionCollection(),<font class="stringliteral">"windowFullscreen_action"</font>);
00193     m_windowFullscreen_action-&gt;setToolTip( TT_WINDOW_FULLSCREEN );  
00194     m_windowFullscreen_action-&gt;setWhatsThis( WT_WINDOW_FULLSCREEN );
00195     m_windowFullscreen_action-&gt;plugAccel( m_keyAccel );         
00196         
00197     QPtrList&lt;CProfile&gt; profiles = m_profileMgr.<a class="code" href="class_c_profile_mgr.html#a3">profiles</a>();      
00198     KPopupMenu* loadPopup = m_windowLoadProfile_action-&gt;popupMenu();
00199     KPopupMenu* savePopup = m_windowSaveProfile_action-&gt;popupMenu();    
00200     connect(loadPopup, SIGNAL(activated(<font class="keywordtype">int</font>)), SLOT(<a class="code" href="class_bible_time.html#h15">loadProfile</a>(<font class="keywordtype">int</font>)));
00201     connect(savePopup, SIGNAL(activated(<font class="keywordtype">int</font>)), SLOT(<a class="code" href="class_bible_time.html#h12">saveProfile</a>(<font class="keywordtype">int</font>)));
00202     <font class="keywordflow">for</font> (<a class="code" href="class_c_profile.html">CProfile</a>* p = profiles.first(); p; p = profiles.next()) {
00203         savePopup-&gt;insertItem(p-&gt;<a class="code" href="class_c_profile.html#a5">name</a>());           
00204         loadPopup-&gt;insertItem(p-&gt;<a class="code" href="class_c_profile.html#a5">name</a>());
00205     }
00206     
00207     <font class="keywordflow">if</font> ( actionCollection()-&gt;action(<font class="stringliteral">"help_contents"</font>) )   <font class="comment">//delete help action if KDE created it</font>
00208         actionCollection()-&gt;remove(actionCollection()-&gt;action(<font class="stringliteral">"help_contents"</font>));
00209         
00210     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Handbook"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00211         SLOT(<a class="code" href="class_bible_time.html#g3">openOnlineHelp_Handbook</a>()), actionCollection(), <font class="stringliteral">"help_handbook"</font>);
00212   action-&gt;setToolTip( TT_HELP_HANDBOOK );
00213   action-&gt;setWhatsThis( WT_HELP_HANDBOOK  );
00214     action-&gt;plugAccel( m_keyAccel );
00215 
00216     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Installation"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00217         SLOT(<a class="code" href="class_bible_time.html#g4">openOnlineHelp_Install</a>()), actionCollection(), <font class="stringliteral">"help_install"</font>);
00218   action-&gt;setToolTip( TT_HELP_INSTALLATION );
00219   action-&gt;setWhatsThis( WT_HELP_INSTALLATION  );
00220     action-&gt;plugAccel( m_keyAccel );
00221 
00222     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Bible Study Howto"</font>), ICON_HELP_CONTENTS, 0, <font class="keyword">this</font>,
00223         SLOT(<a class="code" href="class_bible_time.html#g5">openOnlineHelp_Howto</a>()), actionCollection(), <font class="stringliteral">"help_howto"</font>);
00224   action-&gt;setToolTip( TT_HELP_BIBLESTUDY );
00225   action-&gt;setWhatsThis( WT_HELP_BIBLESTUDY  );
00226     action-&gt;plugAccel( m_keyAccel );
00227 
00228     action = KStdAction::whatsThis(<font class="keyword">this</font>, SLOT(whatsThis()), actionCollection());
00229     action-&gt;setToolTip(TT_HELP_WHATSTHIS);
00230     action-&gt;setWhatsThis(WT_HELP_WHATSTHIS);    
00231     
00232     action = KStdAction::reportBug(m_helpMenu, SLOT(reportBug()), actionCollection());  
00233     action-&gt;setToolTip(TT_HELP_BUGREPORT);
00234     action-&gt;setWhatsThis(WT_HELP_BUGREPORT);
00235     action-&gt;setIcon(ICON_BUG_REPORT);
00236     
00237     action = <font class="keyword">new</font> KAction(i18n(<font class="stringliteral">"&amp;Daily tip"</font>), ICON_HELP_DAILY_TIP, IDK_HELP_DAILY_TIP, <font class="keyword">this</font>,
00238         SLOT(<a class="code" href="class_bible_time.html#g0">slotHelpTipOfDay</a>()), actionCollection(), <font class="stringliteral">"helpDailyTip_action"</font>);
00239     action-&gt;setToolTip(TT_HELP_DAILY_TIP);
00240     action-&gt;setWhatsThis(WT_HELP_DAILY_TIP);    
00241 
00242     action = KStdAction::aboutApp(m_helpMenu, SLOT(aboutApplication()), actionCollection());    
00243     action-&gt;setToolTip(TT_HELP_ABOUT);
00244     action-&gt;setWhatsThis(WT_HELP_ABOUT);    
00245     
00246     <font class="comment">//delete About KDE action if KDE created it already</font>
00247     <font class="keywordflow">if</font> ( actionCollection()-&gt;action(<font class="stringliteral">"help_about_kde"</font>) )  <font class="comment">//delete About KDE action if KDE created it</font>
00248         actionCollection()-&gt;remove(actionCollection()-&gt;action(<font class="stringliteral">"help_about_kde"</font>));   
00249     action = KStdAction::aboutKDE(m_helpMenu, SLOT(aboutKDE()), actionCollection());    
00250     action-&gt;setToolTip(TT_HELP_ABOUT_KDE);
00251     action-&gt;setWhatsThis(WT_HELP_ABOUT_KDE);
00252 
00253 <font class="comment">//  action = KStdAction::keybindings(m_helpMenu, SLOT(aboutApplication()), actionCollection()); </font>
00254 <font class="comment">//  action-&gt;setToolTip(TT_HELP_ABOUT);</font>
00255 <font class="comment">//  action-&gt;setWhatsThis(WT_HELP_ABOUT);    </font>
00256 }
00257 
<a name="l00259"></a><a class="code" href="class_bible_time.html#b1">00259</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b1">BibleTime::initMenubar</a>(){
00260     <font class="comment">//get the window and edit menus using the actions and their properties</font>
00261     m_windowMenu = dynamic_cast&lt;QPopupMenu*&gt;(m_windowTile_action-&gt;container(0));    
00262 }
00263 
<a name="l00265"></a><a class="code" href="class_bible_time.html#b2">00265</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b2">BibleTime::initConnections</a>(){
00266     connect(m_mdi, SIGNAL(sigSetToplevelCaption(<font class="keyword">const</font> QString&amp;)),
00267         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#g6">setPlainCaption</a>(<font class="keyword">const</font> QString&amp;)));
00268     connect(m_mdi, SIGNAL(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(ListCSwordModuleInfo, <font class="keyword">const</font> QString&amp;)),
00269         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(ListCSwordModuleInfo, <font class="keyword">const</font> QString&amp;)));
00270         
00271     <font class="keywordflow">if</font> (m_windowMenu) {
00272         connect(m_windowMenu, SIGNAL(aboutToShow()),
00273             <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h3">slotWindowMenuAboutToShow</a>()));
00274         connect(m_windowMenu, SIGNAL(activated(<font class="keywordtype">int</font>)),
00275             <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h6">slotWindowMenuActivated</a>(<font class="keywordtype">int</font>)));      
00276     }
00277     <font class="keywordflow">else</font>
00278         qWarning(<font class="stringliteral">"can't find window menu"</font>);
00279         
00280     connect(m_groupmanager, SIGNAL(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*, <font class="keyword">const</font> QString&amp;)),
00281         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(<a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>*,<font class="keyword">const</font> QString&amp;)));
00282     connect(m_groupmanager, SIGNAL(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(ListCSwordModuleInfo, <font class="keyword">const</font> QString&amp;)),
00283         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(ListCSwordModuleInfo,<font class="keyword">const</font> QString&amp;)));
00284 
00285     connect(m_mainIndex, SIGNAL(modulesChosen(ListCSwordModuleInfo, <font class="keyword">const</font> QString&amp;)),
00286         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h1">createDisplayWindow</a>(ListCSwordModuleInfo,<font class="keyword">const</font> QString&amp;)));
00287     
00288     <font class="comment">//connect to the signals of the printer object</font>
00289     connect(m_printer, SIGNAL(addedFirstQueueItem()),
00290         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));
00291     connect(m_printer, SIGNAL(printingStarted()),
00292         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i3">slotPrintingStarted</a>()));     
00293     connect(m_printer, SIGNAL(printingFinished()),
00294         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));       
00295     connect(m_printer, SIGNAL(printingFinished()),
00296         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i1">slotPrintingFinished</a>()));                
00297     connect(m_printer, SIGNAL(printingInterrupted()),
00298         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));               
00299     connect(m_printer, SIGNAL(printingInterrupted()),
00300         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i1">slotPrintingFinished</a>()));                        
00301     connect(m_printer, SIGNAL(queueCleared()),
00302         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#h11">slotSetPrintingStatus</a>()));
00303     connect(m_printer, SIGNAL(percentCompleted(<font class="keyword">const</font> <font class="keywordtype">int</font>)),
00304         <font class="keyword">this</font>, SLOT(<a class="code" href="class_bible_time.html#i0">slotPrintedPercent</a>(<font class="keyword">const</font> <font class="keywordtype">int</font>)));     
00305 }
00306 
<a name="l00308"></a><a class="code" href="class_bible_time.html#b3">00308</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b3">BibleTime::initBackends</a>(){
00309     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing Sword"</font>)+QString::fromLatin1(<font class="stringliteral">"..."</font>));
00310     
00311     m_backend = <font class="keyword">new</font> <a class="code" href="class_c_sword_backend.html">CSwordBackend</a>();    
00312     CPointers::setBackend(m_backend);
00313     <font class="keyword">const</font> CSwordBackend::LoadError errorCode = m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a3">initModules</a>();
00314 <font class="comment">//  qWarning("ErrorCode = %i", errorCode);</font>
00315 
00316     <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = 0;       
00317     <font class="keywordflow">if</font> ( errorCode == CSwordBackend::NoError ) {    <font class="comment">//no error</font>
00318         <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = &amp;(m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a2">moduleList</a>());
00319     } <font class="keywordflow">else</font> {
00320         <a class="code" href="class_bible_time.html#n20">m_moduleList</a> = 0;
00321         <font class="comment">//show error message that initBackend failed        </font>
00322         <font class="keywordflow">switch</font> (errorCode) {
00323             <font class="keywordflow">case</font> CSwordBackend::NoSwordConfig: <font class="comment">//mods.d or mods.conf missing</font>
00324             {
00325                 KStartupLogo::hideSplash();
00326                 <a class="code" href="class_c_h_t_m_l_dialog.html">CHTMLDialog</a> dlg(HELPDIALOG_NO_SWORD_MODULE_CONFIG_DIR);
00327                 dlg.exec();             
00328                 KStartupLogo::showSplash();             
00329                 <font class="keywordflow">break</font>;
00330         }
00331     
00332             <font class="keywordflow">case</font> CSwordBackend::NoModules: <font class="comment">//no modules installed, but config exists</font>
00333             {
00334                 KStartupLogo::hideSplash();
00335                 <a class="code" href="class_c_h_t_m_l_dialog.html">CHTMLDialog</a> dlg(HELPDIALOG_NO_SWORD_MODULES);
00336                 dlg.exec();
00337                 KStartupLogo::showSplash();             
00338                 <font class="keywordflow">break</font>;
00339           }
00340         
00341             <font class="keywordflow">default</font>: <font class="comment">//unknown error</font>
00342             {
00343                 KStartupLogo::hideSplash();
00344                 <a class="code" href="class_c_h_t_m_l_dialog.html">CHTMLDialog</a> dlg(HELPDIALOG_INITBACKEND_FAILED);
00345                 dlg.exec();
00346                 KStartupLogo::showSplash();             
00347                 <font class="keywordflow">break</font>;
00348           }
00349         }
00350     }
00351     m_backend-&gt;<a class="code" href="class_c_sword_backend.html#a9">booknameLanguage</a>( CBTConfig::get(CBTConfig::language) );
00352 }
00353 
<a name="l00355"></a><a class="code" href="class_bible_time.html#b8">00355</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#b8">BibleTime::initPrinter</a>() {
00356     KStartupLogo::setStatusMessage(i18n(<font class="stringliteral">"Initializing printing system"</font>) + QString::fromLatin1(<font class="stringliteral">"..."</font>));
00357     CPointers::setPrinter( (m_printer = <font class="keyword">new</font> CPrinter(<font class="keyword">this</font>)) );
00358 }
00359 
<a name="l00361"></a><a class="code" href="class_bible_time.html#a6">00361</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#a6">BibleTime::applyProfileSettings</a>( <a class="code" href="class_c_profile.html">CProfile</a>* p ){
00362     <font class="keywordflow">if</font> (!p)
00363         <font class="keywordflow">return</font>;
00364 
00365     <font class="keywordflow">if</font> (p-&gt;<a class="code" href="class_c_profile.html#a10">fullscreen</a>()) { <font class="comment">//we can set only fullscreen OR geometry</font>
00366         m_windowFullscreen_action-&gt;setChecked( <font class="keyword">true</font> );
00367         <a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>();
00368     }
00369     <font class="keywordflow">else</font> {
00370         setGeometry( p-&gt;<a class="code" href="class_c_profile.html#a12">geometry</a>() );
00371         m_windowFullscreen_action-&gt;setChecked( <font class="keyword">false</font> );
00372         <a class="code" href="class_bible_time.html#h17">toggleFullscreen</a>();     
00373     }
00374 }
00375 
<a name="l00377"></a><a class="code" href="class_bible_time.html#a7">00377</a> <font class="keywordtype">void</font> <a class="code" href="class_bible_time.html#a7">BibleTime::storeProfileSettings</a>( <a class="code" href="class_c_profile.html">CProfile</a>* p ){
00378     p-&gt;<a class="code" href="class_c_profile.html#a9">setFullscreen</a>(m_windowFullscreen_action-&gt;isChecked());
00379     p-&gt;<a class="code" href="class_c_profile.html#a11">setGeometry</a>(geometry());
00380 }
</pre></div><hr><address align="right"><small>Generated on Tue Jul 16 13:53:07 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
