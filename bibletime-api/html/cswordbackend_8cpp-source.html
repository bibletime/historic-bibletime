<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cswordbackend.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cswordbackend.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cswordbackend.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Thu Oct 5 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "cswordbackend.h"</font>
00020 <font class="preprocessor">#include "chtmlentrydisplay.h"</font>
00021 <font class="preprocessor">#include "chtmlchapterdisplay.h"</font>
00022 <font class="preprocessor">#include "chtmlbookdisplay.h"</font>
00023 <font class="preprocessor">#include "cswordbiblemoduleinfo.h"</font>
00024 <font class="preprocessor">#include "cswordcommentarymoduleinfo.h"</font>
00025 <font class="preprocessor">#include "cswordlexiconmoduleinfo.h"</font>
00026 <font class="preprocessor">#include "cswordbookmoduleinfo.h"</font>
00027 
00028 <font class="preprocessor">#include "bt_thmlhtml.h"</font>
00029 <font class="preprocessor">#include "bt_gbfhtml.h"</font>
00030 <font class="preprocessor">#include &lt;dirent.h&gt;</font>
00031 <font class="preprocessor">#include &lt;unistd.h&gt;</font>
00032 
00033 <font class="comment">//Qt includes</font>
00034 <font class="preprocessor">#include &lt;qdir.h&gt;</font>
00035 
00036 <font class="comment">//KDE includes</font>
00037 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00038 
00039 <font class="comment">//Sword includes</font>
00040 <font class="preprocessor">#include &lt;swdisp.h&gt;</font>
00041 <font class="preprocessor">#include &lt;swfiltermgr.h&gt;</font>
00042 <font class="preprocessor">#include &lt;encfiltmgr.h&gt;</font>
00043 <font class="preprocessor">#include &lt;plainhtml.h&gt;</font>
00044 <font class="preprocessor">#include &lt;rawgbf.h&gt;</font>
00045 <font class="preprocessor">#include &lt;rtfhtml.h&gt;</font>
00046 <font class="preprocessor">#include &lt;filemgr.h&gt;</font>
00047 <font class="preprocessor">#include &lt;utilstr.h&gt;</font>
00048 
00049 <font class="comment">//static class-wide members</font>
00050 <font class="keyword">static</font> QMap&lt;QString, QString&gt; moduleDescriptionMap;
00051 
<a name="l00052"></a><a class="code" href="class_c_sword_backend.html#a0">00052</a> <a class="code" href="class_c_sword_backend.html#a0">CSwordBackend::CSwordBackend</a>()
00053     : SWMgr(0,0,false,new EncodingFilterMgr( ENC_UTF8 ))
00054 {   
00055     m_displays.entry = 0;
00056     m_displays.chapter = 0;
00057     m_displays.book = 0;
00058 
00059     m_filters.gbf = 0;
00060     m_filters.thml = 0;
00061     m_filters.plain = 0;
00062 }
00063 
<a name="l00064"></a><a class="code" href="class_c_sword_backend.html#a1">00064</a> <a class="code" href="class_c_sword_backend.html#a1">CSwordBackend::~CSwordBackend</a>(){
00065     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>();  
00066     <font class="keyword">delete</font> m_filters.gbf;
00067     <font class="keyword">delete</font> m_filters.plain; 
00068     <font class="keyword">delete</font> m_filters.thml;  
00069 }
00070 
<a name="l00072"></a><a class="code" href="class_c_sword_backend.html#a3">00072</a> <font class="keyword">const</font> CSwordBackend::LoadError <a class="code" href="class_c_sword_backend.html#a3">CSwordBackend::initModules</a>() {
00073     LoadError ret = NoError;
00074 
00075     ModMap::iterator it;
00076     SWModule*   curMod = 0;
00077     <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* newModule = 0;
00078             
00079     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>(); <font class="comment">//remove previous modules</font>
00080     m_moduleList.clear();   
00081 
00082     ret = LoadError( Load() );
00083     
00084     <font class="keywordflow">for</font> (it = Modules.begin(); it != Modules.end(); it++) {
00085         curMod = (*it).second;
00086         <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Biblical Texts"</font>)) {
00087             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_bible_module_info.html">CSwordBibleModuleInfo</a>(curMod);
00088             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.chapter ? m_displays.chapter : (m_displays.chapter = <font class="keyword">new</font> <a class="code" href="class_c_h_t_m_l_chapter_display.html">CHTMLChapterDisplay</a>));
00089         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Commentaries"</font>)) {
00090             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_commentary_module_info.html">CSwordCommentaryModuleInfo</a>(curMod);
00091             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.entry ? m_displays.entry : (m_displays.entry = <font class="keyword">new</font> <a class="code" href="class_c_h_t_m_l_entry_display.html">CHTMLEntryDisplay</a>));
00092         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Lexicons / Dictionaries"</font>)) {
00093             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_lexicon_module_info.html">CSwordLexiconModuleInfo</a>(curMod);
00094             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.entry ? m_displays.entry : (m_displays.entry = <font class="keyword">new</font> <a class="code" href="class_c_h_t_m_l_entry_display.html">CHTMLEntryDisplay</a>));
00095         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Generic Books"</font>)) {
00096             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_book_module_info.html">CSwordBookModuleInfo</a>(curMod);
00097             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.book ? m_displays.book : (m_displays.book = <font class="keyword">new</font> <a class="code" href="class_c_h_t_m_l_book_display.html">CHTMLBookDisplay</a>));
00098         }
00099         <font class="keywordflow">if</font> (newModule)  <font class="comment">//append the new modules to our list</font>
00100             m_moduleList.append( newModule );
00101     }
00102 
00103     <font class="keywordflow">for</font> (m_moduleList.first(); m_moduleList.current(); m_moduleList.next()) {
00104         moduleDescriptionMap.insert(m_moduleList.current()-&gt;config(CSwordModuleInfo::Description), m_moduleList.current()-&gt;name());
00105     }
00106 
00107     <font class="keywordflow">return</font> ret;
00108 }
00109 
<a name="l00110"></a><a class="code" href="class_c_sword_backend.html#b0">00110</a> <font class="keywordtype">void</font> <a class="code" href="class_c_sword_backend.html#b0">CSwordBackend::AddRenderFilters</a>(SWModule *module, ConfigEntMap &amp;section) {
00111     string sourceformat;
00112     string moduleDriver;
00113     ConfigEntMap::iterator entry;
00114     <font class="keywordtype">bool</font> noDriver = <font class="keyword">true</font>;
00115 
00116     sourceformat = ((entry = section.find(<font class="stringliteral">"SourceType"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00117     moduleDriver = ((entry = section.find(<font class="stringliteral">"ModDrv"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00118 
00119     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"GBF"</font>)) {
00120         <font class="keywordflow">if</font> (!m_filters.gbf)
00121             m_filters.gbf = <font class="keyword">new</font> <a class="code" href="class_b_t___g_b_f_h_t_m_l.html">BT_GBFHTML</a>();
00122         module-&gt;AddRenderFilter(m_filters.gbf);
00123         noDriver = <font class="keyword">false</font>;
00124     }
00125 
00126     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"PLAIN"</font>)) {
00127         <font class="keywordflow">if</font> (!m_filters.plain)
00128             m_filters.plain = <font class="keyword">new</font> PLAINHTML();  
00129         module-&gt;AddRenderFilter(m_filters.plain);
00130         noDriver = <font class="keyword">false</font>;
00131     }
00132 
00133     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"ThML"</font>)) {
00134         <font class="keywordflow">if</font> (!m_filters.thml)
00135             m_filters.thml = <font class="keyword">new</font> <a class="code" href="class_b_t___th_m_l_h_t_m_l.html">BT_ThMLHTML</a>();
00136         module-&gt;AddRenderFilter(m_filters.thml);
00137         noDriver = <font class="keyword">false</font>;
00138     }
00139 
00140     <font class="keywordflow">if</font> (noDriver){
00141         <font class="keywordflow">if</font> (!stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawCom"</font>) || !stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawLD"</font>)) {
00142             <font class="keywordflow">if</font> (!m_filters.plain)
00143                 m_filters.plain = <font class="keyword">new</font> PLAINHTML();
00144             module-&gt;AddRenderFilter(m_filters.plain);
00145             noDriver = <font class="keyword">false</font>;
00146         }
00147     }
00148 }
00149 
<a name="l00151"></a><a class="code" href="class_c_sword_backend.html#a4">00151</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a4">CSwordBackend::shutdownModules</a>(){
00152     <font class="keywordflow">for</font> (m_moduleList.first(); m_moduleList.current(); m_moduleList.next()) {
00153         <font class="keywordflow">if</font> (m_moduleList.current()) {
00154             <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* current = m_moduleList.current();
00155             m_moduleList.take();
00156             <font class="keyword">delete</font> current;
00157         }       
00158     }
00159     m_moduleList.clear();   
00160     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00161 }
00162 
<a name="l00164"></a><a class="code" href="class_c_sword_backend.html#a8">00164</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a8">CSwordBackend::isOptionEnabled</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s14">CSwordBackend::FilterOptions</a> type) {
00165     <font class="keywordflow">return</font> (getGlobalOption( <a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1() ) == <font class="stringliteral">"On"</font>);
00166 }
00167 
<a name="l00169"></a><a class="code" href="class_c_sword_backend.html#a5">00169</a> <font class="keywordtype">void</font> <a class="code" href="class_c_sword_backend.html#a5">CSwordBackend::setOption</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s14">CSwordBackend::FilterOptions</a> type, <font class="keyword">const</font> <font class="keywordtype">bool</font> enable){
00170     string value;
00171     <font class="keywordflow">switch</font> (type) {
00172         <font class="keywordflow">case</font> textualVariants:
00173             value = enable ? <font class="stringliteral">"Secondary Reading"</font> : <font class="stringliteral">"Primary Reading"</font>;
00174             <font class="comment">//if on, user alternaticve (secondary) reading</font>
00175             <font class="keywordflow">break</font>;
00176         <font class="keywordflow">default</font>:        
00177             value = enable ? <font class="stringliteral">"On"</font>: <font class="stringliteral">"Off"</font>;
00178             <font class="keywordflow">break</font>;
00179     };
00180     setGlobalOption(<a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1(), value.c_str());
00181 }
00182 
00183 <font class="keywordtype">void</font> CSwordBackend::setFilterOptions( <font class="keyword">const</font> CSwordBackend::FilterOptionsBool options){
00184   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( footnotes,                     options.footnotes );
00185   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( strongNumbers,             options.strongNumbers );
00186   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( headings,                      options.headings );
00187   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( morphTags,                     options.morphTags );
00188     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( lemmas,                          options.lemmas );
00189     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( hebrewPoints,                options.hebrewPoints );
00190     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( hebrewCantillation,  options.hebrewCantillation );
00191     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( greekAccents,                options.greekAccents);
00192     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( textualVariants,         options.textualVariants);   
00193 }
00194 
00195 <font class="keywordtype">void</font> CSwordBackend::setDisplayOptions( <font class="keyword">const</font> CSwordBackend::DisplayOptionsBool options){
00196   <font class="keywordflow">if</font> (m_displays.entry)
00197         m_displays.entry-&gt;setDisplayOptions(options);   
00198   <font class="keywordflow">if</font> (m_displays.chapter)
00199         m_displays.chapter-&gt;setDisplayOptions(options); 
00200 }
00201 
<a name="l00203"></a><a class="code" href="class_c_sword_backend.html#a10">00203</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#a10">CSwordBackend::findModuleByDescription</a>(<font class="keyword">const</font> QString&amp; description){
00204   <font class="keywordflow">if</font> (m_moduleList.count())
00205     <font class="keywordflow">for</font> ( m_moduleList.first();m_moduleList.current();m_moduleList.next() )
00206       <font class="keywordflow">if</font> ( m_moduleList.current()-&gt;config(CSwordModuleInfo::Description) == description )
00207         <font class="keywordflow">return</font> m_moduleList.current();
00208   <font class="keywordflow">return</font> 0;
00209 }
00210 
<a name="l00212"></a><a class="code" href="class_c_sword_backend.html#d0">00212</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d0">CSwordBackend::findModuleNameByDescription</a>(<font class="keyword">const</font> QString&amp; description){
00213     <font class="keywordflow">if</font> (moduleDescriptionMap.contains(description))
00214         <font class="keywordflow">return</font> moduleDescriptionMap[description];
00215   <font class="keywordflow">return</font> QString::null;
00216 }
00217 
<a name="l00219"></a><a class="code" href="class_c_sword_backend.html#a11">00219</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#a11">CSwordBackend::findModuleByName</a>(<font class="keyword">const</font> QString&amp; name){
00220   <font class="keywordflow">if</font> (m_moduleList.count())
00221     <font class="keywordflow">for</font> ( m_moduleList.first(); m_moduleList.current(); m_moduleList.next() )
00222       <font class="keywordflow">if</font> ( m_moduleList.current()-&gt;name() == name )
00223         <font class="keywordflow">return</font> m_moduleList.current();
00224   <font class="keywordflow">return</font> 0;
00225 }
00226 
<a name="l00228"></a><a class="code" href="class_c_sword_backend.html#a13">00228</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a13">CSwordBackend::moduleConfig</a>(<font class="keyword">const</font> QString&amp; module, SWConfig&amp; moduleConfig) {
00229     SectionMap::iterator section;
00230     DIR *dir = opendir(configPath);
00231     <font class="keyword">struct </font>dirent *ent;
00232     
00233     <font class="keywordtype">bool</font> foundConfig = <font class="keyword">false</font>;   
00234     QString modFile;    
00235     <font class="keywordflow">if</font> (dir) {    <font class="comment">// find and update .conf file</font>
00236         rewinddir(dir);
00237         <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00238             <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00239                 modFile = QString::fromLocal8Bit(configPath);
00240                 modFile += QString::fromLatin1(<font class="stringliteral">"/"</font>);
00241                 modFile += QString::fromLocal8Bit(ent-&gt;d_name);
00242                 <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00243                 section =   <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00244                 foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.end() );
00245             }
00246         }
00247         closedir(dir);
00248     }
00249     <font class="keywordflow">else</font> { <font class="comment">//try to read mods.conf</font>
00250         <font class="comment">//moduleConfig = SWConfig( configPath + "/mods.conf" );</font>
00251         <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig(<font class="stringliteral">""</font>);<font class="comment">//global config     </font>
00252         section =   config-&gt;Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );       
00253         foundConfig = ( section != config-&gt;Sections.end() );        
00254         
00255         ConfigEntMap::iterator entry;
00256         <font class="keywordflow">if</font> (foundConfig) { <font class="comment">//copy module section</font>
00257             <font class="keywordflow">for</font> (entry = (*section).second.begin(); entry != (*section).second.end(); entry++) {
00258                     <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections[(*section).first].insert(ConfigEntMap::value_type((*entry).first, (*entry).second));
00259             }
00260         }           
00261     }
00262     
00263     <font class="keywordflow">if</font> (!foundConfig &amp;&amp; configType != 2) { <font class="comment">//search in $HOME/.sword/</font>
00264         QString myPath = QString::fromLatin1(<font class="stringliteral">"%1/.sword/mods.d"</font>).arg(getenv(<font class="stringliteral">"HOME"</font>));
00265         dir = opendir(myPath.latin1());
00266         <font class="keywordflow">if</font> (dir) {
00267             rewinddir(dir);
00268             <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00269                 <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00270                     modFile = myPath;
00271                     modFile += <font class="stringliteral">"/"</font>;
00272                     modFile += ent-&gt;d_name;
00273                     <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00274                     section =   <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00275                     foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.end() );
00276                 }
00277             }
00278             closedir(dir);
00279         }
00280     }
00281     <font class="keywordflow">return</font> foundConfig;
00282 }
00283 
<a name="l00285"></a><a class="code" href="class_c_sword_backend.html#d1">00285</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d1">CSwordBackend::optionName</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s14">CSwordBackend::FilterOptions</a> option ){
00286     <font class="keywordflow">switch</font> (option) {
00287         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00288             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Footnotes"</font>);
00289         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00290             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Strong's Numbers"</font>);
00291         <font class="keywordflow">case</font> CSwordBackend::headings:
00292             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Headings"</font>);
00293         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00294             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Morphological Tags"</font>);
00295     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00296             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Lemmas"</font>);
00297         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00298             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Hebrew Vowel Points"</font>);
00299         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00300             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Hebrew Cantillation"</font>);
00301         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00302             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Greek Accents"</font>);
00303         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00304             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Textual Variants"</font>);         
00305     }
00306     <font class="keywordflow">return</font> QString::null;   
00307 }
00308 
<a name="l00310"></a><a class="code" href="class_c_sword_backend.html#d3">00310</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d3">CSwordBackend::translatedOptionName</a>(<font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s14">CSwordBackend::FilterOptions</a> option){
00311     <font class="keywordflow">switch</font> (option) {
00312         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00313             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Footnotes"</font>);
00314         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00315             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Strong's Numbers"</font>);
00316         <font class="keywordflow">case</font> CSwordBackend::headings:
00317             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Headings"</font>);
00318         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00319             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Morphological Tags"</font>);
00320     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00321             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Lemmas"</font>);
00322         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00323             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Hebrew Vowel Points"</font>);
00324         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00325             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Hebrew Cantillation"</font>);
00326         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00327             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Greek Accents"</font>);
00328         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00329             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Textual Variants"</font>);            
00330     }
00331     <font class="keywordflow">return</font> QString::null;
00332 }
00333 
00334 
<a name="l00335"></a><a class="code" href="class_c_sword_backend.html#d2">00335</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d2">CSwordBackend::configOptionName</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s14">CSwordBackend::FilterOptions</a> option ){
00336     <font class="keywordflow">switch</font> (option) {
00337         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00338             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Footnotes"</font>);
00339         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00340             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Strongs"</font>);
00341         <font class="keywordflow">case</font> CSwordBackend::headings:
00342             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Headings"</font>);
00343         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00344             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Morph"</font>);
00345     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00346             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Lemma"</font>);
00347         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00348             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"HebrewPoints"</font>);
00349         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00350             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Cantillation"</font>);
00351         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00352             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"GreekAccents"</font>);
00353         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00354             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"TextualVariants"</font>);
00355     }
00356     <font class="keywordflow">return</font> QString::null;   
00357 }
00358 
<a name="l00359"></a><a class="code" href="class_c_sword_backend.html#a9">00359</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#a9">CSwordBackend::booknameLanguage</a>( <font class="keyword">const</font> QString&amp; language ) {
00360     <font class="keywordflow">if</font> (!language.isNull())
00361         LocaleMgr::systemLocaleMgr.setDefaultLocaleName( language.local8Bit() );
00362     <font class="keywordflow">return</font> QString::fromLatin1(LocaleMgr::systemLocaleMgr.getDefaultLocaleName());
00363 }
00364 
<a name="l00366"></a><a class="code" href="class_c_sword_backend.html#a14">00366</a> <font class="keyword">const</font> SWVersion <a class="code" href="class_c_sword_backend.html#a14">CSwordBackend::Version</a>() {
00367     <font class="keywordflow">return</font> SWVersion::currentVersion;
00368 }
</pre></div><hr><address align="right"><small>Generated on Sun May 12 20:27:13 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
