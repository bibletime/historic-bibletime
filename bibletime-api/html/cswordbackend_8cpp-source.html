<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cswordbackend.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cswordbackend.cpp</h1><div class="fragment"><pre>00001 <font class="comment">/***************************************************************************</font>
00002 <font class="comment">                          cswordbackend.cpp  -  description</font>
00003 <font class="comment">                             -------------------</font>
00004 <font class="comment">    begin                : Thu Oct 5 2000</font>
00005 <font class="comment">    copyright            : (C) 2000 by The BibleTime team</font>
00006 <font class="comment">    email                : info@bibletime.de</font>
00007 <font class="comment"> ***************************************************************************/</font>
00008 
00009 <font class="comment">/***************************************************************************</font>
00010 <font class="comment"> *                                                                         *</font>
00011 <font class="comment"> *   This program is free software; you can redistribute it and/or modify  *</font>
00012 <font class="comment"> *   it under the terms of the GNU General Public License as published by  *</font>
00013 <font class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</font>
00014 <font class="comment"> *   (at your option) any later version.                                   *</font>
00015 <font class="comment"> *                                                                         *</font>
00016 <font class="comment"> ***************************************************************************/</font>
00017 
00018 <font class="comment">//BibleTime includes</font>
00019 <font class="preprocessor">#include "cswordbackend.h"</font>
00020 <font class="preprocessor">#include "centrydisplay.h"</font>
00021 <font class="preprocessor">#include "cswordbiblemoduleinfo.h"</font>
00022 <font class="preprocessor">#include "cswordcommentarymoduleinfo.h"</font>
00023 <font class="preprocessor">#include "cswordlexiconmoduleinfo.h"</font>
00024 <font class="preprocessor">#include "cswordbookmoduleinfo.h"</font>
00025 
00026 <font class="preprocessor">#include "bt_thmlhtml.h"</font>
00027 <font class="preprocessor">#include "bt_gbfhtml.h"</font>
00028 <font class="preprocessor">#include &lt;dirent.h&gt;</font>
00029 <font class="preprocessor">#include &lt;unistd.h&gt;</font>
00030 
00031 <font class="comment">//Qt includes</font>
00032 <font class="preprocessor">#include &lt;qdir.h&gt;</font>
00033 
00034 <font class="comment">//KDE includes</font>
00035 <font class="preprocessor">#include &lt;klocale.h&gt;</font>
00036 
00037 <font class="comment">//Sword includes</font>
00038 <font class="preprocessor">#include &lt;swdisp.h&gt;</font>
00039 <font class="preprocessor">#include &lt;swfiltermgr.h&gt;</font>
00040 <font class="preprocessor">#include &lt;encfiltmgr.h&gt;</font>
00041 <font class="preprocessor">#include &lt;plainhtml.h&gt;</font>
00042 <font class="preprocessor">#include &lt;rawgbf.h&gt;</font>
00043 <font class="preprocessor">#include &lt;rtfhtml.h&gt;</font>
00044 <font class="preprocessor">#include &lt;filemgr.h&gt;</font>
00045 <font class="preprocessor">#include &lt;utilstr.h&gt;</font>
00046 <font class="preprocessor">#include &lt;utf8transliterator.h&gt;</font>
00047 
00048 <font class="comment">//static class-wide members</font>
00049 <font class="keyword">static</font> QMap&lt;QString, QString&gt; moduleDescriptionMap;
00050 
<a name="l00051"></a><a class="code" href="class_c_sword_backend.html#a0">00051</a> <a class="code" href="class_c_sword_backend.html#a0">CSwordBackend::CSwordBackend</a>()
00052     : SWMgr(0,0,false,new EncodingFilterMgr( ENC_UTF8 ))
00053 {   
00054     m_displays.entry = 0;
00055     m_displays.chapter = 0;
00056     m_displays.book = 0;
00057 
00058     m_filters.gbf = 0;
00059     m_filters.thml = 0;
00060     m_filters.plain = 0;
00061   m_filters.transliterator = 0;
00062 }
00063 
<a name="l00064"></a><a class="code" href="class_c_sword_backend.html#a1">00064</a> <a class="code" href="class_c_sword_backend.html#a1">CSwordBackend::~CSwordBackend</a>(){
00065     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>();  
00066     <font class="keyword">delete</font> m_filters.gbf;
00067     <font class="keyword">delete</font> m_filters.plain; 
00068     <font class="keyword">delete</font> m_filters.thml;  
00069   <font class="keyword">delete</font> m_filters.transliterator;
00070 }
00071 
<a name="l00073"></a><a class="code" href="class_c_sword_backend.html#a3">00073</a> <font class="keyword">const</font> CSwordBackend::LoadError <a class="code" href="class_c_sword_backend.html#a3">CSwordBackend::initModules</a>() {
00074     LoadError ret = NoError;
00075 
00076     ModMap::iterator it;
00077     SWModule*   curMod = 0;
00078     <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* newModule = 0;
00079             
00080     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>(); <font class="comment">//remove previous modules</font>
00081     m_moduleList.clear();   
00082 
00083     ret = LoadError( Load() );
00084     
00085     <font class="keywordflow">for</font> (it = Modules.begin(); it != Modules.end(); it++) {
00086         curMod = (*it).second;
00087         <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Biblical Texts"</font>)) {
00088             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_bible_module_info.html">CSwordBibleModuleInfo</a>(curMod);
00089             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.chapter ? m_displays.chapter : (m_displays.chapter = <font class="keyword">new</font> CChapterDisplay));
00090         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Commentaries"</font>)) {
00091             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_commentary_module_info.html">CSwordCommentaryModuleInfo</a>(curMod);
00092             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.entry ? m_displays.entry : (m_displays.entry = <font class="keyword">new</font> <a class="code" href="class_c_entry_display.html">CEntryDisplay</a>));
00093         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Lexicons / Dictionaries"</font>)) {
00094             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_lexicon_module_info.html">CSwordLexiconModuleInfo</a>(curMod);
00095             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.entry ? m_displays.entry : (m_displays.entry = <font class="keyword">new</font> <a class="code" href="class_c_entry_display.html">CEntryDisplay</a>));
00096         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Generic Books"</font>)) {
00097             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_book_module_info.html">CSwordBookModuleInfo</a>(curMod);
00098             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_displays.book ? m_displays.book : (m_displays.book = <font class="keyword">new</font> CBookDisplay));
00099         }
00100         <font class="keywordflow">if</font> (newModule)  <font class="comment">//append the new modules to our list</font>
00101             m_moduleList.append( newModule );
00102     }
00103 
00104     <font class="keywordflow">for</font> (m_moduleList.first(); m_moduleList.current(); m_moduleList.next()) {
00105         moduleDescriptionMap.insert(m_moduleList.current()-&gt;config(CSwordModuleInfo::Description), m_moduleList.current()-&gt;name());
00106     }
00107 
00108     <font class="keywordflow">return</font> ret;
00109 }
00110 
<a name="l00111"></a><a class="code" href="class_c_sword_backend.html#b0">00111</a> <font class="keywordtype">void</font> <a class="code" href="class_c_sword_backend.html#b0">CSwordBackend::AddRenderFilters</a>(SWModule *module, ConfigEntMap &amp;section) {
00112     string sourceformat;
00113     string moduleDriver;
00114     ConfigEntMap::iterator entry;
00115     <font class="keywordtype">bool</font> noDriver = <font class="keyword">true</font>;
00116 
00117     sourceformat = ((entry = section.find(<font class="stringliteral">"SourceType"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00118     moduleDriver = ((entry = section.find(<font class="stringliteral">"ModDrv"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00119 
00120     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"GBF"</font>)) {
00121         <font class="keywordflow">if</font> (!m_filters.gbf)
00122             m_filters.gbf = <font class="keyword">new</font> <a class="code" href="class_b_t___g_b_f_h_t_m_l.html">BT_GBFHTML</a>();
00123         module-&gt;AddRenderFilter(m_filters.gbf);
00124         noDriver = <font class="keyword">false</font>;
00125     }
00126 
00127     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"PLAIN"</font>)) {
00128         <font class="keywordflow">if</font> (!m_filters.plain)
00129             m_filters.plain = <font class="keyword">new</font> PLAINHTML();  
00130         module-&gt;AddRenderFilter(m_filters.plain);
00131         noDriver = <font class="keyword">false</font>;
00132     }
00133 
00134     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"ThML"</font>)) {
00135         <font class="keywordflow">if</font> (!m_filters.thml)
00136             m_filters.thml = <font class="keyword">new</font> <a class="code" href="class_b_t___th_m_l_h_t_m_l.html">BT_ThMLHTML</a>();
00137         module-&gt;AddRenderFilter(m_filters.thml);
00138         noDriver = <font class="keyword">false</font>;
00139     }
00140 
00141     <font class="keywordflow">if</font> (noDriver){
00142         <font class="keywordflow">if</font> (!stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawCom"</font>) || !stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawLD"</font>)) {
00143             <font class="keywordflow">if</font> (!m_filters.plain)
00144                 m_filters.plain = <font class="keyword">new</font> PLAINHTML();
00145             module-&gt;AddRenderFilter(m_filters.plain);
00146             noDriver = <font class="keyword">false</font>;
00147         }
00148     }
00149 }
00150 
<a name="l00152"></a><a class="code" href="class_c_sword_backend.html#a4">00152</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a4">CSwordBackend::shutdownModules</a>(){
00153     <font class="keywordflow">for</font> (m_moduleList.first(); m_moduleList.current(); m_moduleList.next()) {
00154         <font class="keywordflow">if</font> (m_moduleList.current()) {
00155             <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* current = m_moduleList.current();
00156             m_moduleList.take();
00157             <font class="keyword">delete</font> current;
00158         }       
00159     }
00160     m_moduleList.clear();   
00161     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00162 }
00163 
<a name="l00165"></a><a class="code" href="class_c_sword_backend.html#a8">00165</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a8">CSwordBackend::isOptionEnabled</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a> type) {
00166     <font class="keywordflow">return</font> (getGlobalOption( <a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1() ) == <font class="stringliteral">"On"</font>);
00167 }
00168 
<a name="l00170"></a><a class="code" href="class_c_sword_backend.html#a5">00170</a> <font class="keywordtype">void</font> <a class="code" href="class_c_sword_backend.html#a5">CSwordBackend::setOption</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a> type, <font class="keyword">const</font> <font class="keywordtype">bool</font> enable){
00171     string value;
00172     <font class="keywordflow">switch</font> (type) {
00173         <font class="keywordflow">case</font> textualVariants:
00174             value = enable ? <font class="stringliteral">"Secondary Reading"</font> : <font class="stringliteral">"Primary Reading"</font>;
00175             <font class="comment">//if on, user alternative (secondary) reading</font>
00176             <font class="keywordflow">break</font>;
00177         <font class="keywordflow">default</font>:        
00178             value = enable ? <font class="stringliteral">"On"</font>: <font class="stringliteral">"Off"</font>;
00179             <font class="keywordflow">break</font>;
00180     };
00181     setGlobalOption(<a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1(), value.c_str());
00182 }
00183 
00184 <font class="keywordtype">void</font> CSwordBackend::setFilterOptions( <font class="keyword">const</font> CSwordBackend::FilterOptionsBool options){
00185   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( footnotes,                     options.footnotes );
00186   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( strongNumbers,             options.strongNumbers );
00187   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( headings,                      options.headings );
00188   <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( morphTags,                     options.morphTags );
00189     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( lemmas,                          options.lemmas );
00190     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( hebrewPoints,                options.hebrewPoints );
00191     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( hebrewCantillation,  options.hebrewCantillation );
00192     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( greekAccents,                options.greekAccents);
00193     <a class="code" href="class_c_sword_backend.html#a5">setOption</a>( textualVariants,         options.textualVariants);   
00194 <font class="comment">//  setOption( scriptureReferences,         options.scriptureReferences);   </font>
00195 }
00196 
00197 <font class="keywordtype">void</font> CSwordBackend::setDisplayOptions( <font class="keyword">const</font> CSwordBackend::DisplayOptionsBool options){
00198   <font class="keywordflow">if</font> (m_displays.entry)
00199         m_displays.entry-&gt;setDisplayOptions(options);   
00200   <font class="keywordflow">if</font> (m_displays.chapter)
00201         m_displays.chapter-&gt;setDisplayOptions(options); 
00202   <font class="keywordflow">if</font> (m_displays.book)
00203         m_displays.book-&gt;setDisplayOptions(options);
00204 }
00205 
<a name="l00207"></a><a class="code" href="class_c_sword_backend.html#a10">00207</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#a10">CSwordBackend::findModuleByDescription</a>(<font class="keyword">const</font> QString&amp; description){
00208   <font class="keywordflow">if</font> (m_moduleList.count())
00209     <font class="keywordflow">for</font> ( m_moduleList.first();m_moduleList.current();m_moduleList.next() )
00210       <font class="keywordflow">if</font> ( m_moduleList.current()-&gt;config(CSwordModuleInfo::Description) == description )
00211         <font class="keywordflow">return</font> m_moduleList.current();
00212   <font class="keywordflow">return</font> 0;
00213 }
00214 
<a name="l00216"></a><a class="code" href="class_c_sword_backend.html#d0">00216</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d0">CSwordBackend::findModuleNameByDescription</a>(<font class="keyword">const</font> QString&amp; description){
00217     <font class="keywordflow">if</font> (moduleDescriptionMap.contains(description))
00218         <font class="keywordflow">return</font> moduleDescriptionMap[description];
00219   <font class="keywordflow">return</font> QString::null;
00220 }
00221 
<a name="l00223"></a><a class="code" href="class_c_sword_backend.html#a11">00223</a> <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#a11">CSwordBackend::findModuleByName</a>(<font class="keyword">const</font> QString&amp; name){
00224   <font class="keywordflow">if</font> (m_moduleList.count())
00225     <font class="keywordflow">for</font> ( m_moduleList.first(); m_moduleList.current(); m_moduleList.next() )
00226       <font class="keywordflow">if</font> ( m_moduleList.current()-&gt;name() == name )
00227         <font class="keywordflow">return</font> m_moduleList.current();
00228   <font class="keywordflow">return</font> 0;
00229 }
00230 
<a name="l00232"></a><a class="code" href="class_c_sword_backend.html#a13">00232</a> <font class="keyword">const</font> <font class="keywordtype">bool</font> <a class="code" href="class_c_sword_backend.html#a13">CSwordBackend::moduleConfig</a>(<font class="keyword">const</font> QString&amp; module, SWConfig&amp; moduleConfig) {
00233     SectionMap::iterator section;
00234     DIR *dir = opendir(configPath);
00235     <font class="keyword">struct </font>dirent *ent;
00236     
00237     <font class="keywordtype">bool</font> foundConfig = <font class="keyword">false</font>;   
00238     QString modFile;    
00239     <font class="keywordflow">if</font> (dir) {    <font class="comment">// find and update .conf file</font>
00240         rewinddir(dir);
00241         <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00242             <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00243                 modFile = QString::fromLocal8Bit(configPath);
00244                 modFile += QString::fromLatin1(<font class="stringliteral">"/"</font>);
00245                 modFile += QString::fromLocal8Bit(ent-&gt;d_name);
00246                 <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00247                 section =   <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00248                 foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.end() );
00249             }
00250         }
00251         closedir(dir);
00252     }
00253     <font class="keywordflow">else</font> { <font class="comment">//try to read mods.conf</font>
00254         <font class="comment">//moduleConfig = SWConfig( configPath + "/mods.conf" );</font>
00255         <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig(<font class="stringliteral">""</font>);<font class="comment">//global config     </font>
00256         section =   config-&gt;Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );       
00257         foundConfig = ( section != config-&gt;Sections.end() );        
00258         
00259         ConfigEntMap::iterator entry;
00260         <font class="keywordflow">if</font> (foundConfig) { <font class="comment">//copy module section</font>
00261             <font class="keywordflow">for</font> (entry = (*section).second.begin(); entry != (*section).second.end(); entry++) {
00262                     <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections[(*section).first].insert(ConfigEntMap::value_type((*entry).first, (*entry).second));
00263             }
00264         }           
00265     }
00266     
00267     <font class="keywordflow">if</font> (!foundConfig &amp;&amp; configType != 2) { <font class="comment">//search in $HOME/.sword/</font>
00268         QString myPath = QString::fromLatin1(<font class="stringliteral">"%1/.sword/mods.d"</font>).arg(getenv(<font class="stringliteral">"HOME"</font>));
00269         dir = opendir(myPath.latin1());
00270         <font class="keywordflow">if</font> (dir) {
00271             rewinddir(dir);
00272             <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00273                 <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00274                     modFile = myPath;
00275                     modFile += <font class="stringliteral">"/"</font>;
00276                     modFile += ent-&gt;d_name;
00277                     <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00278                     section =   <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00279                     foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a13">moduleConfig</a>.Sections.end() );
00280                 }
00281             }
00282             closedir(dir);
00283         }
00284     }
00285     <font class="keywordflow">return</font> foundConfig;
00286 }
00287 
<a name="l00289"></a><a class="code" href="class_c_sword_backend.html#d1">00289</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d1">CSwordBackend::optionName</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a> option ){
00290     <font class="keywordflow">switch</font> (option) {
00291         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00292             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Footnotes"</font>);
00293         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00294             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Strong's Numbers"</font>);
00295         <font class="keywordflow">case</font> CSwordBackend::headings:
00296             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Headings"</font>);
00297         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00298             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Morphological Tags"</font>);
00299     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00300             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Lemmas"</font>);
00301         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00302             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Hebrew Vowel Points"</font>);
00303         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00304             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Hebrew Cantillation"</font>);
00305         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00306             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Greek Accents"</font>);
00307         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00308             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Textual Variants"</font>); 
00309         <font class="keywordflow">case</font> CSwordBackend::scriptureReferences:
00310             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Scripture References"</font>);
00311     }
00312     <font class="keywordflow">return</font> QString::null;   
00313 }
00314 
<a name="l00316"></a><a class="code" href="class_c_sword_backend.html#d3">00316</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d3">CSwordBackend::translatedOptionName</a>(<font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a> option){
00317     <font class="keywordflow">switch</font> (option) {
00318         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00319             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Footnotes"</font>);
00320         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00321             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Strong's Numbers"</font>);
00322         <font class="keywordflow">case</font> CSwordBackend::headings:
00323             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Headings"</font>);
00324         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00325             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Morphological Tags"</font>);
00326     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00327             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Lemmas"</font>);
00328         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00329             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Hebrew Vowel Points"</font>);
00330         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00331             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Hebrew Cantillation"</font>);
00332         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00333             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Greek Accents"</font>);
00334         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00335             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Textual Variants"</font>);
00336         <font class="keywordflow">case</font> CSwordBackend::scriptureReferences:
00337             <font class="keywordflow">return</font> i18n(<font class="stringliteral">"Scripture Cross-references"</font>);  
00338 
00339     }
00340     <font class="keywordflow">return</font> QString::null;
00341 }
00342 
00343 
<a name="l00344"></a><a class="code" href="class_c_sword_backend.html#d2">00344</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#d2">CSwordBackend::configOptionName</a>( <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#s15">CSwordBackend::FilterOptions</a> option ){
00345     <font class="keywordflow">switch</font> (option) {
00346         <font class="keywordflow">case</font> CSwordBackend::footnotes:
00347             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Footnotes"</font>);
00348         <font class="keywordflow">case</font> CSwordBackend::strongNumbers:
00349             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Strongs"</font>);
00350         <font class="keywordflow">case</font> CSwordBackend::headings:
00351             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Headings"</font>);
00352         <font class="keywordflow">case</font> CSwordBackend::morphTags:
00353             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Morph"</font>);
00354     <font class="keywordflow">case</font> CSwordBackend::lemmas:
00355             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Lemma"</font>);
00356         <font class="keywordflow">case</font> CSwordBackend::hebrewPoints:
00357             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"HebrewPoints"</font>);
00358         <font class="keywordflow">case</font> CSwordBackend::hebrewCantillation:
00359             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Cantillation"</font>);
00360         <font class="keywordflow">case</font> CSwordBackend::greekAccents:
00361             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"GreekAccents"</font>);
00362         <font class="keywordflow">case</font> CSwordBackend::textualVariants:
00363             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Variants"</font>);
00364         <font class="keywordflow">case</font> CSwordBackend::scriptureReferences: <font class="comment">//scriprefs don't work yet</font>
00365             <font class="keywordflow">return</font> QString::fromLatin1(<font class="stringliteral">"Scripref"</font>);
00366     }
00367     <font class="keywordflow">return</font> QString::null;   
00368 }
00369 
<a name="l00370"></a><a class="code" href="class_c_sword_backend.html#a9">00370</a> <font class="keyword">const</font> QString <a class="code" href="class_c_sword_backend.html#a9">CSwordBackend::booknameLanguage</a>( <font class="keyword">const</font> QString&amp; language ) {
00371     <font class="keywordflow">if</font> (!language.isNull())
00372         LocaleMgr::systemLocaleMgr.setDefaultLocaleName( language.local8Bit() );
00373     <font class="keywordflow">return</font> QString::fromLatin1(LocaleMgr::systemLocaleMgr.getDefaultLocaleName());
00374 }
00375 
<a name="l00377"></a><a class="code" href="class_c_sword_backend.html#a14">00377</a> <font class="keyword">const</font> SWVersion <a class="code" href="class_c_sword_backend.html#a14">CSwordBackend::Version</a>() {
00378     <font class="keywordflow">return</font> SWVersion::currentVersion;
00379 }
00380 
<a name="l00382"></a><a class="code" href="class_c_sword_backend.html#o3">00382</a> SWFilter* <font class="keyword">const</font> <a class="code" href="class_c_sword_backend.html#a15">CSwordBackend::transliterator</a>() {
00383   <font class="keywordflow">if</font> (isICU &amp;&amp; !m_filters.transliterator)
00384     m_filters.transliterator = <font class="keyword">new</font> UTF8Transliterator();
00385   <font class="keywordflow">return</font> m_filters.transliterator;
00386 }
</pre></div><hr><address align="right"><small>Generated on Tue Jul 16 13:53:09 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
