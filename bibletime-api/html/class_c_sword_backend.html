<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CSwordBackend class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>CSwordBackend  Class Reference</h1>This is the implementation of CBackend for Sword. The backend implementation of Sword. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a>&gt;</code>
<p>
Collaboration diagram for CSwordBackend:<p><center><img src="class_c_sword_backend__coll__graph.png" border="0" usemap="#_c_sword_backend__coll__map" alt="Collaboration graph"></center>
<map name="_c_sword_backend__coll__map">
<area href="class_c_h_t_m_l_entry_display.html" shape="rect" coords="20,11,151,29" alt="">
<area href="class_c_h_t_m_l_chapter_display.html" shape="rect" coords="147,80,291,99" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="class_c_sword_backend-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#s16">FilterOptions</a> { <br>
&nbsp;&nbsp;<b>footnotes</b>, 
<b>strongNumbers</b>, 
<b>headings</b>, 
<b>morphTags</b>, 
<br>
&nbsp;&nbsp;<b>lemmas</b>, 
<b>hebrewPoints</b>, 
<b>hebrewCantillation</b>, 
<b>greekAccents</b>, 
<br>
&nbsp;&nbsp;<b>filterOptionsMIN</b> =  footnotes, 
<b>filterOptionsMAX</b> =  greekAccents
<br>
 }</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>These are the options which could be supported by modules and by this backend.</em> <a href="#s16">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><b>ErrorCode</b> { <br>
&nbsp;&nbsp;<b>noError</b>, 
<b>noSwordConfigFile</b>, 
<b>noSwordModuleDirectory</b>, 
<b>noSwordModuleConfigDirectory</b>, 
<br>
&nbsp;&nbsp;<b>noModulesAvailable</b>, 
<b>unknown</b>
<br>
 }</td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a0">CSwordBackend</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The constructor of the Sword backend.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a1">~CSwordBackend</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The destrctor of this backend.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual ListCSwordModuleInfo <br>
*const&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a2">moduleList</a> () const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This function returns the list of available modules managed by this backend.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual const ErrorCode&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a3">initModules</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initializes the Sword modules.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual const bool&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a4">shutdownModules</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This function deinitializes the modules and deletes them.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a5">setOption</a> (const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a> type, const bool enable)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets the given options enabled or disabled depending on the second parameter.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a6" doxytag="CSwordBackend::setFilterOptions"></a>
void&nbsp;</td><td valign=bottom><b>setFilterOptions</b> (const CSwordBackend::FilterOptionsBool options)</td></tr>
<tr><td nowrap align=right valign=top><a name="a7" doxytag="CSwordBackend::setDisplayOptions"></a>
void&nbsp;</td><td valign=bottom><b>setDisplayOptions</b> (const CSwordBackend::DisplayOptionsBool options)</td></tr>
<tr><td nowrap align=right valign=top>virtual const bool&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a8">isOptionEnabled</a> (const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a> type)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns true if the given option is enabled.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a9">Load</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>I copied this method from swmgr.cpp of SWORD.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a10" doxytag="CSwordBackend::booknameLanguage"></a>
const QString&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a10">booknameLanguage</a> (const QString &amp;=QString::null)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets the language for the international booknames of Sword.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual <a class="el" href="class_c_sword_module_info.html">CSwordModuleInfo</a> <br>
*const&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a11">findModuleByDescription</a> (const QString &amp;description)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This function searches for a module with the specified description.</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *const&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a12">findModuleByName</a> (const QString &amp;name)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This function searches for a module with the specified name.</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>SWConfig *const&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a13">getConfig</a> () const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns our local config object to store the cipher keys etc.</em> <a href="#a13">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>const bool&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a14">moduleConfig</a> (const QString &amp;module, SWConfig &amp;moduleConfig)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Tries to find the config object for the module.</em> <a href="#a14">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a15" doxytag="CSwordBackend::Version"></a>
virtual const SWVersion&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#a15">Version</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the version of the Sword library.</em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Static Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>const QString&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#d0">findModuleNameByDescription</a> (const QString &amp;description)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This function searches for a module with the specified description.</em> <a href="#d0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="d1" doxytag="CSwordBackend::optionName"></a>
const QString&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#d1">optionName</a> (const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a> option)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the text used for the option given as parameter.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="d2" doxytag="CSwordBackend::configOptionName"></a>
const QString&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#d2">configOptionName</a> (const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a> option)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the text used for the option given as parameter.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="d3" doxytag="CSwordBackend::translatedOptionName"></a>
const QString&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#d3">translatedOptionName</a> (const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a> option)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the translated name of the option given as parameter.</em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="class_c_sword_backend.html#b0">AddRenderFilters</a> (SWModule *module, ConfigEntMap &amp;section)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Adds a render filter to the module.</em> <a href="#b0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="o0" doxytag="CSwordBackend::m_gbfFilter"></a>
SWFilter *&nbsp;</td><td valign=bottom><b>m_gbfFilter</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o1" doxytag="CSwordBackend::m_plainTextFilter"></a>
SWFilter *&nbsp;</td><td valign=bottom><b>m_plainTextFilter</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o2" doxytag="CSwordBackend::m_thmlFilter"></a>
SWFilter *&nbsp;</td><td valign=bottom><b>m_thmlFilter</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o3" doxytag="CSwordBackend::m_moduleList"></a>
ListCSwordModuleInfo *&nbsp;</td><td valign=bottom><b>m_moduleList</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o4" doxytag="CSwordBackend::m_errorCode"></a>
ErrorCode&nbsp;</td><td valign=bottom><b>m_errorCode</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o5" doxytag="CSwordBackend::m_chapterDisplay"></a>
<a class="el" href="class_c_h_t_m_l_chapter_display.html">CHTMLChapterDisplay</a> *&nbsp;</td><td valign=bottom><b>m_chapterDisplay</b></td></tr>
<tr><td nowrap align=right valign=top><a name="o6" doxytag="CSwordBackend::m_entryDisplay"></a>
<a class="el" href="class_c_h_t_m_l_entry_display.html">CHTMLEntryDisplay</a> *&nbsp;</td><td valign=bottom><b>m_entryDisplay</b></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the implementation of CBackend for Sword. The backend implementation of Sword.
<p>
It's additionally derived from SWMgr to provide functions of Sword.
<p>
<dl compact><dt><b>
Author: </b><dd>
The <a class="el" href="class_bible_time.html">BibleTime</a> team </dl><dl compact><dt><b>
Version: </b><dd>
</dl><dl compact><dt><b>
Id: </b><dd>
 cswordbackend.h,v 1.19 2002/03/06 22:02:41 joachim Exp </dl> 
<p>

<p>
Definition at line <a class="el" href="cswordbackend_8h-source.html#l00049">49</a> of file <a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a name="s16" doxytag="CSwordBackend::FilterOptions"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> enum CSwordBackend::FilterOptions
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
These are the options which could be supported by modules and by this backend.
<p>
It's used in <a class="el" href="class_c_sword_backend.html#a8">isOptionEnabled</a> and <a class="el" href="class_c_sword_backend.html#a5">setOption</a> 
<p>
Definition at line <a class="el" href="cswordbackend_8h-source.html#l00055">55</a> of file <a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a>.
<p>
Referenced by <a class="el" href="cswordbackend_8cpp-source.html#l00418">configOptionName</a>, <a class="el" href="cgroupmanageritem_8cpp-source.html#l00207">CGroupManagerItem::getToolTip</a>, <a class="el" href="cswordbackend_8cpp-source.html#l00181">isOptionEnabled</a>, <a class="el" href="cswordbackend_8cpp-source.html#l00371">optionName</a>, <a class="el" href="cswordbackend_8cpp-source.html#l00186">setOption</a>, <a class="el" href="cgroupmanager_8cpp-source.html#l00551">CGroupManager::slotShowAbout</a>, and <a class="el" href="cswordbackend_8cpp-source.html#l00394">translatedOptionName</a>.
<p>
<div class="fragment"><pre>00055                      {
00056     footnotes,
00057     strongNumbers,
00058     headings,
00059     morphTags,
00060         lemmas,
00061         hebrewPoints,
00062         hebrewCantillation,
00063         greekAccents,
00064         filterOptionsMIN = footnotes,
00065         filterOptionsMAX = greekAccents
00066     };
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="CSwordBackend::CSwordBackend"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CSwordBackend::CSwordBackend </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The constructor of the Sword backend.
<p>
It creates the SWModule objects using SWMgr's methods, it adds the necessary filters for the module format. 
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00051">51</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
<div class="fragment"><pre>00052     : SWMgr(0,0,<font class="keyword">false</font>,<font class="keyword">new</font> EncodingFilterMgr( ENC_UTF8 )),
00053     m_errorCode(noError),
00054     m_entryDisplay(0),
00055     m_chapterDisplay(0),
00056     m_moduleList(0),
00057     m_gbfFilter(0),
00058     m_plainTextFilter(0),
00059     m_thmlFilter(0)
00060 {   
00061 
00062 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="CSwordBackend::~CSwordBackend"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CSwordBackend::~CSwordBackend </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The destrctor of this backend.
<p>
This function shuts the modules down using <a class="el" href="class_c_sword_backend.html#a4">shutdownModules</a>. 
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00064">64</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
References <a class="el" href="cswordbackend_8cpp-source.html#l00168">shutdownModules</a>.
<p>
<div class="fragment"><pre>00064                              {
00065     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>();  
00066     <font class="comment">//delete filters</font>
00067     <font class="keyword">delete</font> m_gbfFilter;
00068     <font class="keyword">delete</font> m_plainTextFilter;   
00069     <font class="keyword">delete</font> m_thmlFilter;    
00070 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="b0" doxytag="CSwordBackend::AddRenderFilters"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CSwordBackend::AddRenderFilters </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">SWModule *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>module</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>ConfigEntMap &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>section</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a render filter to the module.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>module</em>&nbsp;</td><td>
Add a render filter to this module! </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00127">127</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
<div class="fragment"><pre>00127                                                                             {
00128     string sourceformat;
00129     string moduleDriver;
00130     ConfigEntMap::iterator entry;
00131     <font class="keywordtype">bool</font> noDriver = <font class="keyword">true</font>;
00132 
00133     sourceformat = ((entry = section.find(<font class="stringliteral">"SourceType"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00134     moduleDriver = ((entry = section.find(<font class="stringliteral">"ModDrv"</font>)) != section.end()) ? (*entry).second : (string) <font class="stringliteral">""</font>;
00135 
00136     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"GBF"</font>)) {
00137         <font class="keywordflow">if</font> (!m_gbfFilter)
00138             m_gbfFilter = <font class="keyword">new</font> <a class="code" href="class_b_t___g_b_f_h_t_m_l.html">BT_GBFHTML</a>();
00139         module-&gt;AddRenderFilter(m_gbfFilter);
00140         noDriver = <font class="keyword">false</font>;
00141     }
00142 
00143     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"PLAIN"</font>)) {
00144         <font class="keywordflow">if</font> (!m_plainTextFilter)
00145             m_plainTextFilter = <font class="keyword">new</font> PLAINHTML();    
00146         module-&gt;AddRenderFilter(m_plainTextFilter);
00147         noDriver = <font class="keyword">false</font>;
00148     }
00149 
00150     <font class="keywordflow">if</font> (!stricmp(sourceformat.c_str(), <font class="stringliteral">"ThML"</font>)) {
00151         <font class="keywordflow">if</font> (!m_thmlFilter)
00152             m_thmlFilter = <font class="keyword">new</font> <a class="code" href="class_b_t___th_m_l_h_t_m_l.html">BT_ThMLHTML</a>();
00153         module-&gt;AddRenderFilter(m_thmlFilter);
00154         noDriver = <font class="keyword">false</font>;
00155     }
00156 
00157     <font class="keywordflow">if</font> (noDriver){
00158         <font class="keywordflow">if</font> (!stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawCom"</font>) || !stricmp(moduleDriver.c_str(), <font class="stringliteral">"RawLD"</font>)) {
00159             <font class="keywordflow">if</font> (!m_plainTextFilter)
00160                 m_plainTextFilter = <font class="keyword">new</font> PLAINHTML();
00161             module-&gt;AddRenderFilter(m_plainTextFilter);
00162             noDriver = <font class="keyword">false</font>;
00163         }
00164     }
00165 }
</pre></div>    </td>
  </tr>
</table>
<a name="a11" doxytag="CSwordBackend::findModuleByDescription"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *const CSwordBackend::findModuleByDescription </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>description</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function searches for a module with the specified description.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>description</em>&nbsp;</td><td>
The description of the desired module </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
pointer to the desired module; null if no module has the specified description </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00289">289</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
<div class="fragment"><pre>00289                                                                                         {
00290   <font class="keywordflow">if</font> (m_moduleList &amp;&amp; m_moduleList-&gt;count())
00291     <font class="keywordflow">for</font> ( m_moduleList-&gt;first();m_moduleList-&gt;current();m_moduleList-&gt;next() )
00292       <font class="keywordflow">if</font> ( m_moduleList-&gt;current()-&gt;config(CSwordModuleInfo::Description) == description )
00293         <font class="keywordflow">return</font> m_moduleList-&gt;current();
00294   <font class="keywordflow">return</font> 0;
00295 }
</pre></div>    </td>
  </tr>
</table>
<a name="a12" doxytag="CSwordBackend::findModuleByName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_c_sword_module_info.html">CSwordModuleInfo</a> *const CSwordBackend::findModuleByName </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>name</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function searches for a module with the specified name.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>description</em>&nbsp;</td><td>
The name of the desired module </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
pointer to the desired module; null if no module has the specified name </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00305">305</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
Referenced by <a class="el" href="chtmlwidget_8cpp-source.html#l00312">CHTMLWidget::contentsDropEvent</a>, <a class="el" href="chtmlwidget_8cpp-source.html#l00644">CHTMLWidget::emitLinkClicked</a>, <a class="el" href="csearchdialogmodulechooser_8cpp-source.html#l00138">CSearchDialogModuleChooser::getChosenModules</a>, <a class="el" href="cbiblepresenter_8cpp-source.html#l00211">CBiblePresenter::lookup</a>, <a class="el" href="cgroupmanager_8cpp-source.html#l01040">CGroupManager::readSwordBookmarks</a>, and <a class="el" href="cgroupmanager_8cpp-source.html#l01214">CGroupManager::readSwordModules</a>.
<p>
<div class="fragment"><pre>00305                                                                           {
00306   <font class="keywordflow">if</font> (m_moduleList &amp;&amp; m_moduleList-&gt;count())
00307     <font class="keywordflow">for</font> ( m_moduleList-&gt;first(); m_moduleList-&gt;current(); m_moduleList-&gt;next() )
00308       <font class="keywordflow">if</font> ( m_moduleList-&gt;current()-&gt;name() == name )
00309         <font class="keywordflow">return</font> m_moduleList-&gt;current();
00310   <font class="keywordflow">return</font> 0;
00311 }
</pre></div>    </td>
  </tr>
</table>
<a name="d0" doxytag="CSwordBackend::findModuleNameByDescription"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const QString CSwordBackend::findModuleNameByDescription </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>description</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function searches for a module with the specified description.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>description</em>&nbsp;</td><td>
The description of the desired module </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
pointer to the desired module; null if no module has the specified description </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00298">298</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
Referenced by <a class="el" href="creferencemanager_8cpp-source.html#l00195">CReferenceManager::preferredModule</a>.
<p>
<div class="fragment"><pre>00298                                                                                   {
00299     <font class="keywordflow">if</font> (moduleDescriptionMap.contains(description))
00300         <font class="keywordflow">return</font> moduleDescriptionMap[description];
00301   <font class="keywordflow">return</font> QString::null;
00302 }
</pre></div>    </td>
  </tr>
</table>
<a name="a13" doxytag="CSwordBackend::getConfig"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SWConfig *const CSwordBackend::getConfig </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns our local config object to store the cipher keys etc.
<p>
<dl compact><dt><b>
Returns: </b><dd>
Our global config object to store the cipher keys etc. </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8h-source.html#l00211">211</a> of file <a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a>.
<p>
Referenced by <a class="el" href="cswordmoduleinfo_8cpp-source.html#l00109">CSwordModuleInfo::hasVersion</a>, <a class="el" href="cswordmoduleinfo_8cpp-source.html#l00097">CSwordModuleInfo::isEncrypted</a>, and <a class="el" href="cswordmoduleinfo_8cpp-source.html#l00069">CSwordModuleInfo::unlock</a>.
<p>
<div class="fragment"><pre>00211                                                       {
00212     <font class="keywordflow">return</font> config;
00213 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="CSwordBackend::initModules"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const CSwordBackend::ErrorCode CSwordBackend::initModules </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the Sword modules.
<p>
<dl compact><dt><b>
Returns: </b><dd>
True if the initializiation was succesful, otherwise return false. </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00081">81</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
References <a class="el" href="cswordmoduleinfo_8h-source.html#l00186">CSwordModuleInfo::module</a>, and <a class="el" href="cswordbackend_8cpp-source.html#l00168">shutdownModules</a>.
<p>
Referenced by <a class="el" href="bibletime__init_8cpp-source.html#l00298">BibleTime::initBackends</a>.
<p>
<div class="fragment"><pre>00081                                                         {
00082     ModMap::iterator it;
00083     SWModule*   curMod = 0;
00084     <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* newModule = 0;
00085     <font class="keywordflow">if</font> (!m_moduleList)
00086         m_moduleList = <font class="keyword">new</font> ListCSwordModuleInfo();
00087             
00088     <a class="code" href="class_c_sword_backend.html#a4">shutdownModules</a>(); <font class="comment">//remove previous modules</font>
00089     m_moduleList-&gt;clear();  
00090 
00091     <font class="keywordflow">for</font> (it = Modules.begin(); it != Modules.end(); it++) {
00092         curMod = (*it).second;
00093         <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Biblical Texts"</font>)) {
00094             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_bible_module_info.html">CSwordBibleModuleInfo</a>(curMod);
00095             CHECK_HTML_CHAPTER_DISLPAY  <font class="comment">//a macro to check the chapter display          </font>
00096             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_chapterDisplay);
00097         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Commentaries"</font>)) {
00098             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_commentary_module_info.html">CSwordCommentaryModuleInfo</a>(curMod);
00099             CHECK_HTML_ENTRY_DISLPAY    <font class="comment">//a macro to check the entry display</font>
00100             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_entryDisplay);
00101         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Lexicons / Dictionaries"</font>)) {
00102             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_lexicon_module_info.html">CSwordLexiconModuleInfo</a>(curMod);
00103             CHECK_HTML_ENTRY_DISLPAY    <font class="comment">//a macro to check the entry display            </font>
00104             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_entryDisplay);
00105         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!strcmp(curMod-&gt;Type(), <font class="stringliteral">"Generic Book"</font>)) {
00106             newModule = <font class="keyword">new</font> <a class="code" href="class_c_sword_book_module_info.html">CSwordBookModuleInfo</a>(curMod);
00107             CHECK_HTML_ENTRY_DISLPAY    <font class="comment">//a macro to check the entry display            </font>
00108             newModule-&gt;<a class="code" href="class_c_sword_module_info.html#a5">module</a>()-&gt;Disp(m_entryDisplay);
00109         }
00110 
00111         <font class="keywordflow">if</font> (newModule)  <font class="comment">//append the new modules to our list</font>
00112             m_moduleList-&gt;append( newModule );
00113     }   
00114     <font class="keywordflow">if</font> (m_moduleList-&gt;count() == 0)
00115         m_errorCode = noModulesAvailable;
00116         
00117 <font class="comment">//module are now available, fill the static lists</font>
00118     <font class="keywordflow">for</font> (m_moduleList-&gt;first(); m_moduleList-&gt;current(); m_moduleList-&gt;next()) {
00119         moduleDescriptionMap.insert(m_moduleList-&gt;current()-&gt;config(CSwordModuleInfo::Description), m_moduleList-&gt;current()-&gt;name());
00120     }
00121 
00122     <font class="keywordflow">return</font> m_errorCode;
00123 }
</pre></div>    </td>
  </tr>
</table>
<a name="a8" doxytag="CSwordBackend::isOptionEnabled"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool CSwordBackend::isOptionEnabled </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>type</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if the given option is enabled.
<p>
<dl compact><dt><b>
Returns: </b><dd>
Returns true if the options given as aparameter is switched on at this time, otherwise return false. </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00181">181</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
References <a class="el" href="cswordbackend_8h-source.html#l00055">FilterOptions</a>, and <a class="el" href="cswordbackend_8cpp-source.html#l00371">optionName</a>.
<p>
<div class="fragment"><pre>00181                                                                                 {
00182     <font class="keywordflow">return</font> (getGlobalOption( <a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1() ) == <font class="stringliteral">"On"</font>);
00183 }
</pre></div>    </td>
  </tr>
</table>
<a name="a9" doxytag="CSwordBackend::Load"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CSwordBackend::Load </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
I copied this method from swmgr.cpp of SWORD.
<p>
This is just a workaround that <a class="el" href="class_bible_time.html">BibleTime</a> isn't closed when mods.d wasn't found. 
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00214">214</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
Referenced by <a class="el" href="bibletime__init_8cpp-source.html#l00298">BibleTime::initBackends</a>.
<p>
<div class="fragment"><pre>00214                          {
00215     <font class="keywordflow">if</font> (!config) {  <font class="comment">// If we weren't passed a config object at construction, find a config file</font>
00216         <font class="keywordflow">if</font> (!configPath)    <font class="comment">// If we weren't passed a config path at construction...</font>
00217             findConfig(&amp;configType, &amp;prefixPath, &amp;configPath);
00218         <font class="keywordflow">if</font> (configPath) {
00219             <font class="keywordflow">if</font> (configType)
00220                 loadConfigDir(configPath);
00221             <font class="keywordflow">else</font>    config = myconfig = <font class="keyword">new</font> SWConfig(configPath);
00222         }
00223     }
00224 
00225     <font class="keywordflow">if</font> (config) {
00226         SectionMap::iterator Sectloop, Sectend;
00227         ConfigEntMap::iterator Entryloop, Entryend;
00228 
00229         DeleteMods();
00230 
00231         <font class="keywordflow">for</font> (Sectloop = config-&gt;Sections.lower_bound(<font class="stringliteral">"Globals"</font>), Sectend = config-&gt;Sections.upper_bound(<font class="stringliteral">"Globals"</font>); Sectloop != Sectend; Sectloop++) {      <font class="comment">// scan thru all 'Globals' sections</font>
00232             <font class="keywordflow">for</font> (Entryloop = (*Sectloop).second.lower_bound(<font class="stringliteral">"AutoInstall"</font>), Entryend = (*Sectloop).second.upper_bound(<font class="stringliteral">"AutoInstall"</font>); Entryloop != Entryend; Entryloop++)   <font class="comment">// scan thru all AutoInstall entries</font>
00233                 InstallScan((*Entryloop).second.c_str());       <font class="comment">// Scan AutoInstall entry directory for new modules and install</font>
00234         }       
00235         <font class="keywordflow">if</font> (configType) {   <font class="comment">// force reload on config object because we may have installed new modules</font>
00236             <font class="keyword">delete</font> myconfig;
00237             config = myconfig = 0;
00238             loadConfigDir(configPath);
00239         }
00240         <font class="keywordflow">else</font>    config-&gt;Load();
00241 
00242         CreateMods();
00243 
00244 <font class="comment">//  augment config with ~/.sword/mods.d if it exists ---------------------</font>
00245             <font class="keywordtype">char</font> *envhomedir  = getenv (<font class="stringliteral">"HOME"</font>);
00246             <font class="keywordflow">if</font> (envhomedir != NULL &amp;&amp; configType != 2) { <font class="comment">// 2 = user only</font>
00247                 string path = envhomedir;
00248                 <font class="keywordflow">if</font> ((envhomedir[strlen(envhomedir)-1] != <font class="charliteral">'\\'</font>) &amp;&amp; (envhomedir[strlen(envhomedir)-1] != <font class="charliteral">'/'</font>))
00249                     path += <font class="stringliteral">"/"</font>;
00250                 path += <font class="stringliteral">".sword/"</font>;
00251                 <font class="keywordflow">if</font> (FileMgr::existsDir(path.c_str(), <font class="stringliteral">"mods.d"</font>)) {
00252                     <font class="keywordtype">char</font> *savePrefixPath = 0;
00253                     <font class="keywordtype">char</font> *saveConfigPath = 0;
00254                     SWConfig *saveConfig = 0;
00255                     stdstr(&amp;savePrefixPath, prefixPath);
00256                     stdstr(&amp;prefixPath, path.c_str());
00257                     path += <font class="stringliteral">"mods.d"</font>;
00258                     stdstr(&amp;saveConfigPath, configPath);
00259                     stdstr(&amp;configPath, path.c_str());
00260                     saveConfig = config;
00261                     config = myconfig = 0;
00262                     loadConfigDir(configPath);
00263 
00264                     CreateMods();
00265 
00266                     stdstr(&amp;prefixPath, savePrefixPath);
00267                     <font class="keyword">delete</font> []savePrefixPath;
00268                     stdstr(&amp;configPath, saveConfigPath);
00269                     <font class="keyword">delete</font> []saveConfigPath;
00270                     (*saveConfig) += *config;
00271                     homeConfig = myconfig;
00272                     config = myconfig = saveConfig;
00273                 }
00274             }
00275 <font class="comment">// -------------------------------------------------------------------------</font>
00276   }
00277     <font class="keywordflow">else</font> {
00278         <font class="keywordflow">if</font> (!configPath)
00279             m_errorCode = noSwordModuleConfigDirectory;
00280         <font class="keywordflow">else</font>
00281             m_errorCode = noModulesAvailable;   
00282         qWarning(<font class="stringliteral">"BibleTime: Can't find 'mods.conf' or 'mods.d'. Please setup /etc/sword.conf! Read the documentation on www.bibletime.de how to do this!"</font>);
00283     }
00284 <font class="comment">//  if ( (access("/etc/sword.conf",R_OK) == -1) &amp;&amp; !strlen(getenv("SWORD_PATH")))</font>
00285 <font class="comment">//      m_errorCode = noSwordConfigFile;</font>
00286 }
</pre></div>    </td>
  </tr>
</table>
<a name="a14" doxytag="CSwordBackend::moduleConfig"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool CSwordBackend::moduleConfig </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>module</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>SWConfig &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>moduleConfig</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tries to find the config object for the module.
<p>
The second paramter will be the found config. <dl compact><dt><b>
Returns: </b><dd>
True if the config was found, false if not. If false is returned the moduleConfig object is in undefined/unknwon state. </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00314">314</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
References <a class="el" href="cswordbackend_8cpp-source.html#l00314">moduleConfig</a>.
<p>
Referenced by <a class="el" href="cswordbackend_8cpp-source.html#l00314">moduleConfig</a>, and <a class="el" href="cswordmoduleinfo_8cpp-source.html#l00069">CSwordModuleInfo::unlock</a>.
<p>
<div class="fragment"><pre>00314                                                                                     {
00315     SectionMap::iterator section;
00316     DIR *dir = opendir(configPath);
00317     <font class="keyword">struct </font>dirent *ent;
00318     
00319     <font class="keywordtype">bool</font> foundConfig = <font class="keyword">false</font>;   
00320     QString modFile;    
00321     <font class="keywordflow">if</font> (dir) {    <font class="comment">// find and update .conf file</font>
00322         rewinddir(dir);
00323         <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00324             <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00325                 modFile = QString::fromLocal8Bit(configPath);
00326                 modFile += QString::fromLatin1(<font class="stringliteral">"/"</font>);
00327                 modFile += QString::fromLocal8Bit(ent-&gt;d_name);
00328                 <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00329                 section =   <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00330                 foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a>.Sections.end() );
00331             }
00332         }
00333         closedir(dir);
00334     }
00335     <font class="keywordflow">else</font> { <font class="comment">//try to read mods.conf</font>
00336         <font class="comment">//moduleConfig = SWConfig( configPath + "/mods.conf" );</font>
00337         <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a> = SWConfig(<font class="stringliteral">""</font>);<font class="comment">//global config     </font>
00338         section =   config-&gt;Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );       
00339         foundConfig = ( section != config-&gt;Sections.end() );        
00340         
00341         ConfigEntMap::iterator entry;
00342         <font class="keywordflow">if</font> (foundConfig) { <font class="comment">//copy module section</font>
00343             <font class="keywordflow">for</font> (entry = (*section).second.begin(); entry != (*section).second.end(); entry++) {
00344                     <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a>.Sections[(*section).first].insert(ConfigEntMap::value_type((*entry).first, (*entry).second));
00345             }
00346         }           
00347     }
00348     
00349     <font class="keywordflow">if</font> (!foundConfig &amp;&amp; configType != 2) { <font class="comment">//search in $HOME/.sword/</font>
00350         QString myPath = QString::fromLatin1(<font class="stringliteral">"%1/.sword/mods.d"</font>).arg(getenv(<font class="stringliteral">"HOME"</font>));
00351         dir = opendir(myPath.latin1());
00352         <font class="keywordflow">if</font> (dir) {
00353             rewinddir(dir);
00354             <font class="keywordflow">while</font> ((ent = readdir(dir)) &amp;&amp; !foundConfig) {
00355                 <font class="keywordflow">if</font> ((strcmp(ent-&gt;d_name, <font class="stringliteral">"."</font>)) &amp;&amp; (strcmp(ent-&gt;d_name, <font class="stringliteral">".."</font>))) {                                
00356                     modFile = myPath;
00357                     modFile += <font class="stringliteral">"/"</font>;
00358                     modFile += ent-&gt;d_name;
00359                     <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a> = SWConfig( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)modFile.local8Bit() );
00360                     section =   <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a>.Sections.find( (<font class="keyword">const</font> <font class="keywordtype">char</font>*)module.local8Bit() );
00361                     foundConfig = ( section != <a class="code" href="class_c_sword_backend.html#a14">moduleConfig</a>.Sections.end() );
00362                 }
00363             }
00364             closedir(dir);
00365         }
00366     }
00367     <font class="keywordflow">return</font> foundConfig;
00368 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="CSwordBackend::moduleList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ListCSwordModuleInfo *const CSwordBackend::moduleList </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function returns the list of available modules managed by this backend.
<p>
You have to call <a class="el" href="class_c_sword_backend.html#a3">initModules</a>() first;
<p>
<dl compact><dt><b>
Returns: </b><dd>
The list of modules managed by this backend </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8h-source.html#l00206">206</a> of file <a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a>.
<p>
Referenced by <a class="el" href="cswordpresenter_8cpp-source.html#l00033">CSwordPresenter::CSwordPresenter</a>, <a class="el" href="bibletime__init_8cpp-source.html#l00298">BibleTime::initBackends</a>, and <a class="el" href="coptionsdialog_8cpp-source.html#l00423">COptionsDialog::initSword</a>.
<p>
<div class="fragment"><pre>00206                                                                    {
00207     <font class="keywordflow">return</font> m_moduleList;
00208 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="CSwordBackend::setOption"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CSwordBackend::setOption </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_c_sword_backend.html#s16">CSwordBackend::FilterOptions</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>type</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>enable</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the given options enabled or disabled depending on the second parameter.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>type</em>&nbsp;</td><td>
This is the type this function should set enabled or disabled </td></tr>
<tr><td valign=top><em>enable</em>&nbsp;</td><td>
If this is true the option will be enabled, otherwise it will be disabled. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00186">186</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
References <a class="el" href="cswordbackend_8h-source.html#l00055">FilterOptions</a>, and <a class="el" href="cswordbackend_8cpp-source.html#l00371">optionName</a>.
<p>
<div class="fragment"><pre>00186                                                                                       {
00187 <font class="comment">// const QString optionName = ;</font>
00188     setGlobalOption(<a class="code" href="class_c_sword_backend.html#d1">optionName</a>(type).latin1(), enable ? <font class="stringliteral">"On"</font>: <font class="stringliteral">"Off"</font>);
00189 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="CSwordBackend::shutdownModules"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const bool CSwordBackend::shutdownModules </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function deinitializes the modules and deletes them.
<p>
<dl compact><dt><b>
Returns: </b><dd>
True if it was succesful, otherwise return false </dl>
<p>
Definition at line <a class="el" href="cswordbackend_8cpp-source.html#l00168">168</a> of file <a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a>.
<p>
Referenced by <a class="el" href="cswordbackend_8cpp-source.html#l00081">initModules</a>, and <a class="el" href="cswordbackend_8cpp-source.html#l00064">~CSwordBackend</a>.
<p>
<div class="fragment"><pre>00168                                          {
00169     <font class="keywordflow">for</font> (m_moduleList-&gt;first(); m_moduleList-&gt;current(); m_moduleList-&gt;next()) {
00170         <font class="keywordflow">if</font> (m_moduleList-&gt;current()) {
00171             <a class="code" href="class_c_sword_module_info.html">CSwordModuleInfo</a>* current = m_moduleList-&gt;current();
00172             m_moduleList-&gt;removeRef(current);
00173             <font class="keyword">delete</font> current;
00174         }       
00175     }
00176     m_moduleList-&gt;clear();  
00177     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00178 }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cswordbackend_8h-source.html">cswordbackend.h</a><li><a class="el" href="cswordbackend_8cpp-source.html">cswordbackend.cpp</a></ul>
<hr><address><small>Generated on Sun Mar 10 22:12:54 2002 for BibleTime by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.14 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></address>
</body>
</html>
