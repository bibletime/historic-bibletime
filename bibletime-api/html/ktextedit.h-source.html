<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<title>ktextedit.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.1.5 on Sun Jan 21 14:22:15 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ktextedit.h</h1><a href="ktextedit.h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/* This file is part of the KDE project
</font>00002 <font class="comment">   Copyright (C) 2000 Reginald Stadlbauer &lt;reggie@kde.org&gt;
</font>00003 <font class="comment">
</font>00004 <font class="comment">   This library is free software; you can redistribute it and/or
</font>00005 <font class="comment">   modify it under the terms of the GNU Library General Public
</font>00006 <font class="comment">   License as published by the Free Software Foundation; either
</font>00007 <font class="comment">   version 2 of the License, or (at your option) any later version.
</font>00008 <font class="comment">
</font>00009 <font class="comment">   This library is distributed in the hope that it will be useful,
</font>00010 <font class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of
</font>00011 <font class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
</font>00012 <font class="comment">   Library General Public License for more details.
</font>00013 <font class="comment">
</font>00014 <font class="comment">   You should have received a copy of the GNU Library General Public License
</font>00015 <font class="comment">   along with this library; see the file COPYING.LIB.  If not, write to
</font>00016 <font class="comment">   the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
</font>00017 <font class="comment">   Boston, MA 02111-1307, USA.
</font>00018 <font class="comment">*/</font>
00019 
00020 <font class="preprocessor">#ifndef QTEXTEDIT_H
</font>00021 <font class="preprocessor"></font><font class="preprocessor">#define QTEXTEDIT_H
</font>00022 <font class="preprocessor"></font>
00023 <font class="preprocessor">#include &lt;qwidget.h&gt;</font>
00024 <font class="preprocessor">#include &lt;qscrollview.h&gt;</font>
00025 <font class="preprocessor">#include &lt;qstring.h&gt;</font>
00026 <font class="preprocessor">#include &lt;qlist.h&gt;</font>
00027 <font class="preprocessor">#include &lt;qrect.h&gt;</font>
00028 <font class="preprocessor">#include &lt;qfontmetrics.h&gt;</font>
00029 <font class="preprocessor">#include &lt;qintdict.h&gt;</font>
00030 <font class="preprocessor">#include &lt;qmap.h&gt;</font>
00031 <font class="preprocessor">#include &lt;qstringlist.h&gt;</font>
00032 <font class="preprocessor">#include &lt;qfont.h&gt;</font>
00033 <font class="preprocessor">#include &lt;qcolor.h&gt;</font>
00034 <font class="preprocessor">#include &lt;qsize.h&gt;</font>
00035 <font class="preprocessor">#include &lt;qvaluelist.h&gt;</font>
00036 <font class="preprocessor">#include &lt;qvaluestack.h&gt;</font>
00037 <font class="preprocessor">#include &lt;qobject.h&gt;</font>
00038 <font class="preprocessor">#include &lt;qdict.h&gt;</font>
00039 <font class="preprocessor">#include &lt;qtextstream.h&gt;</font>
00040 <font class="preprocessor">#include &lt;qpainter.h&gt;</font>
00041 <font class="preprocessor">#include &lt;limits.h&gt;</font>
00042 <font class="preprocessor">#include &lt;qptrdict.h&gt;</font>
00043 
00044 <font class="keyword">class </font>QPainter;
00045 <font class="keyword">class </font>QPaintEvent;
00046 <font class="keyword">class </font><a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a>;
00047 <font class="keyword">class </font><a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a>;
00048 <font class="keyword">class </font>QKeyEvent;
00049 <font class="keyword">class </font>QResizeEvent;
00050 <font class="keyword">class </font>QMouseEvent;
00051 <font class="keyword">class </font>QTimer;
00052 <font class="keyword">class </font><a class="code" href="class_ktexteditstring.html">KTextEditString</a>;
00053 <font class="keyword">class </font>QVBox;
00054 <font class="keyword">class </font><a class="code" href="class_qlistbox.html">QListBox</a>;
00055 <font class="keyword">class </font><a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a>;
00056 <font class="keyword">class </font><a class="code" href="class_ktexteditparag.html">KTextEditParag</a>;
00057 <font class="keyword">class </font><a class="code" href="class_ktexteditformat.html">KTextEditFormat</a>;
00058 <font class="keyword">class </font>QFont;
00059 <font class="keyword">class </font>QColor;
00060 <font class="keyword">class </font><a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a>;
00061 <font class="keyword">class </font><a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a>;
00062 <font class="keyword">class </font><a class="code" href="class_ktextedit.html">KTextEdit</a>;
00063 <font class="keyword">class </font><a class="code" href="class_ktexteditstring.html">KTextEditString</a>;
00064 <font class="keyword">class </font><a class="code" href="class_ktexteditcommandhistory.html">KTextEditCommandHistory</a>;
00065 <font class="keyword">class </font><a class="code" href="class_ktexteditformat.html">KTextEditFormat</a>;
00066 <font class="keyword">class </font><a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a>;
00067 <font class="keyword">class </font><a class="code" href="class_ktexteditparag.html">KTextEditParag</a>;
00068 <font class="keyword">class </font><a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a>;
00069 <font class="keyword">class </font><a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a>;
00070 
00071 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00072 
<a name="l00073"></a><a class="code" href="class_ktexteditcursor.html">00073</a> <font class="keyword">class </font><a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a>
00074 {
00075 <font class="keyword">public</font>:
00076     <a class="code" href="class_ktexteditcursor.html#a0">KTextEditCursor</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d );
00077 
00078     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditcursor.html#a1">parag</a>() <font class="keyword">const</font>;
00079     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditcursor.html#a2">index</a>() <font class="keyword">const</font>;
00080     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a3">setParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s );
00081 
00082     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a4">gotoLeft</a>();
00083     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a5">gotoRight</a>();
00084     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a6">gotoUp</a>();
00085     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a7">gotoDown</a>();
00086     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a8">gotoLineEnd</a>();
00087     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a9">gotoLineStart</a>();
00088     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a10">gotoHome</a>();
00089     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a11">gotoEnd</a>();
00090     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a12">gotoPageUp</a>( <a class="code" href="class_ktextedit.html">KTextEdit</a> *view );
00091     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a13">gotoPageDown</a>( <a class="code" href="class_ktextedit.html">KTextEdit</a> *view );
00092     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a14">gotoWordLeft</a>();
00093     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a15">gotoWordRight</a>();
00094 
00095     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a16">insert</a>( <font class="keyword">const</font> QString &amp;s, <font class="keywordtype">bool</font> checkNewLine );
00096     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a17">splitAndInsertEmtyParag</a>( <font class="keywordtype">bool</font> ind = TRUE, <font class="keywordtype">bool</font> updateIds = TRUE );
00097     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditcursor.html#a18">remove</a>();
00098     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a19">indent</a>();
00099 
00100     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditcursor.html#a20">atParagStart</a>();
00101     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditcursor.html#a21">atParagEnd</a>();
00102 
00103     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a22">setIndex</a>( <font class="keywordtype">int</font> i );
00104 
00105     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a23">checkIndex</a>();
00106 
00107 <font class="keyword">private</font>:
<a name="l00108"></a><a class="code" href="class_ktexteditcursor.html#o0">00108</a>     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *string;
<a name="l00109"></a><a class="code" href="class_ktexteditcursor.html#o1">00109</a>     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
<a name="l00110"></a><a class="code" href="class_ktexteditcursor.html#o3">00110</a>     <font class="keywordtype">int</font> idx, tmpIndex;
00111 
00112 };
00113 
00114 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00115 
<a name="l00116"></a><a class="code" href="class_ktexteditcommandhistory.html">00116</a> <font class="keyword">class </font><a class="code" href="class_ktexteditcommandhistory.html">KTextEditCommandHistory</a>
00117 {
00118 <font class="keyword">public</font>:
<a name="l00119"></a><a class="code" href="class_ktexteditcommandhistory.html#a0">00119</a>     <a class="code" href="class_ktexteditcommandhistory.html#a0">KTextEditCommandHistory</a>( <font class="keywordtype">int</font> s ) : <a class="code" href="class_ktexteditcommandhistory.html#o1">current</a>( -1 ), <a class="code" href="class_ktexteditcommandhistory.html#o2">steps</a>( s )<font class="keyword"> </font>{ history.setAutoDelete( TRUE ); }
00120 
00121     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcommandhistory.html#a1">addCommand</a>( <a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a> *cmd );
00122     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommandhistory.html#a2">undo</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00123     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommandhistory.html#a3">redo</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00124 
00125 <font class="keyword">private</font>:
<a name="l00126"></a><a class="code" href="class_ktexteditcommandhistory.html#o0">00126</a>     QList&lt;KTextEditCommand&gt; history;
<a name="l00127"></a><a class="code" href="class_ktexteditcommandhistory.html#o2">00127</a>     <font class="keywordtype">int</font> current, steps;
00128 
00129 };
00130 
<a name="l00131"></a><a class="code" href="class_ktexteditcommand.html">00131</a> <font class="keyword">class </font><a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a>
00132 {
00133 <font class="keyword">public</font>:
<a name="l00134"></a><a class="code" href="class_ktexteditcommand.html#s4">00134</a>     <font class="keyword">enum</font> Commands { Invalid, Insert, Delete, Format };
<a name="l00135"></a><a class="code" href="class_ktexteditcommand.html#a0">00135</a>     <a class="code" href="class_ktexteditcommand.html#a0">KTextEditCommand</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d ) : <a class="code" href="class_ktexteditcommand.html#n0">doc</a>( d ), <a class="code" href="class_ktexteditcommand.html#n1">cursor</a>( d )<font class="keyword"> </font>{}
<a name="l00136"></a><a class="code" href="class_ktexteditcommand.html#a1">00136</a>     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcommand.html#a1">~KTextEditCommand</a>()<font class="keyword"> </font>{}
<a name="l00137"></a><a class="code" href="class_ktexteditcommand.html#a2">00137</a>     <font class="keyword">virtual</font> Commands <a class="code" href="class_ktexteditcommand.html#a2">type</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Invalid; };
00138 
00139     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a3">execute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c ) = 0;
00140     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a4">unexecute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c ) = 0;
00141 
00142 <font class="keyword">protected</font>:
<a name="l00143"></a><a class="code" href="class_ktexteditcommand.html#n0">00143</a>     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
<a name="l00144"></a><a class="code" href="class_ktexteditcommand.html#n1">00144</a>     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> cursor;
00145 
00146 };
00147 
00148 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00149 
<a name="l00150"></a><a class="code" href="class_ktexteditdeletecommand.html">00150</a> <font class="keyword">class </font><a class="code" href="class_ktexteditdeletecommand.html">KTextEditDeleteCommand</a> : <font class="keyword">public</font> <a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a>
00151 {
00152 <font class="keyword">public</font>:
<a name="l00153"></a><a class="code" href="class_ktexteditdeletecommand.html#a0">00153</a>     <a class="code" href="class_ktexteditdeletecommand.html#a0">KTextEditDeleteCommand</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d, <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> idx, <font class="keyword">const</font> QString &amp;str )
00154         : <a class="code" href="class_ktexteditcommand.html#a0">KTextEditCommand</a>( d ), <a class="code" href="class_ktexteditdeletecommand.html#n0">id</a>( i ), <a class="code" href="class_ktexteditdeletecommand.html#n1">index</a>( idx ), <a class="code" href="class_ktexteditdeletecommand.html#n2">text</a>( str )<font class="keyword"> </font>{}
<a name="l00155"></a><a class="code" href="class_ktexteditdeletecommand.html#a1">00155</a>     <font class="keyword">virtual</font> Commands <a class="code" href="class_ktexteditcommand.html#a2">type</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Delete; };
00156 
00157     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a3">execute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00158     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a4">unexecute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00159 
00160 <font class="keyword">protected</font>:
<a name="l00161"></a><a class="code" href="class_ktexteditdeletecommand.html#n1">00161</a>     <font class="keywordtype">int</font> id, index;
<a name="l00162"></a><a class="code" href="class_ktexteditdeletecommand.html#n2">00162</a>     QString text;
00163 
00164 };
00165 
<a name="l00166"></a><a class="code" href="class_ktexteditinsertcommand.html">00166</a> <font class="keyword">class </font><a class="code" href="class_ktexteditinsertcommand.html">KTextEditInsertCommand</a> : <font class="keyword">public</font> <a class="code" href="class_ktexteditdeletecommand.html">KTextEditDeleteCommand</a>
00167 {
00168 <font class="keyword">public</font>:
<a name="l00169"></a><a class="code" href="class_ktexteditinsertcommand.html#a0">00169</a>     <a class="code" href="class_ktexteditinsertcommand.html#a0">KTextEditInsertCommand</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d, <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> idx, <font class="keyword">const</font> QString &amp;str )
00170         : <a class="code" href="class_ktexteditdeletecommand.html#a0">KTextEditDeleteCommand</a>( d, i, idx, str )<font class="keyword"> </font>{}
<a name="l00171"></a><a class="code" href="class_ktexteditinsertcommand.html#a1">00171</a>     Commands <a class="code" href="class_ktexteditcommand.html#a2">type</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Insert; };
00172 
<a name="l00173"></a><a class="code" href="class_ktexteditinsertcommand.html#a2">00173</a>     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a3">execute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ktexteditcommand.html#a4">KTextEditDeleteCommand::unexecute</a>( c ); }
<a name="l00174"></a><a class="code" href="class_ktexteditinsertcommand.html#a3">00174</a>     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a4">unexecute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ktexteditcommand.html#a3">KTextEditDeleteCommand::execute</a>( c ); }
00175 
00176 };
00177 
<a name="l00178"></a><a class="code" href="class_ktexteditformatcommand.html">00178</a> <font class="keyword">class </font><a class="code" href="class_ktexteditformatcommand.html">KTextEditFormatCommand</a> : <font class="keyword">public</font> <a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a>
00179 {
00180 <font class="keyword">public</font>:
00181     <a class="code" href="class_ktexteditformatcommand.html#a0">KTextEditFormatCommand</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d, <font class="keywordtype">int</font> selId, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f, <font class="keywordtype">int</font> flags );
00182     <a class="code" href="class_ktexteditformatcommand.html#a1">~KTextEditFormatCommand</a>();
<a name="l00183"></a><a class="code" href="class_ktexteditformatcommand.html#a2">00183</a>     Commands <a class="code" href="class_ktexteditcommand.html#a2">type</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Format; }
00184 
00185     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a3">execute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00186     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditcommand.html#a4">unexecute</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c );
00187 
00188 <font class="keyword">protected</font>:
<a name="l00189"></a><a class="code" href="class_ktexteditformatcommand.html#n0">00189</a>     <font class="keywordtype">int</font> selection;
<a name="l00190"></a><a class="code" href="class_ktexteditformatcommand.html#n1">00190</a>     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *format;
<a name="l00191"></a><a class="code" href="class_ktexteditformatcommand.html#n2">00191</a>     <font class="keywordtype">int</font> flags;
00192 
00193 };
00194 
00195 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00196 <font class="comment">//class KPresenterDoc;</font>
<a name="l00197"></a><a class="code" href="class_ktexteditdocument.html">00197</a> <font class="keyword">class </font><a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a>
00198 {
00199 <font class="keyword">public</font>:
<a name="l00200"></a><a class="code" href="class_ktexteditdocument.html#s7">00200</a>     <font class="keyword">enum</font> SelectionIds {
00201         Standard = 0,
00202         Search,
00203         Temp <font class="comment">// This selection must not be drawn, it's used e.g. by undo/redo to</font>
00204         <font class="comment">// remove multiple lines with removeSelectedText()</font>
00205     };
00206 
<a name="l00207"></a><a class="code" href="class_ktexteditdocument.html#p0">00207</a>     <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font> numSelections;
00208 
<a name="l00209"></a><a class="code" href="class_ktexteditdocument.html#s8">00209</a>     <font class="keyword">enum</font> Bullet {
00210         FilledCircle,
00211         FilledSquare,
00212         OutlinedCircle,
00213         OutlinedSquare
00214     };
00215 
00216     <a class="code" href="class_ktexteditdocument.html#a0">KTextEditDocument</a>( <font class="comment">/*KPresenterDoc *doc*/</font> );
00217 
00218     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a1">clear</a>();
00219 
00220     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a2">setText</a>( <font class="keyword">const</font> QString &amp;text );
00221     QString <a class="code" href="class_ktexteditdeletecommand.html#n2">text</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p = 0 ) <font class="keyword">const</font>;
00222 
00223     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a4">x</a>() <font class="keyword">const</font>;
00224     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a5">y</a>() <font class="keyword">const</font>;
00225     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a6">width</a>() <font class="keyword">const</font>;
00226     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a7">height</a>() <font class="keyword">const</font>;
00227     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a8">setWidth</a>( <font class="keywordtype">int</font> w );
00228 
00229     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a9">firstParag</a>() <font class="keyword">const</font>;
00230     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a10">lastParag</a>() <font class="keyword">const</font>;
00231     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a11">setFirstParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p );
00232     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a12">setLastParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p );
00233 
00234     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a13">invalidate</a>();
00235 
00236     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a14">setFormatter</a>( <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a> *f );
00237     <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a> *<a class="code" href="class_ktexteditdocument.html#a15">formatter</a>() <font class="keyword">const</font>;
00238 
00239     QColor <a class="code" href="class_ktexteditdocument.html#a16">selectionColor</a>( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00240     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a17">invertSelectionText</a>( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00241     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a18">hasSelection</a>( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00242     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a19">setSelectionStart</a>( <font class="keywordtype">int</font> id, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor );
00243     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a20">setSelectionEnd</a>( <font class="keywordtype">int</font> id, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor );
00244     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a21">removeSelection</a>( <font class="keywordtype">int</font> id );
00245     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a22">selectionStart</a>( <font class="keywordtype">int</font> id, <font class="keywordtype">int</font> &amp;paragId, <font class="keywordtype">int</font> &amp;index );
00246     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a23">selectionEnd</a>( <font class="keywordtype">int</font> id, <font class="keywordtype">int</font> &amp;paragId, <font class="keywordtype">int</font> &amp;index );
00247     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a24">setFormat</a>( <font class="keywordtype">int</font> id, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f, <font class="keywordtype">int</font> flags );
00248     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a22">selectionStart</a>( <font class="keywordtype">int</font> id );
00249     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a23">selectionEnd</a>( <font class="keywordtype">int</font> id );
00250 
00251     QString <a class="code" href="class_ktexteditdocument.html#a27">selectedText</a>( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00252     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a28">copySelectedText</a>( <font class="keywordtype">int</font> id );
00253     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a29">removeSelectedText</a>( <font class="keywordtype">int</font> id, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor );
00254     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a30">indentSelection</a>( <font class="keywordtype">int</font> id );
00255 
00256     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a31">paragAt</a>( <font class="keywordtype">int</font> i ) <font class="keyword">const</font>;
00257 
00258     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a32">addCommand</a>( <a class="code" href="class_ktexteditcommand.html">KTextEditCommand</a> *cmd );
00259     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditdocument.html#a33">undo</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c = 0 );
00260     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *<a class="code" href="class_ktexteditdocument.html#a34">redo</a>( <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c  = 0 );
00261 
00262     <a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a> *<a class="code" href="class_ktexteditdocument.html#a35">formatCollection</a>() <font class="keyword">const</font>;
00263 
00264     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a36">listIndent</a>( <font class="keywordtype">int</font> depth ) <font class="keyword">const</font>;
00265     Bullet <a class="code" href="class_ktexteditdocument.html#a37">bullet</a>( <font class="keywordtype">int</font> depth ) <font class="keyword">const</font>;
00266     QColor <a class="code" href="class_ktexteditdocument.html#a38">bulletColor</a>( <font class="keywordtype">int</font> depth ) <font class="keyword">const</font>;
00267 
00268     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a39">find</a>( <font class="keyword">const</font> QString &amp;expr, <font class="keywordtype">bool</font> cs, <font class="keywordtype">bool</font> wo, <font class="keywordtype">bool</font> forward, <font class="keywordtype">int</font> *parag, <font class="keywordtype">int</font> *index, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor );
00269 
00270     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a40">setParagSpacing</a>( <font class="keywordtype">int</font> s );
00271     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a41">setLineSpacing</a>( <font class="keywordtype">int</font> s );
00272     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a42">setMargin</a>( <font class="keywordtype">int</font> m );
00273     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a43">paragSpacing</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p = 0 ) <font class="keyword">const</font>;
00274     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a44">lineSpacing</a>() <font class="keyword">const</font>;
<a name="l00275"></a><a class="code" href="class_ktexteditdocument.html#a45">00275</a>     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a45">margin</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> marg; }
00276 
00277     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a46">inSelection</a>( <font class="keywordtype">int</font> selId, <font class="keyword">const</font> QPoint &amp;pos ) <font class="keyword">const</font>;
00278 
00279     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a47">draw</a>( QPainter *p, <font class="keyword">const</font> QColorGroup &amp;cg );
00280     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a48">zoom</a>( <font class="keywordtype">float</font> f );
00281     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a49">unzoom</a>();
00282 
<a name="l00283"></a><a class="code" href="class_ktexteditdocument.html#a50">00283</a>     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a50">enableDrawAllInOneColor</a>( <font class="keyword">const</font> QColor &amp;c )<font class="keyword"> </font>{ allColor = c; allInOne = TRUE; }
<a name="l00284"></a><a class="code" href="class_ktexteditdocument.html#a51">00284</a>     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a51">disableDrawAllInOneColor</a>()<font class="keyword"> </font>{ allInOne = FALSE; }
00285 
<a name="l00286"></a><a class="code" href="class_ktexteditdocument.html#a52">00286</a>     <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a52">drawAllInOneColor</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> allInOne; }
<a name="l00287"></a><a class="code" href="class_ktexteditdocument.html#a53">00287</a>     QColor <a class="code" href="class_ktexteditdocument.html#a53">allInOneColor</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> allColor; }
00288 
00289     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a54">setAlignmentToAll</a>( <font class="keywordtype">int</font> a );
00290     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a55">setFontToAll</a>( <font class="keyword">const</font> QFont &amp;f );
00291     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a56">setColorToAll</a>( <font class="keyword">const</font> QColor &amp;c );
00292     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a57">setBoldToAll</a>( <font class="keywordtype">bool</font> b );
00293     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a58">setItalicToAll</a>( <font class="keywordtype">bool</font> b );
00294     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a59">setUnderlineToAll</a>( <font class="keywordtype">bool</font> b );
00295     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a60">setPointSizeToAll</a>( <font class="keywordtype">int</font> s );
00296     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a61">setFamilyToAll</a>( <font class="keyword">const</font> QString &amp;f );
00297 
<a name="l00298"></a><a class="code" href="class_ktexteditdocument__textsettings.html">00298</a>     <font class="keyword">struct </font>TextSettings
00299     {
<a name="l00300"></a><a class="code" href="class_ktexteditdocument__textsettings.html#a0">00300</a>         TextSettings()<font class="keyword"> </font>{
00301             bulletType[0] = KTextEditDocument::FilledCircle;
00302             bulletType[1] = KTextEditDocument::FilledSquare;
00303             bulletType[2] = KTextEditDocument::OutlinedCircle;
00304             bulletType[3] = KTextEditDocument::OutlinedSquare;
00305             bulletColor[0] = bulletColor[1] = bulletColor[2] = bulletColor[3] = Qt::black;
00306             lineSpacing = paragSpacing = margin = 0;
00307         }
00308 
<a name="l00309"></a><a class="code" href="class_ktexteditdocument__textsettings.html#m0">00309</a>         KTextEditDocument::Bullet bulletType[4];
<a name="l00310"></a><a class="code" href="class_ktexteditdocument__textsettings.html#m1">00310</a>         QColor bulletColor[4];
<a name="l00311"></a><a class="code" href="class_ktexteditdocument__textsettings.html#m3">00311</a>         <font class="keywordtype">int</font> lineSpacing, paragSpacing, margin;
00312     };
00313 
<a name="l00314"></a><a class="code" href="class_ktexteditdocument.html#a62">00314</a>     TextSettings textSettings()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> txtSettings; }
00315     <font class="keywordtype">void</font> setTextSettings( TextSettings s );
00316 
00317 <font class="keyword">private</font>:
<a name="l00318"></a><a class="code" href="class_ktexteditdocument__selection.html">00318</a>     <font class="keyword">struct </font>Selection {
<a name="l00319"></a><a class="code" href="class_ktexteditdocument__selection.html#m0">00319</a>         <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *startParag, *endParag;
<a name="l00320"></a><a class="code" href="class_ktexteditdocument__selection.html#m2">00320</a>         <font class="keywordtype">int</font> startIndex;
00321     };
00322 
<a name="l00323"></a><a class="code" href="class_ktexteditdocument.html#o1">00323</a>     <font class="keywordtype">int</font> cx, cy, cw;
<a name="l00324"></a><a class="code" href="class_ktexteditdocument.html#o4">00324</a>     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *fParag, *lParag;
<a name="l00325"></a><a class="code" href="class_ktexteditdocument.html#o5">00325</a>     QMap&lt;int, QColor&gt; selectionColors;
<a name="l00326"></a><a class="code" href="class_ktexteditdocument.html#o6">00326</a>     QMap&lt;int, Selection&gt; selections;
<a name="l00327"></a><a class="code" href="class_ktexteditdocument.html#o7">00327</a>     QMap&lt;int, bool&gt; selectionText;
<a name="l00328"></a><a class="code" href="class_ktexteditdocument.html#o8">00328</a>     <a class="code" href="class_ktexteditcommandhistory.html">KTextEditCommandHistory</a> *commandHistory;
<a name="l00329"></a><a class="code" href="class_ktexteditdocument.html#o9">00329</a>     <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a> *pFormatter;
<a name="l00330"></a><a class="code" href="class_ktexteditdocument.html#o11">00330</a>     <font class="keywordtype">int</font> ls, ps;
<a name="l00331"></a><a class="code" href="class_ktexteditdocument.html#o12">00331</a>     QColor allColor;
<a name="l00332"></a><a class="code" href="class_ktexteditdocument.html#o13">00332</a>     <font class="keywordtype">bool</font> allInOne;
<a name="l00333"></a><a class="code" href="class_ktexteditdocument.html#o14">00333</a>     <font class="keywordtype">int</font> listMult;
<a name="l00334"></a><a class="code" href="class_ktexteditdocument.html#o15">00334</a>     <font class="keywordtype">int</font> oldListMult;
<a name="l00335"></a><a class="code" href="class_ktexteditdocument.html#o17">00335</a>     <font class="keywordtype">int</font> oldLineSpacing, oldParagSpacing;
<a name="l00336"></a><a class="code" href="class_ktexteditdocument.html#o18">00336</a>     TextSettings txtSettings;
<a name="l00337"></a><a class="code" href="class_ktexteditdocument.html#o19">00337</a>     <font class="keywordtype">int</font> marg;
00338 
<a name="l00339"></a><a class="code" href="class_ktexteditdocument.html#o20">00339</a>     <a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a>*  m_formatCollection;
00340 <font class="comment">//    KPresenterDoc *kpr_doc;</font>
00341 };
00342 
00343 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00344 
<a name="l00345"></a><a class="code" href="class_ktexteditstring.html">00345</a> <font class="keyword">class </font><a class="code" href="class_ktexteditstring.html">KTextEditString</a>
00346 {
00347 <font class="keyword">public</font>:
<a name="l00348"></a><a class="code" href="class_ktexteditstring__char.html">00348</a>     <font class="keyword">struct </font>Char {
00349     <font class="keyword">public</font>:
<a name="l00350"></a><a class="code" href="class_ktexteditstring__char.html#a0">00350</a>         Char() : format( 0 ), lineStart( 0 )<font class="keyword"> </font>{}
<a name="l00351"></a><a class="code" href="class_ktexteditstring__char.html#a1">00351</a>         ~Char()<font class="keyword"> </font>{ format = 0; }
<a name="l00352"></a><a class="code" href="class_ktexteditstring__char.html#m0">00352</a>         QChar c;
<a name="l00353"></a><a class="code" href="class_ktexteditstring__char.html#m1">00353</a>         ushort x;
<a name="l00354"></a><a class="code" href="class_ktexteditstring__char.html#m2">00354</a>         <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *format;
<a name="l00355"></a><a class="code" href="class_ktexteditstring__char.html#m3">00355</a>         uint lineStart : 1;
00356     <font class="keyword">private</font>:
<a name="l00357"></a><a class="code" href="class_ktexteditstring__char.html#c0">00357</a>         Char &amp;operator=( <font class="keyword">const</font> Char &amp; )<font class="keyword"> </font>{
00358             <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00359         }
00360 
00361     };
00362 
00363     KTextEditString();
00364 
00365     QString toString() <font class="keyword">const</font>;
00366 
00367     Char &amp;at( <font class="keywordtype">int</font> i ) <font class="keyword">const</font>;
00368     <font class="keywordtype">int</font> length() <font class="keyword">const</font>;
00369 
00370     <font class="keywordtype">void</font> insert( <font class="keywordtype">int</font> index, <font class="keyword">const</font> QString &amp;s, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f );
00371     <font class="keywordtype">void</font> truncate( <font class="keywordtype">int</font> index );
00372     <font class="keywordtype">void</font> remove( <font class="keywordtype">int</font> index, <font class="keywordtype">int</font> len );
00373 
00374     <font class="keywordtype">void</font> setFormat( <font class="keywordtype">int</font> index, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f, <font class="keywordtype">bool</font> useCollection );
00375 
00376 <font class="keyword">private</font>:
<a name="l00377"></a><a class="code" href="class_ktexteditstring.html#o0">00377</a>     QArray&lt;Char&gt; data;
<a name="l00378"></a><a class="code" href="class_ktexteditstring.html#o1">00378</a>     QString cache;
00379 
00380 };
00381 
00382 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00383 
<a name="l00384"></a><a class="code" href="class_ktexteditparag.html">00384</a> <font class="keyword">class </font><a class="code" href="class_ktexteditparag.html">KTextEditParag</a>
00385 {
00386 <font class="keyword">public</font>:
<a name="l00387"></a><a class="code" href="class_ktexteditparag__linestart.html">00387</a>     <font class="keyword">struct </font>LineStart {
<a name="l00388"></a><a class="code" href="class_ktexteditparag__linestart.html#a0">00388</a>         LineStart() : y( 0 ), baseLine( 0 ), h( 0 )<font class="keyword"> </font>{}
<a name="l00389"></a><a class="code" href="class_ktexteditparag__linestart.html#a1">00389</a>         LineStart( ushort y_, ushort bl, ushort h_ ) : y( y_ ), baseLine( bl ), h( h_ )<font class="keyword"> </font>{}
<a name="l00390"></a><a class="code" href="class_ktexteditparag__linestart.html#m0">00390</a>         ushort y, baseLine, h;
00391     };
00392 
<a name="l00393"></a><a class="code" href="class_ktexteditparag.html#s3">00393</a>     <font class="keyword">enum</font> Type {
00394         Normal = 0,
00395         BulletList,
00396         EnumList
00397     };
00398 
00399     KTextEditParag( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d, <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *pr, <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *nx, <font class="keywordtype">bool</font> updateIds = TRUE );
<a name="l00400"></a><a class="code" href="class_ktexteditparag.html#a1">00400</a>     <font class="keyword">virtual</font> ~KTextEditParag()<font class="keyword"> </font>{}
00401 
00402     Type <a class="code" href="class_ktexteditcommand.html#a2">type</a>() <font class="keyword">const</font>;
00403     <font class="keywordtype">void</font> setType( Type t );
00404 
00405     <a class="code" href="class_ktexteditstring.html">KTextEditString</a> *string() <font class="keyword">const</font>;
00406     <a class="code" href="class_ktexteditstring__char.html">KTextEditString::Char</a> *at( <font class="keywordtype">int</font> i ) <font class="keyword">const</font>; <font class="comment">// maybe remove later</font>
00407     <font class="keywordtype">int</font> length() <font class="keyword">const</font>; <font class="comment">// maybe remove later</font>
00408 
00409     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *document() <font class="keyword">const</font>;
00410 
00411     QRect rect() <font class="keyword">const</font>;
00412 
00413     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *prev() <font class="keyword">const</font>;
00414     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *next() <font class="keyword">const</font>;
00415     <font class="keywordtype">void</font> setPrev( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s );
00416     <font class="keywordtype">void</font> setNext( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s );
00417 
00418     <font class="keywordtype">void</font> insert( <font class="keywordtype">int</font> index, <font class="keyword">const</font> QString &amp;s );
00419     <font class="keywordtype">void</font> append( <font class="keyword">const</font> QString &amp;s );
00420     <font class="keywordtype">void</font> truncate( <font class="keywordtype">int</font> index );
00421     <font class="keywordtype">void</font> remove( <font class="keywordtype">int</font> index, <font class="keywordtype">int</font> len );
00422     <font class="keywordtype">void</font> join( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s );
00423 
00424     <font class="keywordtype">void</font> invalidate( <font class="keywordtype">int</font> chr );
00425 
00426     <font class="keywordtype">void</font> move( <font class="keywordtype">int</font> dy );
00427     <font class="keywordtype">void</font> format( <font class="keywordtype">int</font> start = -1, <font class="keywordtype">bool</font> doMove = TRUE );
00428 
00429     <font class="keywordtype">bool</font> isValid() <font class="keyword">const</font>;
00430     <font class="keywordtype">bool</font> hasChanged() <font class="keyword">const</font>;
00431     <font class="keywordtype">void</font> setChanged( <font class="keywordtype">bool</font> b );
00432 
00433     <font class="keywordtype">int</font> lineHeightOfChar( <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> *bl = 0, <font class="keywordtype">int</font> *y = 0 ) <font class="keyword">const</font>;
00434     <a class="code" href="class_ktexteditstring__char.html">KTextEditString::Char</a> *lineStartOfChar( <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> *index = 0, <font class="keywordtype">int</font> *line = 0 ) <font class="keyword">const</font>;
00435     <font class="keywordtype">int</font> lines() <font class="keyword">const</font>;
00436     <a class="code" href="class_ktexteditstring__char.html">KTextEditString::Char</a> *lineStartOfLine( <font class="keywordtype">int</font> line, <font class="keywordtype">int</font> *index = 0 ) <font class="keyword">const</font>;
00437     <font class="keywordtype">int</font> lineY( <font class="keywordtype">int</font> l ) <font class="keyword">const</font>;
00438     <font class="keywordtype">int</font> lineBaseLine( <font class="keywordtype">int</font> l ) <font class="keyword">const</font>;
00439     <font class="keywordtype">int</font> lineHeight( <font class="keywordtype">int</font> l ) <font class="keyword">const</font>;
00440     <font class="keywordtype">void</font> lineInfo( <font class="keywordtype">int</font> l, <font class="keywordtype">int</font> &amp;y, <font class="keywordtype">int</font> &amp;h, <font class="keywordtype">int</font> &amp;bl ) <font class="keyword">const</font>;
00441 
00442     <font class="keywordtype">void</font> setSelection( <font class="keywordtype">int</font> id, <font class="keywordtype">int</font> start, <font class="keywordtype">int</font> end );
00443     <font class="keywordtype">void</font> removeSelection( <font class="keywordtype">int</font> id );
00444     <font class="keywordtype">int</font> selectionStart( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00445     <font class="keywordtype">int</font> selectionEnd( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00446     <font class="keywordtype">bool</font> hasSelection( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00447     <font class="keywordtype">bool</font> hasAnySelection() <font class="keyword">const</font>;
00448     <font class="keywordtype">bool</font> fullSelected( <font class="keywordtype">int</font> id ) <font class="keyword">const</font>;
00449 
00450     <font class="keywordtype">void</font> setParagId( <font class="keywordtype">int</font> i );
00451     <font class="keywordtype">int</font> paragId() <font class="keyword">const</font>;
00452 
00453     <font class="keywordtype">void</font> indent( <font class="keywordtype">int</font> *oldIndent = 0, <font class="keywordtype">int</font> *newIndent = 0 );
00454 
00455     QMap&lt;int, LineStart*&gt; &amp;lineStartList();
00456 
00457     <font class="keywordtype">void</font> setFormat( <font class="keywordtype">int</font> index, <font class="keywordtype">int</font> len, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f, <font class="keywordtype">bool</font> useCollection, <font class="keywordtype">int</font> flags = -1 );
00458 
00459     <font class="keywordtype">int</font> leftIndent() <font class="keyword">const</font>;
00460     <font class="keywordtype">int</font> listDepth() <font class="keyword">const</font>;
00461     <font class="keywordtype">void</font> setListDepth( <font class="keywordtype">int</font> d );
00462 
00463     <font class="keywordtype">void</font> setAlignment( <font class="keywordtype">int</font> a );
00464     <font class="keywordtype">int</font> alignment() <font class="keyword">const</font>;
00465 
00466     <font class="keyword">virtual</font> <font class="keywordtype">void</font> paint( QPainter &amp;painter, <font class="keyword">const</font> QColorGroup &amp;cg,
00467                         <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cusror = 0, <font class="keywordtype">bool</font> drawSelections = FALSE );
00468 
00469 <font class="keyword">private</font>:
00470     <font class="keywordtype">void</font> drawParagBuffer( QPainter &amp;painter, <font class="keyword">const</font> QString &amp;buffer, <font class="keywordtype">int</font> startX,
00471                           <font class="keywordtype">int</font> lastY, <font class="keywordtype">int</font> baseLine, <font class="keywordtype">int</font> bw, <font class="keywordtype">int</font> h, <font class="keywordtype">bool</font> drawSelections,
00472                           <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *lastFormat, <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> *selectionStarts,
00473                           <font class="keywordtype">int</font> *selectionEnds, <font class="keyword">const</font> QColorGroup &amp;cg  );
00474 
00475 <font class="keyword">private</font>:
<a name="l00476"></a><a class="code" href="class_ktexteditparag__selection.html">00476</a>     <font class="keyword">struct </font>Selection {
<a name="l00477"></a><a class="code" href="class_ktexteditparag__selection.html#m0">00477</a>         <font class="keywordtype">int</font> start, end;
00478     };
00479 
<a name="l00480"></a><a class="code" href="class_ktexteditparag.html#o0">00480</a>     QMap&lt;int, LineStart*&gt; lineStarts;
<a name="l00481"></a><a class="code" href="class_ktexteditparag.html#o1">00481</a>     <font class="keywordtype">int</font> invalid;
<a name="l00482"></a><a class="code" href="class_ktexteditparag.html#o2">00482</a>     QRect r;
<a name="l00483"></a><a class="code" href="class_ktexteditparag.html#o3">00483</a>     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p, *n;
<a name="l00484"></a><a class="code" href="class_ktexteditparag.html#o5">00484</a>     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
<a name="l00485"></a><a class="code" href="class_ktexteditparag.html#o6">00485</a>     <font class="keywordtype">bool</font> changed;
<a name="l00486"></a><a class="code" href="class_ktexteditparag.html#o7">00486</a>     <font class="keywordtype">bool</font> firstFormat;
<a name="l00487"></a><a class="code" href="class_ktexteditparag.html#o8">00487</a>     QMap&lt;int, Selection&gt; selections;
<a name="l00488"></a><a class="code" href="class_ktexteditparag.html#o9">00488</a>     <font class="keywordtype">int</font> id;
<a name="l00489"></a><a class="code" href="class_ktexteditparag.html#o10">00489</a>     <a class="code" href="class_ktexteditstring.html">KTextEditString</a> *str;
<a name="l00490"></a><a class="code" href="class_ktexteditparag.html#o11">00490</a>     Type typ;
<a name="l00491"></a><a class="code" href="class_ktexteditparag.html#o12">00491</a>     <font class="keywordtype">int</font> left;
<a name="l00492"></a><a class="code" href="class_ktexteditparag.html#o13">00492</a>     <font class="keywordtype">int</font> depth;
<a name="l00493"></a><a class="code" href="class_ktexteditparag.html#o14">00493</a>     <font class="keywordtype">int</font> align;
00494 
00495 };
00496 
00497 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00498 
<a name="l00499"></a><a class="code" href="class_ktexteditformatter.html">00499</a> <font class="keyword">class </font><a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a>
00500 {
00501 <font class="keyword">public</font>:
00502     <a class="code" href="class_ktexteditformatter.html#a0">KTextEditFormatter</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d );
<a name="l00503"></a><a class="code" href="class_ktexteditformatter.html#a1">00503</a>     <font class="keyword">virtual</font> <a class="code" href="class_ktexteditformatter.html#a1">~KTextEditFormatter</a>()<font class="keyword"> </font>{}
00504     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformatter.html#a2">format</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *parag, <font class="keywordtype">int</font> start ) = 0;
00505 
00506 <font class="keyword">protected</font>:
<a name="l00507"></a><a class="code" href="class_ktexteditformatter.html#n0">00507</a>     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
00508 
00509 };
00510 
00511 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00512 
<a name="l00513"></a><a class="code" href="class_ktexteditformatterbreakwords.html">00513</a> <font class="keyword">class </font><a class="code" href="class_ktexteditformatterbreakwords.html">KTextEditFormatterBreakWords</a> : <font class="keyword">public</font> <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a>
00514 {
00515 <font class="keyword">public</font>:
00516     <a class="code" href="class_ktexteditformatterbreakwords.html#a0">KTextEditFormatterBreakWords</a>( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d );
00517     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformatter.html#a2">format</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *parag, <font class="keywordtype">int</font> start );
00518 
00519 };
00520 
00521 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00522 
<a name="l00523"></a><a class="code" href="class_ktexteditformat.html">00523</a> <font class="keyword">class </font><a class="code" href="class_ktexteditformat.html">KTextEditFormat</a>
00524 {
<a name="l00525"></a><a class="code" href="class_ktexteditformat.html#l0">00525</a>     <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a>;
00526 
00527 <font class="keyword">public</font>:
<a name="l00528"></a><a class="code" href="class_ktexteditformat.html#s8">00528</a>     <font class="keyword">enum</font> Flags {
00529         Bold = 1,
00530         Italic = 2,
00531         Underline = 4,
00532         Family = 8,
00533         Size = 16,
00534         Color = 32,
00535         Font = Bold | Italic | Underline | Family | Size,
00536         Format = Font | Color
00537     };
00538 
00539     <a class="code" href="class_ktexteditformat.html#c3">KTextEditFormat</a>( <font class="keyword">const</font> QFont &amp;f, <font class="keyword">const</font> QColor &amp;c );
00540     <a class="code" href="class_ktexteditformat.html#c3">KTextEditFormat</a>( <font class="keyword">const</font> <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> &amp;fm );
00541     QColor <a class="code" href="class_ktexteditformat.html#a2">color</a>() <font class="keyword">const</font>;
00542     QFont <a class="code" href="class_ktexteditformat.html#a3">font</a>() <font class="keyword">const</font>;
00543     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a4">minLeftBearing</a>() <font class="keyword">const</font>;
00544     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a5">minRightBearing</a>() <font class="keyword">const</font>;
00545     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a6">width</a>( <font class="keyword">const</font> QChar &amp;c ) <font class="keyword">const</font>;
00546     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a7">height</a>() <font class="keyword">const</font>;
00547     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a8">ascent</a>() <font class="keyword">const</font>;
00548     <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a9">descent</a>() <font class="keyword">const</font>;
00549 
00550     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a10">setBold</a>( <font class="keywordtype">bool</font> b );
00551     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a11">setItalic</a>( <font class="keywordtype">bool</font> b );
00552     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a12">setUnderline</a>( <font class="keywordtype">bool</font> b );
00553     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a13">setFamily</a>( <font class="keyword">const</font> QString &amp;f );
00554     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a14">setPointSize</a>( <font class="keywordtype">int</font> s );
00555     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a15">setFont</a>( <font class="keyword">const</font> QFont &amp;f );
00556     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a16">setColor</a>( <font class="keyword">const</font> QColor &amp;c );
00557 
00558     <font class="keywordtype">bool</font><a class="code" href="class_ktexteditformat.html#a17"> operator==</a>( <font class="keyword">const</font> <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> &amp;f ) <font class="keyword">const</font>;
00559     <a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a> *<a class="code" href="class_ktexteditformat.html#a18">parent</a>() <font class="keyword">const</font>;
00560     QString <a class="code" href="class_ktexteditformat.html#a19">key</a>() <font class="keyword">const</font>;
00561 
00562     <font class="keyword">static</font> QString <a class="code" href="class_ktexteditformat.html#d0">getKey</a>( <font class="keyword">const</font> QFont &amp;f, <font class="keyword">const</font> QColor &amp;c );
00563 
00564     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a20">addRef</a>();
00565     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a21">removeRef</a>();
00566 
00567 <font class="keyword">private</font>:
00568     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#c0">update</a>();
00569     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#c1">generateKey</a>();
00570     <font class="keyword">const</font> QFontMetrics *<a class="code" href="class_ktexteditformat.html#c2">fontMetrics</a>() <font class="keyword">const</font>;
<a name="l00571"></a><a class="code" href="class_ktexteditformat.html#c3">00571</a>     <a class="code" href="class_ktexteditformat.html#c3">KTextEditFormat</a>()<font class="keyword"> </font>{}
00572 
00573 <font class="keyword">private</font>:
<a name="l00574"></a><a class="code" href="class_ktexteditformat.html#o0">00574</a>     QFont fn;
<a name="l00575"></a><a class="code" href="class_ktexteditformat.html#o1">00575</a>     QColor col;
<a name="l00576"></a><a class="code" href="class_ktexteditformat.html#o2">00576</a>     QFontMetrics *fm;
<a name="l00577"></a><a class="code" href="class_ktexteditformat.html#o4">00577</a>     <font class="keywordtype">int</font> leftBearing, rightBearing;
<a name="l00578"></a><a class="code" href="class_ktexteditformat.html#o5">00578</a>     <font class="keywordtype">int</font> widths[ 256 ];
<a name="l00579"></a><a class="code" href="class_ktexteditformat.html#o6">00579</a>     <font class="keywordtype">int</font> hei, asc, dsc;
<a name="l00580"></a><a class="code" href="class_ktexteditformat.html#o9">00580</a>     <a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a> *collection;
<a name="l00581"></a><a class="code" href="class_ktexteditformat.html#o10">00581</a>     <font class="keywordtype">int</font> ref;
<a name="l00582"></a><a class="code" href="class_ktexteditformat.html#o11">00582</a>     QString k;
00583 
00584 };
00585 
00586 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00587 
<a name="l00588"></a><a class="code" href="class_ktexteditformatcollection.html">00588</a> <font class="keyword">class </font><a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a>
00589 {
00590 <font class="keyword">public</font>:
00591     <a class="code" href="class_ktexteditformatcollection.html#a0">KTextEditFormatCollection</a>();
<a name="l00592"></a><a class="code" href="class_ktexteditformatcollection.html#a1">00592</a>     <a class="code" href="class_ktexteditformatcollection.html#a1">~KTextEditFormatCollection</a>()<font class="keyword"> </font>{     qDebug( <font class="stringliteral">"KTextEditFormatCommand::~KTextEditFormatCommand"</font> ); }
00593 
00594 
00595     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a2">setDefaultFormat</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f );
00596     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *<a class="code" href="class_ktexteditformatcollection.html#a3">defaultFormat</a>() <font class="keyword">const</font>;
00597     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *<a class="code" href="class_ktexteditformatter.html#a2">format</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f );
00598     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *<a class="code" href="class_ktexteditformatter.html#a2">format</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *of, <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *nf, <font class="keywordtype">int</font> flags );
00599     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *<a class="code" href="class_ktexteditformatter.html#a2">format</a>( <font class="keyword">const</font> QFont &amp;f, <font class="keyword">const</font> QColor &amp;c );
00600     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a7">remove</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f );
00601 
00602     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a8">debug</a>();
00603 
00604     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a9">zoom</a>( <font class="keywordtype">float</font> f );
00605     <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a10">unzoom</a>();
00606 
00607 <font class="keyword">private</font>:
<a name="l00608"></a><a class="code" href="class_ktexteditformatcollection.html#o1">00608</a>     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *defFormat, *lastFormat, *cachedFormat;
<a name="l00609"></a><a class="code" href="class_ktexteditformatcollection.html#o3">00609</a>     QDict&lt;KTextEditFormat&gt; cKey;
<a name="l00610"></a><a class="code" href="class_ktexteditformatcollection.html#o4">00610</a>     QPtrDict&lt;int&gt; orig;
<a name="l00611"></a><a class="code" href="class_ktexteditformatcollection.html#o5">00611</a>     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *cres;
<a name="l00612"></a><a class="code" href="class_ktexteditformatcollection.html#o6">00612</a>     QFont cfont;
<a name="l00613"></a><a class="code" href="class_ktexteditformatcollection.html#o7">00613</a>     QColor ccol;
<a name="l00614"></a><a class="code" href="class_ktexteditformatcollection.html#o8">00614</a>     QString kof, knf;
<a name="l00615"></a><a class="code" href="class_ktexteditformatcollection.html#o10">00615</a>     <font class="keywordtype">int</font> cflags;
<a name="l00616"></a><a class="code" href="class_ktexteditformatcollection.html#o11">00616</a>     <font class="keywordtype">float</font> zoomFakt;
00617 
00618 };
00619 
<a name="l00620"></a><a class="code" href="class_ktextedit.html">00620</a> <font class="keyword">class </font><a class="code" href="class_ktextedit.html">KTextEdit</a> : <font class="keyword">public</font> <font class="comment">/*QWidget*/</font><a class="code" href="class_qscrollview.html">QScrollView</a>
00621 {
00622     Q_OBJECT
00623 
00624 <font class="keyword">public</font>:
<a name="l00625"></a><a class="code" href="class_ktextedit.html#s3">00625</a>     <font class="keyword">enum</font> ParagType {
00626         Normal = 0,
00627         BulletList,
00628         EnumList
00629     };
00630 
00631     <a class="code" href="class_ktextedit.html#a0">KTextEdit</a>( <a class="code" href="class_qwidget.html">QWidget</a> *parent, <font class="keyword">const</font> QString &amp;fn, <font class="keywordtype">bool</font> tabify = FALSE );
00632     <a class="code" href="class_ktextedit.html#a0">KTextEdit</a>( <a class="code" href="class_qwidget.html">QWidget</a> *parent = 0, <font class="keyword">const</font> <font class="keywordtype">char</font> *name = 0 );
00633     <font class="keyword">virtual</font> <a class="code" href="class_ktextedit.html#a2">~KTextEdit</a>();
00634 
00635     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a3">clear</a>();
00636 
00637     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *<a class="code" href="class_ktextedit.html#a4">document</a>() <font class="keyword">const</font>;
00638 
00639     QString <a class="code" href="class_ktexteditdeletecommand.html#n2">text</a>() <font class="keyword">const</font>;
00640     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a6">setText</a>( <font class="keyword">const</font> QString &amp;txt );
00641 
00642     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a7">cursorPosition</a>( <font class="keywordtype">int</font> &amp;parag, <font class="keywordtype">int</font> &amp;index );
00643     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a8">selection</a>( <font class="keywordtype">int</font> &amp;parag_from, <font class="keywordtype">int</font> &amp;index_from,
00644                     <font class="keywordtype">int</font> &amp;parag_to, <font class="keywordtype">int</font> &amp;index_to );
00645     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a9">find</a>( <font class="keyword">const</font> QString &amp;expr, <font class="keywordtype">bool</font> cs, <font class="keywordtype">bool</font> wo, <font class="keywordtype">bool</font> forward = TRUE,
00646                        <font class="keywordtype">int</font> *parag = 0, <font class="keywordtype">int</font> *index = 0 );
00647     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a10">insert</a>( <font class="keyword">const</font> QString &amp;text, <font class="keywordtype">bool</font> checkNewLine = FALSE );
00648 
00649     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a11">paragraphs</a>() <font class="keyword">const</font>;
00650     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a12">lines</a>() <font class="keyword">const</font>;
00651     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a13">linesOfParagraph</a>( <font class="keywordtype">int</font> parag ) <font class="keyword">const</font>;
00652     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a14">lineOfChar</a>( <font class="keywordtype">int</font> parag, <font class="keywordtype">int</font> chr );
00653 
00654     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a15">isReadOnly</a>() <font class="keyword">const</font>;
00655     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a16">isModified</a>() <font class="keyword">const</font>;
00656 
00657     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a17">italic</a>() <font class="keyword">const</font>;
00658     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a18">bold</a>() <font class="keyword">const</font>;
00659     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#a19">underline</a>() <font class="keyword">const</font>;
00660     QString <a class="code" href="class_ktextedit.html#a20">family</a>() <font class="keyword">const</font>;
00661     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a21">pointSize</a>() <font class="keyword">const</font>;
00662     QColor <a class="code" href="class_ktextedit.html#a22">color</a>() <font class="keyword">const</font>;
00663     QFont <a class="code" href="class_ktextedit.html#a23">font</a>() <font class="keyword">const</font>;
00664     ParagType <a class="code" href="class_ktextedit.html#a24">paragType</a>() <font class="keyword">const</font>;
00665     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a25">alignment</a>() <font class="keyword">const</font>;
00666     <font class="keywordtype">int</font> <a class="code" href="class_ktextedit.html#a26">maxLines</a>() <font class="keyword">const</font>;
00667 
00668     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a27">zoom</a>( <font class="keywordtype">float</font> f );
00669     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a28">unzoom</a>();
00670 
<a name="l00671"></a><a class="code" href="class_ktextedit.html#a29">00671</a>     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktextedit.html#a29">currentParagraph</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a1">parag</a>(); }
00672     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a30">extendContents2Height</a>();
00673     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#a31">updateCurrentFormat</a>();
00674 
00675 <font class="keyword">public</font> slots:
00676     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g0">undo</a>();
00677     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g1">redo</a>();
00678 
00679     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g2">cut</a>();
00680     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g3">copy</a>();
00681     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g4">paste</a>();
00682 
00683     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g5">indent</a>();
00684 
00685     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g6">setItalic</a>( <font class="keywordtype">bool</font> b );
00686     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g7">setBold</a>( <font class="keywordtype">bool</font> b );
00687     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g8">setUnderline</a>( <font class="keywordtype">bool</font> b );
00688     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g9">setFamily</a>( <font class="keyword">const</font> QString &amp;f );
00689     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g10">setPointSize</a>( <font class="keywordtype">int</font> s );
00690     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g11">setColor</a>( <font class="keyword">const</font> QColor &amp;c );
00691     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g12">setFont</a>( <font class="keyword">const</font> QFont &amp;f );
00692 
00693     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g13">setParagType</a>( ParagType t );
00694     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g14">setAlignment</a>( <font class="keywordtype">int</font> );
00695     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g15">setListDepth</a>( <font class="keywordtype">int</font> diff );
00696 
00697     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g16">setCursorPosition</a>( <font class="keywordtype">int</font> parag, <font class="keywordtype">int</font> index );
00698     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g17">setSelection</a>( <font class="keywordtype">int</font> parag_from, <font class="keywordtype">int</font> index_from,
00699                                <font class="keywordtype">int</font> parag_to, <font class="keywordtype">int</font> index_to );
00700 
00701     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g18">setReadOnly</a>( <font class="keywordtype">bool</font> ro );
00702     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i4">setModified</a>( <font class="keywordtype">bool</font> m );
00703     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g20">selectAll</a>( <font class="keywordtype">bool</font> select );
00704 
00705     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g21">setMaxLines</a>( <font class="keywordtype">int</font> l );
00706     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#g22">resetFormat</a>();
00707 
<a name="l00708"></a><a class="code" href="class_ktextedit.html#g23">00708</a>     QSize <a class="code" href="class_ktextedit.html#g23">neededSize</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> QSize( doc-&gt;<a class="code" href="class_ktexteditdocument.html#a6">width</a>(), doc-&gt;<a class="code" href="class_ktexteditdocument.html#a10">lastParag</a>()-&gt;<a class="code" href="class_ktexteditparag.html#a8">rect</a>().bottom() + 1 ); }
00709 
00710 signals:
00711     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j0">currentFontChanged</a>( <font class="keyword">const</font> QFont &amp;f );
00712     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j1">currentColorChanged</a>( <font class="keyword">const</font> QColor &amp;c );
00713     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j2">currentAlignmentChanged</a>( <font class="keywordtype">int</font> );
00714     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j3">currentParagTypeChanged</a>( KTextEdit::ParagType );
00715     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j4">textChanged</a>();
00716     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#j5">exitEditMode</a>();
00717 
00718 <font class="keyword">protected</font>:
00719     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b0">setFormat</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f, <font class="keywordtype">int</font> flags );
00720     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b1">drawContents</a>( QPainter *p, <font class="keywordtype">int</font> cx, <font class="keywordtype">int</font> cy, <font class="keywordtype">int</font> cw, <font class="keywordtype">int</font> ch );
00721     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b2">keyPressEvent</a>( QKeyEvent *e );
00722     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b3">resizeEvent</a>( QResizeEvent *e );
00723     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b4">viewportPaintEvent</a>( QPaintEvent *e );
00724     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b5">viewportMousePressEvent</a>( QMouseEvent *e );
00725     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b6">viewportMouseMoveEvent</a>( QMouseEvent *e );
00726     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b7">viewportMouseReleaseEvent</a>( QMouseEvent *e );
00727     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b8">viewportMouseDoubleClickEvent</a>( QMouseEvent *e );
00728     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b9">viewportDragEnterEvent</a>( QDragEnterEvent *e );
00729     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b10">viewportDragMoveEvent</a>( QDragMoveEvent *e );
00730     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b11">viewportDragLeaveEvent</a>( QDragLeaveEvent *e );
00731     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#b12">viewportDropEvent</a>( QDropEvent *e );
00732     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#b13">event</a>( QEvent * e );
00733     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#b14">eventFilter</a>( <a class="code" href="class_qobject.html">QObject</a> *o, QEvent *e );
00734     <font class="keywordtype">bool</font> <a class="code" href="class_ktextedit.html#b15">focusNextPrevChild</a>( <font class="keywordtype">bool</font> next );
00735 
00736 <font class="keyword">private</font> slots:
00737     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i0">formatMore</a>();
00738     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i1">doResize</a>();
00739     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i2">doChangeInterval</a>();
00740     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i3">blinkCursor</a>();
00741     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i4">setModified</a>();
00742     <font class="keywordtype">void</font> <a class="code" href="class_ktextedit.html#i5">startDrag</a>();
00743 
00744 <font class="keyword">private</font>:
<a name="l00745"></a><a class="code" href="class_ktextedit.html#u11">00745</a>     <font class="keyword">enum</font> MoveDirection {
00746         MoveLeft,
00747         MoveRight,
00748         MoveUp,
00749         MoveDown,
00750         MoveHome,
00751         MoveEnd,
00752         MovePgUp,
00753         MovePgDown
00754     };
<a name="l00755"></a><a class="code" href="class_ktextedit.html#u12">00755</a>     <font class="keyword">enum</font> KeyboardAction {
00756         ActionBackspace,
00757         ActionDelete,
00758         ActionReturn
00759     };
00760 
<a name="l00761"></a><a class="code" href="class_ktextedit__undoredoinfo.html">00761</a>     <font class="keyword">struct </font>UndoRedoInfo {
<a name="l00762"></a><a class="code" href="class_ktextedit__undoredoinfo.html#s6">00762</a>         <font class="keyword">enum</font> Type { Invalid, Insert, Delete, Backspace, Return, RemoveSelected };
<a name="l00763"></a><a class="code" href="class_ktextedit__undoredoinfo.html#a0">00763</a>         UndoRedoInfo( <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *d ) : <a class="code" href="class_ktexteditcommand.html#a2">type</a>( Invalid ), <a class="code" href="class_ktexteditcommand.html#n0">doc</a>( d )<font class="keyword">
</font>00764 <font class="keyword">        </font>{ text = QString::null; id = -1; index = -1; }
00765         <font class="keywordtype">void</font> clear();
<a name="l00766"></a><a class="code" href="class_ktextedit__undoredoinfo.html#a2">00766</a>         <font class="keyword">inline</font> <font class="keywordtype">bool</font> valid()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !text.isEmpty() &amp;&amp; id &gt;= 0&amp;&amp; index &gt;= 0; }
00767 
<a name="l00768"></a><a class="code" href="class_ktextedit__undoredoinfo.html#m0">00768</a>         QString text;
<a name="l00769"></a><a class="code" href="class_ktextedit__undoredoinfo.html#m1">00769</a>         <font class="keywordtype">int</font> id;
<a name="l00770"></a><a class="code" href="class_ktextedit__undoredoinfo.html#m2">00770</a>         <font class="keywordtype">int</font> index;
<a name="l00771"></a><a class="code" href="class_ktextedit__undoredoinfo.html#m3">00771</a>         Type type;
<a name="l00772"></a><a class="code" href="class_ktextedit__undoredoinfo.html#m4">00772</a>         <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
00773     };
00774 
00775 <font class="keyword">private</font>:
00776     QPixmap *bufferPixmap( <font class="keyword">const</font> QSize &amp;s );
00777     <font class="keywordtype">void</font> init();
00778     <font class="keywordtype">void</font> drawCursor( <font class="keywordtype">bool</font> visible );
00779     <font class="keywordtype">void</font> placeCursor( <font class="keyword">const</font> QPoint &amp;pos, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *c = 0 );
00780     <font class="keywordtype">void</font> moveCursor( <font class="keywordtype">int</font> direction, <font class="keywordtype">bool</font> shift, <font class="keywordtype">bool</font> control );
00781     <font class="keywordtype">void</font> moveCursor( <font class="keywordtype">int</font> direction, <font class="keywordtype">bool</font> control );
00782     <font class="keywordtype">void</font> removeSelectedText();
00783     <font class="keywordtype">void</font> doKeyboardAction( <font class="keywordtype">int</font> action );
00784     <font class="keywordtype">void</font> checkUndoRedoInfo( UndoRedoInfo::Type t );
00785     <font class="keywordtype">void</font> repaintChanged();
00786 
00787 <font class="keyword">private</font>:
<a name="l00788"></a><a class="code" href="class_ktextedit.html#o0">00788</a>     <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *doc;
<a name="l00789"></a><a class="code" href="class_ktextedit.html#o1">00789</a>     <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor;
<a name="l00790"></a><a class="code" href="class_ktextedit.html#o2">00790</a>     <font class="keywordtype">bool</font> drawAll;
<a name="l00791"></a><a class="code" href="class_ktextedit.html#o3">00791</a>     <font class="keywordtype">bool</font> mousePressed;
<a name="l00792"></a><a class="code" href="class_ktextedit.html#o4">00792</a>     QTimer *formatTimer, *changeIntervalTimer, *blinkTimer, *dragStartTimer;
<a name="l00793"></a><a class="code" href="class_ktextedit.html#o8">00793</a>     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *lastFormatted;
<a name="l00794"></a><a class="code" href="class_ktextedit.html#o9">00794</a>     <font class="keywordtype">int</font> interval;
<a name="l00795"></a><a class="code" href="class_ktextedit.html#o10">00795</a>     UndoRedoInfo undoRedoInfo;
<a name="l00796"></a><a class="code" href="class_ktextedit.html#o11">00796</a>     <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *currentFormat;
<a name="l00797"></a><a class="code" href="class_ktextedit.html#o12">00797</a>     QPainter painter;
<a name="l00798"></a><a class="code" href="class_ktextedit.html#o13">00798</a>     QPixmap *doubleBuffer;
<a name="l00799"></a><a class="code" href="class_ktextedit.html#o14">00799</a>     <font class="keywordtype">int</font> currentAlignment;
<a name="l00800"></a><a class="code" href="class_ktextedit.html#o15">00800</a>     ParagType currentParagType;
<a name="l00801"></a><a class="code" href="class_ktextedit.html#o16">00801</a>     <font class="keywordtype">bool</font> inDoubleClick;
<a name="l00802"></a><a class="code" href="class_ktextedit.html#o17">00802</a>     QPoint oldMousePos, mousePos;
<a name="l00803"></a><a class="code" href="class_ktextedit.html#o19">00803</a>     QPixmap *buf_pixmap;
<a name="l00804"></a><a class="code" href="class_ktextedit.html#o20">00804</a>     <font class="keywordtype">bool</font> cursorVisible, blinkCursorVisible;
<a name="l00805"></a><a class="code" href="class_ktextedit.html#o22">00805</a>     <font class="keywordtype">bool</font> readOnly, modified, mightStartDrag;
<a name="l00806"></a><a class="code" href="class_ktextedit.html#o25">00806</a>     QPoint dragStartPos;
<a name="l00807"></a><a class="code" href="class_ktextedit.html#o26">00807</a>     <font class="keywordtype">int</font> mLines;
00808 
00809 };
00810 
00811 
00812 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00813 
<a name="l00814"></a><a class="code" href="class_ktexteditcursor.html#a1">00814</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditcursor.html#a1">KTextEditCursor::parag</a>()<font class="keyword"> const
</font>00815 <font class="keyword"></font>{
00816     <font class="keywordflow">return</font> string;
00817 }
00818 
<a name="l00819"></a><a class="code" href="class_ktexteditcursor.html#a2">00819</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditcursor.html#a2">KTextEditCursor::index</a>()<font class="keyword"> const
</font>00820 <font class="keyword"></font>{
00821     <font class="keywordflow">return</font> idx;
00822 }
00823 
<a name="l00824"></a><a class="code" href="class_ktexteditcursor.html#a22">00824</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a22">KTextEditCursor::setIndex</a>( <font class="keywordtype">int</font> i )<font class="keyword">
</font>00825 <font class="keyword"></font>{
00826     tmpIndex = -1;
00827     idx = i;
00828 }
00829 
<a name="l00830"></a><a class="code" href="class_ktexteditcursor.html#a3">00830</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a3">KTextEditCursor::setParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s )<font class="keyword">
</font>00831 <font class="keyword"></font>{
00832     idx = 0;
00833     string = s;
00834     tmpIndex = -1;
00835 }
00836 
<a name="l00837"></a><a class="code" href="class_ktexteditcursor.html#a23">00837</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditcursor.html#a23">KTextEditCursor::checkIndex</a>()<font class="keyword">
</font>00838 <font class="keyword"></font>{
00839     <font class="keywordflow">if</font> ( idx &gt;= string-&gt;<a class="code" href="class_ktexteditstring.html#a3">length</a>() )
00840         idx = string-&gt;<a class="code" href="class_ktexteditstring.html#a3">length</a>() - 1;
00841 }
00842 
00843 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00844 
<a name="l00845"></a><a class="code" href="class_ktexteditdocument.html#a4">00845</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a4">KTextEditDocument::x</a>()<font class="keyword"> const
</font>00846 <font class="keyword"></font>{
00847     <font class="keywordflow">return</font> cx;
00848 }
00849 
<a name="l00850"></a><a class="code" href="class_ktexteditdocument.html#a5">00850</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a5">KTextEditDocument::y</a>()<font class="keyword"> const
</font>00851 <font class="keyword"></font>{
00852     <font class="keywordflow">return</font> cy + marg;
00853 }
00854 
<a name="l00855"></a><a class="code" href="class_ktexteditdocument.html#a6">00855</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a6">KTextEditDocument::width</a>()<font class="keyword"> const
</font>00856 <font class="keyword"></font>{
00857     <font class="keywordflow">return</font> cw - 2 * marg;
00858 }
00859 
<a name="l00860"></a><a class="code" href="class_ktexteditdocument.html#a7">00860</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a7">KTextEditDocument::height</a>()<font class="keyword"> const
</font>00861 <font class="keyword"></font>{
00862     <font class="keywordflow">if</font> ( !lParag )
00863         <font class="keywordflow">return</font> 0;
00864     <font class="keywordflow">return</font> lParag-&gt;<a class="code" href="class_ktexteditparag.html#a8">rect</a>().bottom() + 1;
00865 }
00866 
<a name="l00867"></a><a class="code" href="class_ktexteditdocument.html#a9">00867</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a9">KTextEditDocument::firstParag</a>()<font class="keyword"> const
</font>00868 <font class="keyword"></font>{
00869     <font class="keywordflow">return</font> fParag;
00870 }
00871 
<a name="l00872"></a><a class="code" href="class_ktexteditdocument.html#a10">00872</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a10">KTextEditDocument::lastParag</a>()<font class="keyword"> const
</font>00873 <font class="keyword"></font>{
00874     <font class="keywordflow">return</font> lParag;
00875 }
00876 
<a name="l00877"></a><a class="code" href="class_ktexteditdocument.html#a11">00877</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a11">KTextEditDocument::setFirstParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p )<font class="keyword">
</font>00878 <font class="keyword"></font>{
00879     fParag = p;
00880 }
00881 
<a name="l00882"></a><a class="code" href="class_ktexteditdocument.html#a12">00882</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a12">KTextEditDocument::setLastParag</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *p )<font class="keyword">
</font>00883 <font class="keyword"></font>{
00884     lParag = p;
00885 }
00886 
<a name="l00887"></a><a class="code" href="class_ktexteditdocument.html#a8">00887</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a8">KTextEditDocument::setWidth</a>( <font class="keywordtype">int</font> w )<font class="keyword">
</font>00888 <font class="keyword"></font>{
00889     cw = w;
00890 }
00891 
<a name="l00892"></a><a class="code" href="class_ktexteditdocument.html#a14">00892</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a14">KTextEditDocument::setFormatter</a>( <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a> *f )<font class="keyword">
</font>00893 <font class="keyword"></font>{
00894     pFormatter = f;
00895 }
00896 
<a name="l00897"></a><a class="code" href="class_ktexteditdocument.html#a15">00897</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditformatter.html">KTextEditFormatter</a> *<a class="code" href="class_ktexteditdocument.html#a15">KTextEditDocument::formatter</a>()<font class="keyword"> const
</font>00898 <font class="keyword"></font>{
00899     <font class="keywordflow">return</font> pFormatter;
00900 }
00901 
<a name="l00902"></a><a class="code" href="class_ktexteditdocument.html#a16">00902</a> <font class="keyword">inline</font> QColor <a class="code" href="class_ktexteditdocument.html#a16">KTextEditDocument::selectionColor</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>00903 <font class="keyword"></font>{
00904     <font class="keywordflow">return</font> selectionColors[ id ];
00905 }
00906 
<a name="l00907"></a><a class="code" href="class_ktexteditdocument.html#a17">00907</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a17">KTextEditDocument::invertSelectionText</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>00908 <font class="keyword"></font>{
00909     <font class="keywordflow">return</font> selectionText[ id ];
00910 }
00911 
<a name="l00912"></a><a class="code" href="class_ktexteditdocument.html#a18">00912</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditdocument.html#a18">KTextEditDocument::hasSelection</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>00913 <font class="keyword"></font>{
00914     <font class="keywordflow">return</font> selections.find( id ) != selections.end();
00915 }
00916 
<a name="l00917"></a><a class="code" href="class_ktexteditdocument.html#a19">00917</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditdocument.html#a19">KTextEditDocument::setSelectionStart</a>( <font class="keywordtype">int</font> id, <a class="code" href="class_ktexteditcursor.html">KTextEditCursor</a> *cursor )<font class="keyword">
</font>00918 <font class="keyword"></font>{
00919     Selection sel;
00920     sel.startParag = cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a1">parag</a>();
00921     sel.endParag = cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a1">parag</a>();
00922     sel.startParag-&gt;setSelection( id, cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a2">index</a>(), cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a2">index</a>() );
00923     sel.startIndex = cursor-&gt;<a class="code" href="class_ktexteditcursor.html#a2">index</a>();
00924     selections[ id ] = sel;
00925 }
00926 
<a name="l00927"></a><a class="code" href="class_ktexteditdocument.html#a31">00927</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditdocument.html#a31">KTextEditDocument::paragAt</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const
</font>00928 <font class="keyword"></font>{
00929     <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *s = fParag;
00930     <font class="keywordflow">while</font> ( s ) {
00931         <font class="keywordflow">if</font> ( s-&gt;<a class="code" href="class_ktexteditparag.html#a40">paragId</a>() == i )
00932             <font class="keywordflow">return</font> s;
00933         s = s-&gt;<a class="code" href="class_ktexteditparag.html#a10">next</a>();
00934     }
00935     <font class="keywordflow">return</font> 0;
00936 }
00937 
<a name="l00938"></a><a class="code" href="class_ktexteditdocument.html#a36">00938</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a36">KTextEditDocument::listIndent</a>( <font class="keywordtype">int</font> depth )<font class="keyword"> const
</font>00939 <font class="keyword"></font>{
00940     <font class="comment">// #######</font>
00941     <font class="keywordflow">return</font> ( depth + 1 ) * listMult;
00942 }
00943 
<a name="l00944"></a><a class="code" href="class_ktexteditdocument.html#a37">00944</a> <font class="keyword">inline</font> KTextEditDocument::Bullet <a class="code" href="class_ktexteditdocument.html#a37">KTextEditDocument::bullet</a>( <font class="keywordtype">int</font> depth )<font class="keyword"> const
</font>00945 <font class="keyword"></font>{
00946     <font class="keywordflow">if</font> ( depth == 0 )
00947         <font class="keywordflow">return</font> txtSettings.bulletType[ 0 ];
00948     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 1 )
00949         <font class="keywordflow">return</font> txtSettings.bulletType[ 1 ];
00950     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 2 )
00951         <font class="keywordflow">return</font> txtSettings.bulletType[ 2 ];
00952     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 3 )
00953         <font class="keywordflow">return</font> txtSettings.bulletType[ 3 ];
00954     <font class="keywordflow">else</font>
00955         <font class="keywordflow">return</font> txtSettings.bulletType[ 0 ];
00956 }
00957 
<a name="l00958"></a><a class="code" href="class_ktexteditdocument.html#a38">00958</a> <font class="keyword">inline</font> QColor <a class="code" href="class_ktexteditdocument.html#a38">KTextEditDocument::bulletColor</a>( <font class="keywordtype">int</font> depth )<font class="keyword"> const
</font>00959 <font class="keyword"></font>{
00960     <font class="keywordflow">if</font> ( depth == 0 )
00961         <font class="keywordflow">return</font> txtSettings.bulletColor[ 0 ];
00962     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 1 )
00963         <font class="keywordflow">return</font> txtSettings.bulletColor[ 1 ];
00964     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 2 )
00965         <font class="keywordflow">return</font> txtSettings.bulletColor[ 2 ];
00966     <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( depth == 3 )
00967         <font class="keywordflow">return</font> txtSettings.bulletColor[ 3 ];
00968     <font class="keywordflow">else</font>
00969         <font class="keywordflow">return</font> txtSettings.bulletColor[ 0 ];
00970 }
00971 
<a name="l00972"></a><a class="code" href="class_ktexteditdocument.html#a43">00972</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a43">KTextEditDocument::paragSpacing</a>( <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> * )<font class="keyword"> const
</font>00973 <font class="keyword"></font>{
00974     <font class="keywordflow">return</font> ps;
00975 }
00976 
<a name="l00977"></a><a class="code" href="class_ktexteditdocument.html#a44">00977</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditdocument.html#a44">KTextEditDocument::lineSpacing</a>()<font class="keyword"> const
</font>00978 <font class="keyword"></font>{
00979     <font class="keywordflow">return</font> ls;
00980 }
00981 
00982 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
00983 
<a name="l00984"></a><a class="code" href="class_ktexteditformat.html#a0">00984</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditformat.html#c3">KTextEditFormat::KTextEditFormat</a>( <font class="keyword">const</font> QFont &amp;f, <font class="keyword">const</font> QColor &amp;c )
00985     : fn( f ), col( c ), fm( <font class="keyword">new</font> QFontMetrics( f ) ), collection( 0L )<font class="keyword">
</font>00986 <font class="keyword"></font>{
00987     leftBearing = fm-&gt;minLeftBearing();
00988     rightBearing = fm-&gt;minRightBearing();
00989     hei = fm-&gt;height();
00990     asc = fm-&gt;ascent();
00991     dsc = fm-&gt;descent();
00992     <font class="keywordflow">for</font> ( <font class="keywordtype">int</font> i = 0; i &lt; 256; ++i )
00993         widths[ i ] = 0;
00994     generateKey();
00995     addRef();
00996 }
00997 
<a name="l00998"></a><a class="code" href="class_ktexteditformat.html#a1">00998</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditformat.html#c3">KTextEditFormat::KTextEditFormat</a>( <font class="keyword">const</font> <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> &amp;f ) : collection( 0L )<font class="keyword">
</font>00999 <font class="keyword"></font>{
01000     qDebug(<font class="stringliteral">"constructing a format from another one"</font>);
01001     fn = f.fn;
01002     col = f.col;
01003     fm = <font class="keyword">new</font> QFontMetrics( fn );
01004     leftBearing = f.leftBearing;
01005     rightBearing = f.rightBearing;
01006     <font class="keywordflow">for</font> ( <font class="keywordtype">int</font> i = 0; i &lt; 256; ++i )
01007         widths[ i ] = f.widths[ i ];
01008     hei = f.hei;
01009     asc = f.asc;
01010     dsc = f.dsc;
01011     generateKey();
01012     addRef();
01013 }
01014 
<a name="l01015"></a><a class="code" href="class_ktexteditformat.html#c0">01015</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#c0">KTextEditFormat::update</a>()<font class="keyword">
</font>01016 <font class="keyword"></font>{
01017     *fm = QFontMetrics( fn );
01018     leftBearing = fm-&gt;minLeftBearing();
01019     rightBearing = fm-&gt;minRightBearing();
01020     hei = fm-&gt;height();
01021     asc = fm-&gt;ascent();
01022     dsc = fm-&gt;descent();
01023     <font class="keywordflow">for</font> ( <font class="keywordtype">int</font> i = 0; i &lt; 256; ++i )
01024         widths[ i ] = 0;
01025     <a class="code" href="class_ktexteditformat.html#c1">generateKey</a>();
01026 }
01027 
<a name="l01028"></a><a class="code" href="class_ktexteditformat.html#c2">01028</a> <font class="keyword">inline</font> <font class="keyword">const</font> QFontMetrics *<a class="code" href="class_ktexteditformat.html#c2">KTextEditFormat::fontMetrics</a>()<font class="keyword"> const
</font>01029 <font class="keyword"></font>{
01030     <font class="keywordflow">return</font> fm;
01031 }
01032 
<a name="l01033"></a><a class="code" href="class_ktexteditformat.html#a2">01033</a> <font class="keyword">inline</font> QColor <a class="code" href="class_ktexteditformat.html#a2">KTextEditFormat::color</a>()<font class="keyword"> const
</font>01034 <font class="keyword"></font>{
01035     <font class="keywordflow">return</font> col;
01036 }
01037 
<a name="l01038"></a><a class="code" href="class_ktexteditformat.html#a3">01038</a> <font class="keyword">inline</font> QFont <a class="code" href="class_ktexteditformat.html#a3">KTextEditFormat::font</a>()<font class="keyword"> const
</font>01039 <font class="keyword"></font>{
01040     <font class="keywordflow">return</font> fn;
01041 }
01042 
<a name="l01043"></a><a class="code" href="class_ktexteditformat.html#a4">01043</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a4">KTextEditFormat::minLeftBearing</a>()<font class="keyword"> const
</font>01044 <font class="keyword"></font>{
01045     <font class="keywordflow">return</font> leftBearing;
01046 }
01047 
<a name="l01048"></a><a class="code" href="class_ktexteditformat.html#a5">01048</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a5">KTextEditFormat::minRightBearing</a>()<font class="keyword"> const
</font>01049 <font class="keyword"></font>{
01050     <font class="keywordflow">return</font> rightBearing;
01051 }
01052 
<a name="l01053"></a><a class="code" href="class_ktexteditformat.html#a6">01053</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a6">KTextEditFormat::width</a>( <font class="keyword">const</font> QChar &amp;c )<font class="keyword"> const
</font>01054 <font class="keyword"></font>{
01055     <font class="keywordflow">if</font> ( c == <font class="charliteral">'\t'</font> )
01056         <font class="keywordflow">return</font> 30;
01057     <font class="keywordtype">int</font> w = 0;
01058     <font class="keywordflow">if</font> ( c.unicode() &lt; 256 )
01059         w = widths[ c.unicode() ];
01060     <font class="keywordflow">if</font> ( w == 0 ) {
01061         w = fm-&gt;width( c );
01062         <font class="keywordflow">if</font> ( c.unicode() &lt; 256 )
01063             ( (<a class="code" href="class_ktexteditformat.html">KTextEditFormat</a>*)<font class="keyword">this</font> )-&gt;widths[ c.unicode() ] = w;
01064     }
01065     <font class="keywordflow">return</font> w;
01066 }
01067 
<a name="l01068"></a><a class="code" href="class_ktexteditformat.html#a7">01068</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a7">KTextEditFormat::height</a>()<font class="keyword"> const
</font>01069 <font class="keyword"></font>{
01070     <font class="keywordflow">return</font> hei;
01071 }
01072 
<a name="l01073"></a><a class="code" href="class_ktexteditformat.html#a8">01073</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a8">KTextEditFormat::ascent</a>()<font class="keyword"> const
</font>01074 <font class="keyword"></font>{
01075     <font class="keywordflow">return</font> asc;
01076 }
01077 
<a name="l01078"></a><a class="code" href="class_ktexteditformat.html#a9">01078</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditformat.html#a9">KTextEditFormat::descent</a>()<font class="keyword"> const
</font>01079 <font class="keyword"></font>{
01080     <font class="keywordflow">return</font> dsc;
01081 }
01082 
<a name="l01083"></a><a class="code" href="class_ktexteditformat.html#a17">01083</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditformat.html#a17">KTextEditFormat::operator==</a>( <font class="keyword">const</font> <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> &amp;f )<font class="keyword"> const
</font>01084 <font class="keyword"></font>{
01085     <font class="keywordflow">return</font> k == f.k;
01086 }
01087 
<a name="l01088"></a><a class="code" href="class_ktexteditformat.html#a18">01088</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditformatcollection.html">KTextEditFormatCollection</a> *<a class="code" href="class_ktexteditformat.html#a18">KTextEditFormat::parent</a>()<font class="keyword"> const
</font>01089 <font class="keyword"></font>{
01090     <font class="keywordflow">return</font> collection;
01091 }
01092 
<a name="l01093"></a><a class="code" href="class_ktexteditformat.html#a20">01093</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a20">KTextEditFormat::addRef</a>()<font class="keyword">
</font>01094 <font class="keyword"></font>{
01095     ref++;
01096 <font class="preprocessor">#ifdef DEBUG_COLLECTION
</font>01097 <font class="preprocessor"></font>    qDebug( <font class="stringliteral">"add ref of '%s' to %d (%p)"</font>, (<font class="keyword">const</font> <font class="keywordtype">char</font>*)k.local8Bit(), ref, <font class="keyword">this</font> );
01098 <font class="preprocessor">#endif
</font>01099 <font class="preprocessor"></font>}
01100 
<a name="l01101"></a><a class="code" href="class_ktexteditformat.html#a21">01101</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#a21">KTextEditFormat::removeRef</a>()<font class="keyword">
</font>01102 <font class="keyword"></font>{
01103     ref--;
01104     <font class="keywordflow">if</font> ( !collection )
01105         <font class="keywordflow">return</font>;
01106 <font class="preprocessor">#ifdef DEBUG_COLLECTION
</font>01107 <font class="preprocessor"></font>    qDebug( <font class="stringliteral">"remove ref of '%s' to %d (%p)"</font>, k.latin1(), ref, <font class="keyword">this</font> );
01108 <font class="preprocessor">#endif
</font>01109 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ( ref == 0 )
01110         collection-&gt;<a class="code" href="class_ktexteditformatcollection.html#a7">remove</a>( <font class="keyword">this</font> );
01111 }
01112 
<a name="l01113"></a><a class="code" href="class_ktexteditformat.html#a19">01113</a> <font class="keyword">inline</font> QString <a class="code" href="class_ktexteditformat.html#a19">KTextEditFormat::key</a>()<font class="keyword"> const
</font>01114 <font class="keyword"></font>{
01115     <font class="keywordflow">return</font> k;
01116 }
01117 
<a name="l01118"></a><a class="code" href="class_ktexteditformat.html#c1">01118</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformat.html#c1">KTextEditFormat::generateKey</a>()<font class="keyword">
</font>01119 <font class="keyword"></font>{
01120     QTextOStream ts( &amp;k );
01121     ts &lt;&lt; fn.pointSize()
01122        &lt;&lt; fn.weight()
01123        &lt;&lt; (<font class="keywordtype">int</font>)fn.underline()
01124        &lt;&lt; (<font class="keywordtype">int</font>)fn.italic()
01125        &lt;&lt; col.rgb()
01126        &lt;&lt; fn.family();
01127 }
01128 
<a name="l01129"></a><a class="code" href="class_ktexteditformat.html#d0">01129</a> <font class="keyword">inline</font> QString <a class="code" href="class_ktexteditformat.html#d0">KTextEditFormat::getKey</a>( <font class="keyword">const</font> QFont &amp;fn, <font class="keyword">const</font> QColor &amp;col )<font class="keyword">
</font>01130 <font class="keyword"></font>{
01131     QString k;
01132     QTextOStream ts( &amp;k );
01133     ts &lt;&lt; fn.pointSize()
01134        &lt;&lt; fn.weight()
01135        &lt;&lt; (<font class="keywordtype">int</font>)fn.underline()
01136        &lt;&lt; (<font class="keywordtype">int</font>)fn.italic()
01137        &lt;&lt; col.rgb()
01138        &lt;&lt; fn.family();
01139     <font class="keywordflow">return</font> k;
01140 }
01141 
01142 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
01143 
<a name="l01144"></a><a class="code" href="class_ktexteditstring.html#a2">01144</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditstring__char.html">KTextEditString::Char</a> &amp;<a class="code" href="class_ktexteditstring.html#a2">KTextEditString::at</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const
</font>01145 <font class="keyword"></font>{
01146     <font class="keywordflow">return</font> data[ i ];
01147 }
01148 
<a name="l01149"></a><a class="code" href="class_ktexteditstring.html#a1">01149</a> <font class="keyword">inline</font> QString <a class="code" href="class_ktexteditstring.html#a1">KTextEditString::toString</a>()<font class="keyword"> const
</font>01150 <font class="keyword"></font>{
01151     <font class="keywordflow">return</font> cache;
01152 }
01153 
<a name="l01154"></a><a class="code" href="class_ktexteditstring.html#a3">01154</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditstring.html#a3">KTextEditString::length</a>()<font class="keyword"> const
</font>01155 <font class="keyword"></font>{
01156     <font class="keywordflow">return</font> data.size();
01157 }
01158 
01159 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
01160 
<a name="l01161"></a><a class="code" href="class_ktexteditparag.html#a5">01161</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditstring__char.html">KTextEditString::Char</a> *<a class="code" href="class_ktexteditparag.html#a5">KTextEditParag::at</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const
</font>01162 <font class="keyword"></font>{
01163     <font class="keywordflow">return</font> &amp;str-&gt;<a class="code" href="class_ktexteditstring.html#a2">at</a>( i );
01164 }
01165 
<a name="l01166"></a><a class="code" href="class_ktexteditparag.html#a6">01166</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a6">KTextEditParag::length</a>()<font class="keyword"> const
</font>01167 <font class="keyword"></font>{
01168     <font class="keywordflow">return</font> str-&gt;<a class="code" href="class_ktexteditstring.html#a3">length</a>();
01169 }
01170 
<a name="l01171"></a><a class="code" href="class_ktexteditparag.html#a21">01171</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditparag.html#a21">KTextEditParag::isValid</a>()<font class="keyword"> const
</font>01172 <font class="keyword"></font>{
01173     <font class="keywordflow">return</font> invalid == -1;
01174 }
01175 
<a name="l01176"></a><a class="code" href="class_ktexteditparag.html#a22">01176</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditparag.html#a22">KTextEditParag::hasChanged</a>()<font class="keyword"> const
</font>01177 <font class="keyword"></font>{
01178     <font class="keywordflow">return</font> changed;
01179 }
01180 
<a name="l01181"></a><a class="code" href="class_ktexteditparag.html#a23">01181</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a23">KTextEditParag::setChanged</a>( <font class="keywordtype">bool</font> b )<font class="keyword">
</font>01182 <font class="keyword"></font>{
01183     changed = b;
01184 }
01185 
<a name="l01186"></a><a class="code" href="class_ktexteditparag.html#a14">01186</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a14">KTextEditParag::append</a>( <font class="keyword">const</font> QString &amp;s )<font class="keyword">
</font>01187 <font class="keyword"></font>{
01188     <a class="code" href="class_ktexteditparag.html#a13">insert</a>( str-&gt;<a class="code" href="class_ktexteditstring.html#a3">length</a>(), s );
01189 }
01190 
<a name="l01191"></a><a class="code" href="class_ktexteditparag.html#a8">01191</a> <font class="keyword">inline</font> QRect <a class="code" href="class_ktexteditparag.html#a8">KTextEditParag::rect</a>()<font class="keyword"> const
</font>01192 <font class="keyword"></font>{
01193     <font class="keywordflow">return</font> r;
01194 }
01195 
<a name="l01196"></a><a class="code" href="class_ktexteditparag.html#a9">01196</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditparag.html#a9">KTextEditParag::prev</a>()<font class="keyword"> const
</font>01197 <font class="keyword"></font>{
01198     <font class="keywordflow">return</font> p;
01199 }
01200 
<a name="l01201"></a><a class="code" href="class_ktexteditparag.html#a10">01201</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditparag.html">KTextEditParag</a> *<a class="code" href="class_ktexteditparag.html#a10">KTextEditParag::next</a>()<font class="keyword"> const
</font>01202 <font class="keyword"></font>{
01203     <font class="keywordflow">return</font> n;
01204 }
01205 
<a name="l01206"></a><a class="code" href="class_ktexteditparag.html#a32">01206</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a32">KTextEditParag::setSelection</a>( <font class="keywordtype">int</font> id, <font class="keywordtype">int</font> start, <font class="keywordtype">int</font> end )<font class="keyword">
</font>01207 <font class="keyword"></font>{
01208     QMap&lt;int, Selection&gt;::ConstIterator it = selections.find( id );
01209     <font class="keywordflow">if</font> ( it != selections.<a class="code" href="class_ktexteditparag__selection.html#m1">end</a>() ) {
01210         <font class="keywordflow">if</font> ( start == ( *it ).start &amp;&amp; end == ( *it ).end )
01211             <font class="keywordflow">return</font>;
01212     }
01213 
01214     Selection sel;
01215     sel.start = start;
01216     sel.end = end;
01217     selections[ id ] = sel;
01218     changed = TRUE;
01219 }
01220 
<a name="l01221"></a><a class="code" href="class_ktexteditparag.html#a33">01221</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a33">KTextEditParag::removeSelection</a>( <font class="keywordtype">int</font> id )<font class="keyword">
</font>01222 <font class="keyword"></font>{
01223     selections.remove( id );
01224     changed = TRUE;
01225 }
01226 
<a name="l01227"></a><a class="code" href="class_ktexteditparag.html#a34">01227</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a34">KTextEditParag::selectionStart</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>01228 <font class="keyword"></font>{
01229     QMap&lt;int, Selection&gt;::ConstIterator it = selections.find( id );
01230     <font class="keywordflow">if</font> ( it == selections.<a class="code" href="class_ktexteditparag__selection.html#m1">end</a>() )
01231         <font class="keywordflow">return</font> -1;
01232     <font class="keywordflow">return</font> ( *it ).start;
01233 }
01234 
<a name="l01235"></a><a class="code" href="class_ktexteditparag.html#a35">01235</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a35">KTextEditParag::selectionEnd</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>01236 <font class="keyword"></font>{
01237     QMap&lt;int, Selection&gt;::ConstIterator it = selections.find( id );
01238     <font class="keywordflow">if</font> ( it == selections.<a class="code" href="class_ktexteditparag__selection.html#m1">end</a>() )
01239         <font class="keywordflow">return</font> -1;
01240     <font class="keywordflow">return</font> ( *it ).end;
01241 }
01242 
<a name="l01243"></a><a class="code" href="class_ktexteditparag.html#a36">01243</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditparag.html#a36">KTextEditParag::hasSelection</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>01244 <font class="keyword"></font>{
01245     QMap&lt;int, Selection&gt;::ConstIterator it = selections.find( id );
01246     <font class="keywordflow">if</font> ( it == selections.<a class="code" href="class_ktexteditparag__selection.html#m1">end</a>() )
01247         <font class="keywordflow">return</font> FALSE;
01248     <font class="keywordflow">return</font> ( *it ).start != ( *it ).end || <a class="code" href="class_ktexteditparag.html#a6">length</a>() == 1;
01249 }
01250 
<a name="l01251"></a><a class="code" href="class_ktexteditparag.html#a37">01251</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditparag.html#a37">KTextEditParag::hasAnySelection</a>()<font class="keyword"> const
</font>01252 <font class="keyword"></font>{
01253     <font class="keywordflow">return</font> !selections.isEmpty();
01254 }
01255 
<a name="l01256"></a><a class="code" href="class_ktexteditparag.html#a38">01256</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="class_ktexteditparag.html#a38">KTextEditParag::fullSelected</a>( <font class="keywordtype">int</font> id )<font class="keyword"> const
</font>01257 <font class="keyword"></font>{
01258     QMap&lt;int, Selection&gt;::ConstIterator it = selections.find( id );
01259     <font class="keywordflow">if</font> ( it == selections.<a class="code" href="class_ktexteditparag__selection.html#m1">end</a>() )
01260         <font class="keywordflow">return</font> FALSE;
01261     <font class="keywordflow">return</font> ( *it ).start == 0 &amp;&amp; ( *it ).end == str-&gt;<a class="code" href="class_ktexteditstring.html#a3">length</a>() - 1;
01262 }
01263 
<a name="l01264"></a><a class="code" href="class_ktexteditparag.html#a39">01264</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a39">KTextEditParag::setParagId</a>( <font class="keywordtype">int</font> i )<font class="keyword">
</font>01265 <font class="keyword"></font>{
01266     id = i;
01267 }
01268 
<a name="l01269"></a><a class="code" href="class_ktexteditparag.html#a40">01269</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a40">KTextEditParag::paragId</a>()<font class="keyword"> const
</font>01270 <font class="keyword"></font>{
01271     <font class="keywordflow">if</font> ( id == -1 )
01272         qWarning( <font class="stringliteral">"invalid parag id!!!!!!!! (%p)"</font>, <font class="keyword">this</font> );
01273     <font class="keywordflow">return</font> id;
01274 }
01275 
<a name="l01276"></a><a class="code" href="class_ktexteditparag.html#a42">01276</a> <font class="keyword">inline</font> QMap&lt;int, KTextEditParag::LineStart*&gt; &amp;<a class="code" href="class_ktexteditparag.html#a42">KTextEditParag::lineStartList</a>()<font class="keyword">
</font>01277 <font class="keyword"></font>{
01278     <font class="keywordflow">return</font> lineStarts;
01279 }
01280 
<a name="l01281"></a><a class="code" href="class_ktexteditparag.html#a28">01281</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a28">KTextEditParag::lineY</a>( <font class="keywordtype">int</font> l )<font class="keyword"> const
</font>01282 <font class="keyword"></font>{
01283     <font class="keywordflow">if</font> ( l &gt; (<font class="keywordtype">int</font>)lineStarts.count() - 1 ) {
01284         qWarning( <font class="stringliteral">"KTextEditParag::lineY: line %d out of range!"</font>, l );
01285         <font class="keywordflow">return</font> 0;
01286     }
01287 
01288     <font class="keywordflow">if</font> ( !<a class="code" href="class_ktexteditparag.html#a21">isValid</a>() )
01289         ( (<a class="code" href="class_ktexteditparag.html">KTextEditParag</a>*)<font class="keyword">this</font> )-&gt;format();
01290 
01291     QMap&lt;int, LineStart*&gt;::ConstIterator it = lineStarts.begin();
01292     <font class="keywordflow">while</font> ( l-- &gt; 0 )
01293         ++it;
01294     <font class="keywordflow">return</font> ( *it )-&gt;y;
01295 }
01296 
01297 
<a name="l01298"></a><a class="code" href="class_ktexteditparag.html#a29">01298</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a29">KTextEditParag::lineBaseLine</a>( <font class="keywordtype">int</font> l )<font class="keyword"> const
</font>01299 <font class="keyword"></font>{
01300     <font class="keywordflow">if</font> ( l &gt; (<font class="keywordtype">int</font>)lineStarts.count() - 1 ) {
01301         qWarning( <font class="stringliteral">"KTextEditParag::lineBaseLine: line %d out of range!"</font>, l );
01302         <font class="keywordflow">return</font> 10;
01303     }
01304 
01305     <font class="keywordflow">if</font> ( !<a class="code" href="class_ktexteditparag.html#a21">isValid</a>() )
01306         ( (<a class="code" href="class_ktexteditparag.html">KTextEditParag</a>*)<font class="keyword">this</font> )-&gt;format();
01307 
01308     QMap&lt;int, LineStart*&gt;::ConstIterator it = lineStarts.begin();
01309     <font class="keywordflow">while</font> ( l-- &gt; 0 )
01310         ++it;
01311     <font class="keywordflow">return</font> ( *it )-&gt;baseLine;
01312 }
01313 
<a name="l01314"></a><a class="code" href="class_ktexteditparag.html#a30">01314</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a30">KTextEditParag::lineHeight</a>( <font class="keywordtype">int</font> l )<font class="keyword"> const
</font>01315 <font class="keyword"></font>{
01316     <font class="keywordflow">if</font> ( l &gt; (<font class="keywordtype">int</font>)lineStarts.count() - 1 ) {
01317         qWarning( <font class="stringliteral">"KTextEditParag::lineHeight: line %d out of range!"</font>, l );
01318         <font class="keywordflow">return</font> 15;
01319     }
01320 
01321     <font class="keywordflow">if</font> ( !<a class="code" href="class_ktexteditparag.html#a21">isValid</a>() )
01322         ( (<a class="code" href="class_ktexteditparag.html">KTextEditParag</a>*)<font class="keyword">this</font> )-&gt;format();
01323 
01324     QMap&lt;int, LineStart*&gt;::ConstIterator it = lineStarts.begin();
01325     <font class="keywordflow">while</font> ( l-- &gt; 0 )
01326         ++it;
01327     <font class="keywordflow">return</font> ( *it )-&gt;h;
01328 }
01329 
<a name="l01330"></a><a class="code" href="class_ktexteditparag.html#a31">01330</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a31">KTextEditParag::lineInfo</a>( <font class="keywordtype">int</font> l, <font class="keywordtype">int</font> &amp;y, <font class="keywordtype">int</font> &amp;h, <font class="keywordtype">int</font> &amp;bl )<font class="keyword"> const
</font>01331 <font class="keyword"></font>{
01332     <font class="keywordflow">if</font> ( l &gt; (<font class="keywordtype">int</font>)lineStarts.count() - 1 ) {
01333         qWarning( <font class="stringliteral">"KTextEditParag::lineInfo: line %d out of range!"</font>, l );
01334         qDebug( <font class="stringliteral">"%d %d"</font>, lineStarts.count() - 1, l );
01335         y = 0;
01336         h = 15;
01337         bl = 10;
01338         <font class="keywordflow">return</font>;
01339     }
01340 
01341     <font class="keywordflow">if</font> ( !<a class="code" href="class_ktexteditparag.html#a21">isValid</a>() )
01342         ( (<a class="code" href="class_ktexteditparag.html">KTextEditParag</a>*)<font class="keyword">this</font> )-&gt;format();
01343 
01344     QMap&lt;int, LineStart*&gt;::ConstIterator it = lineStarts.begin();
01345     <font class="keywordflow">while</font> ( l-- &gt; 0 )
01346         ++it;
01347     y = ( *it )-&gt;y;
01348     h = ( *it )-&gt;h;
01349     bl = ( *it )-&gt;baseLine;
01350 }
01351 
<a name="l01352"></a><a class="code" href="class_ktexteditparag.html#a4">01352</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditstring.html">KTextEditString</a> *<a class="code" href="class_ktexteditparag.html#a4">KTextEditParag::string</a>()<font class="keyword"> const
</font>01353 <font class="keyword"></font>{
01354     <font class="keywordflow">return</font> str;
01355 }
01356 
<a name="l01357"></a><a class="code" href="class_ktexteditparag.html#a7">01357</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *<a class="code" href="class_ktexteditparag.html#a7">KTextEditParag::document</a>()<font class="keyword"> const
</font>01358 <font class="keyword"></font>{
01359     <font class="keywordflow">return</font> doc;
01360 }
01361 
<a name="l01362"></a><a class="code" href="class_ktexteditparag.html#a2">01362</a> <font class="keyword">inline</font> KTextEditParag::Type <a class="code" href="class_ktexteditcommand.html#a2">KTextEditParag::type</a>()<font class="keyword"> const
</font>01363 <font class="keyword"></font>{
01364     <font class="keywordflow">return</font> typ;
01365 }
01366 
<a name="l01367"></a><a class="code" href="class_ktexteditparag.html#a3">01367</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a3">KTextEditParag::setType</a>( Type t )<font class="keyword">
</font>01368 <font class="keyword"></font>{
01369     <font class="keywordflow">if</font> ( t != typ ) {
01370         <a class="code" href="class_ktexteditparag.html#a18">invalidate</a>( 0 );
01371         <font class="keywordflow">if</font> ( p  &amp;&amp; p-&gt;<a class="code" href="class_ktexteditparag.html#a2">type</a>() == typ )
01372             p-&gt;<a class="code" href="class_ktexteditparag.html#a18">invalidate</a>( 0 );
01373     }
01374     typ = t;
01375     <font class="keywordflow">if</font> ( t == Normal )
01376         left = 0;
01377 }
01378 
<a name="l01379"></a><a class="code" href="class_ktexteditparag.html#a44">01379</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a44">KTextEditParag::leftIndent</a>()<font class="keyword"> const
</font>01380 <font class="keyword"></font>{
01381     <font class="keywordflow">return</font> left;
01382 }
01383 
<a name="l01384"></a><a class="code" href="class_ktexteditparag.html#a45">01384</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a45">KTextEditParag::listDepth</a>()<font class="keyword"> const
</font>01385 <font class="keyword"></font>{
01386     <font class="keywordflow">return</font> depth;
01387 }
01388 
<a name="l01389"></a><a class="code" href="class_ktexteditparag.html#a47">01389</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditparag.html#a47">KTextEditParag::setAlignment</a>( <font class="keywordtype">int</font> a )<font class="keyword">
</font>01390 <font class="keyword"></font>{
01391     <font class="keywordflow">if</font> ( a == align )
01392         <font class="keywordflow">return</font>;
01393     align = a;
01394     <a class="code" href="class_ktexteditparag.html#a18">invalidate</a>( 0 );
01395 }
01396 
<a name="l01397"></a><a class="code" href="class_ktexteditparag.html#a48">01397</a> <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="class_ktexteditparag.html#a48">KTextEditParag::alignment</a>()<font class="keyword"> const
</font>01398 <font class="keyword"></font>{
01399     <font class="keywordflow">return</font> align;
01400 }
01401 
01402 <font class="comment">// +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</font>
01403 
<a name="l01404"></a><a class="code" href="class_ktexteditformatcollection.html#a2">01404</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="class_ktexteditformatcollection.html#a2">KTextEditFormatCollection::setDefaultFormat</a>( <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *f )<font class="keyword">
</font>01405 <font class="keyword"></font>{
01406     defFormat = f;
01407 }
01408 
<a name="l01409"></a><a class="code" href="class_ktexteditformatcollection.html#a3">01409</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditformat.html">KTextEditFormat</a> *<a class="code" href="class_ktexteditformatcollection.html#a3">KTextEditFormatCollection::defaultFormat</a>()<font class="keyword"> const
</font>01410 <font class="keyword"></font>{
01411     <font class="keywordflow">return</font> defFormat;
01412 }
01413 
<a name="l01414"></a><a class="code" href="class_ktextedit.html#a4">01414</a> <font class="keyword">inline</font> <a class="code" href="class_ktexteditdocument.html">KTextEditDocument</a> *<a class="code" href="class_ktextedit.html#a4">KTextEdit::document</a>()<font class="keyword"> const
</font>01415 <font class="keyword"></font>{
01416     <font class="keywordflow">return</font> doc;
01417 }
01418 
01419 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Sun Jan 21 14:22:18 2001 for BibleTime by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align=center border=0 
width=110 height=53></a>1.1.5 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy; 1997-2000</small></address>
</body>
</html>
